/** 
 * Kendo UI v2021.3.1207 (http://www.telerik.com/kendo-ui)                                                                                                                                              
 * Copyright 2021 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      
 *                                                                                                                                                                                                      
 * Kendo UI commercial licenses may be obtained at                                                                                                                                                      
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  
 * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       

*/
!function(e,define){define("util/text-metrics.min",["kendo.core.min"],e)}(function(){!function(e){function t(e){return(e+"").replace(i,s)}function r(e){var t,r=[];for(t in e)r.push(t+e[t]);return r.sort().join("")}function o(e){var t,r=2166136261;for(t=0;t<e.length;++t)r+=(r<<1)+(r<<4)+(r<<7)+(r<<8)+(r<<24),r^=e.charCodeAt(t);return r>>>0}function l(){return{width:0,height:0,baseline:0}}function a(e,t,r){return u.current.measure(e,t,r)}var n,i,s,d,c,u;window.kendo.util=window.kendo.util||{},n=kendo.Class.extend({init:function(e){this._size=e,this._length=0,this._map={}},put:function(e,t){var r=this._map,o={key:e,value:t};r[e]=o,this._head?(this._tail.newer=o,o.older=this._tail,this._tail=o):this._head=this._tail=o,this._length>=this._size?(r[this._head.key]=null,this._head=this._head.newer,this._head.older=null):this._length++},get:function(e){var t=this._map[e];if(t)return t===this._head&&t!==this._tail&&(this._head=t.newer,this._head.older=null),t!==this._tail&&(t.older&&(t.older.newer=t.newer,t.newer.older=t.older),t.older=this._tail,t.newer=null,this._tail.newer=t,this._tail=t),t.value}}),i=/\r?\n|\r|\t/g,s=" ",d={baselineMarkerSize:1},"undefined"!=typeof document&&(c=document.createElement("div"),c.style.cssText="position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;padding: 0 !important; margin: 0 !important; border: 0 !important;line-height: normal !important; visibility: hidden !important; white-space: pre!important;"),u=kendo.Class.extend({init:function(t){this._cache=new n(1e3),this.options=e.extend({},d,t)},measure:function(e,a,n){var i,s,d,u,p,h,f,g,m;if(void 0===n&&(n={}),void 0===e||null===e)return l();if(i=r(a),s=o(e+i),d=this._cache.get(s))return d;u=l(),p=n.box||c,h=this._baselineMarker().cloneNode(!1);for(f in a)g=a[f],void 0!==g&&(p.style[f]=g);return m=n.normalizeText!==!1?t(e):e+"",p.textContent=m,p.appendChild(h),document.body.appendChild(p),m.length&&(u.width=p.offsetWidth-this.options.baselineMarkerSize,u.height=p.offsetHeight,u.baseline=h.offsetTop+this.options.baselineMarkerSize),u.width>0&&u.height>0&&this._cache.put(s,u),p.parentNode.removeChild(p),u},_baselineMarker:function(){var e=document.createElement("div");return e.style.cssText="display: inline-block; vertical-align: baseline;width: "+this.options.baselineMarkerSize+"px; height: "+this.options.baselineMarkerSize+"px;overflow: hidden;",e}}),u.current=new u,kendo.deepExtend(kendo.util,{LRUCache:n,TextMetrics:u,measureText:a,objectKey:r,hashKey:o,normalizeText:t})}(window.kendo.jQuery)},"function"==typeof define&&define.amd?define:function(e,t,r){(r||t)()}),function(e,define){define("kendo.grid.min",["kendo.data.min","kendo.columnsorter.min","kendo.editable.min","kendo.window.min","kendo.filtermenu.min","kendo.columnmenu.min","kendo.groupable.min","kendo.pager.min","kendo.selectable.min","kendo.sortable.min","kendo.reorderable.min","kendo.resizable.min","kendo.ooxml.min","kendo.excel.min","kendo.pane.min","kendo.progressbar.min","kendo.pdf.min","kendo.dialog.min","kendo.pane.min","kendo.switch.min"],e)}(function(){return function(e,t){function r(e,t){return"["+Qe.attr(e)+"="+t+"]"}function o(e){return Array(e+1).join('<td class="k-group-cell">&nbsp;</td>')}function l(e){var t,r=" ";if(e){if(typeof e===Dr)return e;for(t in e)""!==e[t]&&(r+=t+'="'+e[t]+'"')}return r}function a(t,r){e("th, th .k-grid-filter, th .k-link",t).add(document.body).css("cursor",r)}function n(t,r,o,l,a){var n,i=r;for(r=e(),a=a||1,n=0;n<a;n++)r=r.add(t.eq(i+n));"number"==typeof o?r[l?"insertBefore":"insertAfter"](t.eq(o)):r.appendTo(o)}function i(t,r,o){return e(t).add(r).find(o)}function s(e,t,r){var o,l,a,n;for(r=dt(r)?r:[r],o=0,l=r.length;o<l;o++)a=r[o],at(a)&&a.click&&(n=a.name||a.text,t.on(Hr+It,"a.k-grid-"+(n||"").replace(/\s/g,""),{commandName:n},pt(a.click,e)))}function d(e,t,r,o,l){return it(e,function(e){var a,n;return e=typeof e===Dr?{field:e}:e,e.parentIds=l,b(e)&&!r||(e.attributes=de(e.attributes),e.footerAttributes=de(e.footerAttributes),e.headerAttributes=de(e.headerAttributes),a=!0),n=Qe.guid(),o&&!e.locked&&(e.locked=o),e.headerAttributes=nt({headers:l},e.headerAttributes),e.headerAttributes.id?n=e.headerAttributes.id:(e.headerAttributes=nt({id:n},e.headerAttributes),e.uid=n),e.columns&&(e.columns=d(e.columns,t,a,e.locked,l?l+" "+n:n)),nt({encoded:t,hidden:a,locked:o},e)})}function c(e,t){var r=[];return u(e,t,r),r[r.length-1]}function u(e,t,r){var o,l;for(r=r||[],o=0;o<t.length;o++){if(e===t[o])return!0;if(t[o].columns){if(l=r.length,r.push(t[o]),u(e,t[o].columns,r))return!0;r.splice(l,r.length-l)}}return!1}function p(e,t){h(e,t,t)}function h(e,t,r){var o=r?ue:de;e.hidden=!t,e.attributes=o(e.attributes),e.footerAttributes=o(e.footerAttributes),e.headerAttributes=o(e.headerAttributes)}function f(e,t){g(e);var r=e._hideByMedia;h(e,t,r?e.matchesMedia:t)}function g(e){e.matchesMedia=m(e)}function m(e){return e&&(C(e.media)||!C(e.media)&&Qe.matchesMedia(e.media))}function _(){return"none"!==this.style.display}function k(t){return"none"!==e(t)[0].style.display}function b(e){return v([e]).length>0}function v(e){return st(e,function(e){var t=!e.hidden&&e.matchesMedia!==!1;return t&&e.columns&&(t=v(e.columns).length>0),t})}function w(e){var t,r,o=[];for(r=0;r<e.length;r++){if(t=e[r],!C(t.media)){if(!C(t.minScreenWidth))throw Error("Using 'media' and 'minScreenWidth' options at the same time is not supported.");o.push(t)}t.columns&&(o=o.concat(w(t.columns)))}return o}function C(e){return t===e}function y(t){return e(t).map(function(){return this.toArray()})}function S(e,t,r){var o=R($(t)),l=R(Q(t)),a=e.rowSpan;e.rowSpan=r?o>l?a-(o-l)||1:a+(l-o):o>l?a+(o-l):a-(l-o)||1}function T(e,t){for(var r=0;r<e.length;r++)if(e[r].field==t)return e[r]}function x(t,r,o,l,a,n,i,s){var d,c,u=R(t),p=R([r]);u>p&&(d=Array(i+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>'),c=n.children(":not(.k-filter-row)"),e(Array(u-p+1).join("<tr>"+d+"</tr>")).insertAfter(c.last())),B(n,u-p),I(o,l,a,n,s)}function H(t,r,o){var l,a,n,i,s,d,c,u;for(o=o||0,n=r,r=oe(r),i={},s=t.find(">tr:not(.k-filter-row)"),d=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")},c=0,u=r.length;c<u;c++)l=E(r[c],n),i[l.row]||(i[l.row]=s.eq(l.row).find(".k-header").filter(d)),a=i[l.row].eq(l.cell),a.attr(Qe.attr("index"),o+c);return r.length}function R(e){var t,r,o=1,l=0;for(t=0;t<e.length;t++)e[t].columns&&(r=R(e[t].columns),r>l&&(l=r));return o+l}function I(t,r,o,l,a){var n,i,s=A(t[0],r),d=o.find(">tr:not(.k-filter-row)").eq(s.row).children("th.k-header"),c=e(),u=s.cell;for(n=0;n<t.length;n++)c=c.add(d.eq(u+n));for(l.find(">tr:not(.k-filter-row)").eq(s.row)[a](c),i=[],n=0;n<t.length;n++)t[n].columns&&(i=i.concat(t[n].columns));i.length&&I(i,r,o,l,a)}function E(e,t,r,o){var l,a;for(r=r||0,o=o||{},o[r]=o[r]||0,a=0;a<t.length;a++){if(t[a]==e){l={cell:o[r],row:r};break}if(t[a].columns&&(l=E(e,t[a].columns,r+1,o)))break;o[r]++}return l}function z(e,t,r,o){var l,a,n=!!r.locked;do l=e[t],t+=o?1:-1,a=!!l.locked;while(l&&t>-1&&t<e.length&&l!=r&&!l.columns&&a===n);return l}function D(e,t,r,o,l){var a,n,i,s,d;return t.columns?(t=t.columns,t[o?0:t.length-1]):(a=c(t,e),n=a?a.columns:e,i=ct(t,n),0===i&&o?i++:i==n.length-1&&!o||!r.locked&&!t.columns&&!o?i--:(i>0||0===i&&!o)&&i++,s=ct(r,n),t=z(n,i,r,s>i),d=ct(t,l),(!t.columns||d&&d!==n.length-1)&&t&&t!=r&&t.columns?D(e,t,r,o,l):null)}function A(e,t,r,o){var l,a;for(r=r||0,o=o||{},o[r]=o[r]||0,a=0;a<t.length;a++){if(t[a]==e){l={cell:o[r],row:r};break}if(t[a].columns&&(l=A(e,t[a].columns,r+1,o)))break;t[a].hidden||o[r]++}return l}function L(e){var t=M($(e));return t.concat(M(Q(e)))}function F(e,t,r,o){var l=e[r],a=e[o],n=c(l,t);return t=n?n.columns:t,ct(a,t)}function M(e){var t,r=[],o=[];for(t=0;t<e.length;t++)r.push(e[t]),e[t].columns&&(o=o.concat(e[t].columns));return o.length&&(r=r.concat(M(o))),r}function P(e){var t,r,o=0;for(r=0;r<e.length;r++)t=e[r],t.columns?o+=P(t.columns):t.hidden&&o++;return o}function q(e){var t,r,o=0;for(t=0,r=e.length;t<r;t++)e[t].hidden||(o+=parseInt(e[t].width,10));return o}function W(e){var t,r,o,l=0;for(r=0,o=e.length;r<o;r++)t=e[r].style.width,t&&t.indexOf("%")==-1&&(l+=parseInt(t,10));return l}function V(e,t){var r,o,l=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");for(o=0;o<l.length;o++)r=l[o].rowSpan,r>1&&(l[o].rowSpan=r-t||1)}function B(e,t){var r,o=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");for(r=0;r<o.length;r++)o[r].rowSpan+=t}function O(t){var r,o=t.find("tr:not(.k-filter-row)"),l=o.filter(function(){return!e(this).children().length}).remove().length,a=o.find("th:not(.k-group-cell,.k-hierarchy-cell)");for(r=0;r<a.length;r++)a[r].rowSpan>1&&(a[r].rowSpan-=l);return o.length-l}function G(e,t,r,o,l){var a,n,i,s=[];for(a=0,i=e.length;a<i;a++)n=r[o]||[],n.push(t.eq(l+a)),r[o]=n,e[a].columns&&(s=s.concat(e[a].columns));s.length&&G(s,t,r,o+1,l+e.length)}function N(e,t,r){e.css({left:t,right:r})}function U(e,t,r){e[t]=e[t]||{},e[t][r]=e[t][r]||""}function K(e,t,r,o){U(e,t,r),""!==e[t][r]?e[t][r]+=" "+o:e[t][r]=o}function j(e,t,r,o){U(e,t,r),e[t][r]=e[t][r].replace(o,"")}function $(e){return st(e,function(e){return e.locked})}function Q(e){return st(e,function(e){return!e.locked})}function J(e){return st(e,function(e){return e.sticky&&!e.locked})}function Y(e){return st(e,function(e){return e.sticky&&!e.locked&&b(e)})}function X(e){return st(e,function(e){return!e.locked&&b(e)})}function Z(e){return st(e,function(e){return e.locked&&b(e)})}function ee(e){var t,r=[];for(t=0;t<e.length;t++)e[t].hidden||(e[t].columns?r=r.concat(ee(e[t].columns)):r.push(e[t]));return r}function te(e){var t,r=[];for(t=0;t<e.length;t++)e[t].columns&&(r=r.concat(e[t].columns));return r}function re(e){var t=te(e);return t=t.filter(function(e){return!e.hidden})}function oe(e){var t,r=[];for(t=0;t<e.length;t++)e[t].columns?r=r.concat(oe(e[t].columns)):r.push(e[t]);return r}function le(e){var t,r=[];for(e=oe(e),t=0;t<e.length;t++)"string"==typeof e[t]?r.push(e[t]):e[t].field&&r.push(e[t].field);return r}function ae(r){var o,l=r.find(">tr:not(.k-filter-row)"),a=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")},n=e();return l.length>1&&(n=l.find("th").filter(a).filter(function(){return this.rowSpan>1})),n=n.add(l.last().find("th").filter(a)),o=Qe.attr("index"),n.sort(function(r,l){var a,n;return r=e(r),l=e(l),a=r.attr(o),n=l.attr(o),a===t&&(a=e(r).index()),n===t&&(n=e(l).index()),a=parseInt(a,10),n=parseInt(n,10),a>n?1:a<n?-1:0}),n}function ne(t){var r,o,l,a,n,i,s,d=t.closest("table"),c=e().add(t),u=t.closest("tr"),p=d.find("tr:not(.k-filter-row)"),h=p.index(u);if(h>0){for(r=p.eq(h-1),o=r.find("th:not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return!e(this).attr("rowspan")}),l=0,a=u.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(t),n=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return this.colSpan>1}),i=0;i<n.length;i++)l+=n[i].colSpan||1;for(a+=Math.max(l-1,0),l=0,i=0;i<o.length;i++)if(s=o.eq(i),l+=s.attr("data-colspan")?s[0].getAttribute("data-colspan"):1,a>=i&&a<l){c=ne(s).add(c);break}}return c}function ie(t){var r,o,l,a,n,i,s,d=t.closest("thead"),c=e().add(t),u=t.closest("tr"),p=d.find("tr:not(.k-filter-row)"),h=p.index(u)+t[0].rowSpan,f=Qe.attr("colspan");if(h<=p.length-1){for(r=u.next(),o=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)"),o=o.filter(function(){return!this.rowSpan||1===this.rowSpan}),a=0,l=0;l<o.length;l++)a+=parseInt(o.eq(l).attr(f),10)||1;for(n=r.find("th:not(.k-group-cell,.k-hierarchy-cell)"),i=parseInt(t.attr(f),10)||1,l=0;l<i;)r=n.eq(l+a),c=c.add(ie(r)),s=parseInt(r.attr(f),10),s>1&&(i-=s-1),l++}return c}function se(t,r,o,l){var a,n=t;return l&&t.empty(),Ze?t[0].innerHTML=o:(a=document.createElement("div"),a.innerHTML="<table><tbody>"+o+"</tbody></table>",t=a.firstChild.firstChild,r[0].replaceChild(t,n[0]),t=e(t)),t}function de(e){e=e||{};var t=e.style;return t?(t=t.replace(/display:[^;]*/i,"display:none"),t.match(/display:/i)||(t=t.replace(/(.*)?/i,"display:none;$1"))):t="display:none",nt({},e,{style:t})}function ce(e){e=e||{};var t=e.style||"";return t.indexOf("display:none")!==-1}function ue(e){e=e||{};var t=e.style;return t&&(e.style=t.replace(/(display\s*:\s*none\s*;?)*/gi,"")),e}function pe(t,r,o,l){var a,n=t.find(">colgroup"),i=it(r,function(e){return a=e.width,a&&0!==parseInt(a,10)?Qe.format('<col style="width:{0}"/>',typeof a===Dr?a:a+"px"):"<col />"});(o||n.find(".k-hierarchy-col").length)&&i.splice(0,0,'<col class="k-hierarchy-col" />'),n.length&&n.remove(),n=e(Array(l+1).join('<col class="k-group-col">')+i.join("")),n.is("colgroup")||(n=e("<colgroup/>").append(n)),t.prepend(n)}function he(e,t){var r,o,l=0,a=e.find("th:not(.k-group-cell)");for(r=0,o=t.length;r<o;r++)t[r].locked&&(a.eq(r).insertBefore(a.eq(l)),a=e.find("th:not(.k-group-cell)"),l++)}function fe(e){var t,r,o,l={};for(r=0,o=e.length;r<o;r++)t=e[r],l[t.value]=t.text;return l}function ge(e,t,r,o){var l=r&&r.length&&at(r[0])&&"value"in r[0],a=l?fe(r)[e]:e;return a=null!=a?a:"",t?Qe.format(t,a):o===!1?a:Qe.htmlEncode(a)}function me(e,t,r){for(var o,l=0,a=e[l];a;){if(o=!!r||"none"!==a.style.display,o&&!lo.test(a.className)&&--t<0){a.style.display=r?"":"none";break}a=e[++l]}}function _e(t,r){for(var o,l,a=0,n=t.length;a<n;a+=1)l=t.eq(a),l.is(".k-grouping-row,.k-detail-row")?(o=l.children(":not(.k-group-cell):first,.k-detail-cell").last(),o.attr("colspan",parseInt(o.attr("colspan"),10)-1)):(l.hasClass("k-grid-edit-row")&&(o=l.children(".k-edit-container")[0])&&(o=e(o),o.attr("colspan",parseInt(o.attr("colspan"),10)-1),o.find("col").eq(r).remove(),l=o.find("tr").first()),me(l[0].cells,r,!1))}function ke(e){var t,r,o=[];for(r=0;r<e.length&&(t=e[r],"field"in t&&"value"in t&&"items"in t);r++)o.push(t),t.hasSubgroups&&(o=o.concat(ke(t.items)));return o}function be(e){var t,r,o=[];for(r=0;r<e.length&&(t=e[r],"field"in t&&"value"in t&&"items"in t);r++)t.hasSubgroups&&(o=o.concat(be(t.items))),o.push(t.aggregates);return o}function ve(t,r){for(var o,l,a,n=0,i=t.length;n<i;n+=1)l=t.eq(n),l.is(".k-grouping-row,.k-detail-row")?(o=l.children(":not(.k-group-cell):first,.k-detail-cell").last(),o.attr("colspan",parseInt(o.attr("colspan"),10)+1)):(l.hasClass("k-grid-edit-row")&&(o=l.children(".k-edit-container")[0])&&(o=e(o),o.attr("colspan",parseInt(o.attr("colspan"),10)+1),pe(o.find(">form>table"),v(a),!1,0),l=o.find("tr").first()),me(l[0].cells,r,!0))}function we(e,t,r){r=r||1;var o,l,a;for(l=0,a=e.length;l<a;l++)o=e.eq(l).children().last(),o.attr("colspan",parseInt(o.attr("colspan"),10)+r),o=t.eq(l).children().last(),o.attr("colspan",parseInt(o.attr("colspan"),10)-r)}function Ce(e){var t,r,o=0,l=e.find(">colgroup>col");for(t=0,r=l.length;t<r;t+=1)o+=parseInt(l[t].style.width,10);return o}function ye(e,t){var r,o,l,a;e=e[0],t=t[0],e.rows.length!==t.rows.length&&(r=e.offsetHeight,o=t.offsetHeight,r>o?(l=t.rows[t.rows.length-1],ao.test(l.className)&&(l=t.rows[t.rows.length-2]),a=r-o):(l=e.rows[e.rows.length-1],ao.test(l.className)&&(l=e.rows[e.rows.length-2]),a=o-r),l.style.height=l.offsetHeight+a+"px")}function Se(e,t){var r,o=e.offsetHeight,l=t.offsetHeight;o>l?r=o+"px":o<l&&(r=l+"px"),r&&(e.style.height=t.style.height=r)}function Te(e,t){var r,o,l;if(typeof e===Dr&&e===t)return e;if(at(e)&&e.name===t)return e;if(dt(e))for(r=0,o=e.length;r<o;r++)if(l=e[r],typeof l===Dr&&l===t||l.name===t)return l;return null}function xe(t,r){if(r===!0){t=e(t);var o=Qe.scrollLeft(t.parent());Qe.focusElement(t),Qe.scrollLeft(t.parent(),o)}else e(t).one("focusin",function(e){e.preventDefault()}).trigger("focus")}function He(e,r){return e.options.groupable&&(r.groupable||r.groupable===t)}function Re(t,r){return!!e.grep(t,function(e){return e.field===r}).length}function Ie(e,t){return!(!e.field||e.selectable)&&(!(t.editable&&!t.editable(e.field))&&!(e.editable&&!e.editable(t)))}function Ee(t){return e(t).is(":button,a,:input,a>.k-icon,textarea,span.k-select,span.k-icon,span.k-link,label.k-checkbox-label,.k-input,.k-multiselect-wrap,.k-picker-wrap,.k-picker-wrap>.k-selected-color,.k-tool-icon,.k-dropdown")}function ze(r){var o=e(r.currentTarget),l=o.is("th"),a=this.table.add(this.lockedTable),n=this.thead.parent().add(e(">table",this.lockedHeader)),i=Ee(r.target),s=e(r.target).is(".k-checkbox"),d=e(r.target),c=o.closest("table")[0];return i&&o.find(Qe.roleSelector("filtercell")).length?(this._setCurrent(o),t):(c!==a[0]&&c!==a[1]&&c!==n[0]&&c!==n[1]||d.is("a.k-i-expand, a.k-i-collapse")||(this.options.navigatable&&this._setCurrent(o,!1,s),!l&&i||setTimeout(function(){var t=e(Qe._activeElement());t.hasClass("k-widget")&&!t.hasClass("k-grid-pager")||!t.is(nr)&&Ee(Qe._activeElement())&&e.contains(c,Qe._activeElement())||xe(c,!0)}),l&&!Qe.support.touch&&r.preventDefault()),t)}function De(e,t){if(!t)return 0;var r=0;return Qe.support.browser.webkit&&(r=e.width()),r}function Ae(e){var r;return"string"==typeof e?(r=e.toLowerCase(),"true"===r?{rows:!0}:{rows:r.indexOf("rows")>-1,columns:r.indexOf("columns")>-1}):e===!0?{rows:!0}:t}function Le(t,r){var o,l;return!!t&&(r=e(r),!!(r[0]&&gt(t[0],r[0])&&(o=r.offset().top-t.offset().top,l=r.outerHeight()/2,(o>=0||mt.abs(o)<=l)&&mt.floor(o+l)<=t.height())))}function Fe(e){return e&&(e.hasClass("k-edit-cell")||e.parent().hasClass("k-grid-edit-row"))}function Me(e){return'<td colspan="#=data.colspan +'+e+'#"><p class="k-reset"><a class="k-icon k-i-collapse" href="\\#" tabindex="-1" '+Xr+'="'+Jr+'"></a>#=data.text#</p></td>'}function Pe(e){return'<td colspan="'+e+'"><p class="k-reset">&nbsp;</p></td>'}function qe(e,t,r,l,a,n){return'<tr role="row"'+(n?'data-group-uid="'+a+'"':"")+'class="k-grouping-row">'+o(t)+'<td colspan="'+e+'" aria-expanded="'+!!l+'"><p class="k-reset"><a class="k-icon '+(l?"k-i-collapse":"k-i-expand")+'" href="#" tabindex="-1" '+Xr+'="'+(l?Jr:Yr)+'"></a>'+r+"</p></td></tr>"}function We(e){return'<tr role="row" class="k-grouping-row"><td colspan="'+e+'" aria-expanded="true"><p class="k-reset">&nbsp;</p></td></tr>'}function Ve(t,r){t=e(t)[0],t.style.display=r?"":"none"}function Be(e,t){var r=/&/g,o=/</g,l=/"/g,a=/'/g,n=/>/g;return(""+e).replace(r,"&amp;").replace(o,"&lt;").replace(n,"&gt;").replace(l,function(e){return t?"\\"+e:"&quot;"}).replace(a,"&#39;")}function Oe(e,t){return t.filter(function(t){return t.field===e})[0].title||e}function Ge(e,t){return this.dataSource.indexOf(this.dataSource.getByUid(e.uid))-this.dataSource.indexOf(this.dataSource.getByUid(t.uid))}function Ne(e){return!(e.exportable===!1||e.exportable&&e.exportable.excel===!1)}var Ue,Ke,je,$e,Qe=window.kendo,Je=Qe.ui,Ye=Qe.data.DataSource,Xe=Qe.data.ObservableObject,Ze=Qe.support.tbodyInnerHtml,et=Qe._activeElement,tt=Je.Widget,rt=Qe._outerWidth,ot=Qe._outerHeight,lt=Qe.keys,at=e.isPlainObject,nt=e.extend,it=e.map,st=e.grep,dt=Array.isArray,ct=e.inArray,ut=Array.prototype.push,pt=e.proxy,ht=Qe.isFunction,ft=e.isEmptyObject,gt=e.contains,mt=Math,_t=".",kt="progress",bt="error",vt="k-hierarchy-cell",wt=":not(.k-group-cell):not(["+Qe.attr("virtual")+"]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-collapse,.k-icon.k-i-expand))):visible",Ct="tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)",yt="tr:not(.k-footer-template):visible",St=":not(.k-group-cell):not(.k-detail-cell):not(.k-hierarchy-cell):visible",Tt="tr:not(.k-grouping-row):not(.k-detail-row):not(.k-footer-template):not(.k-group-footer):visible",xt="col:not(.k-group-col, .k-hierarchy-col)",Ht="th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)",Rt=".k-grid.k-widget",It=".kendoGrid",Et="k-grid-content-locked",zt="k-group-cell",Dt="edit",At="beforeEdit",Lt="save",Ft="remove",Mt="detailInit",Pt="filterMenuInit",qt="columnMenuInit",Wt="filterMenuOpen",Vt="columnMenuOpen",Bt="cellClose",Ot="change",Gt="columnHide",Nt="columnShow",Ut="saveChanges",Kt="dataBound",jt="detailExpand",$t="detailCollapse",Qt="itemchange",Jt="page",Yt="paging",Xt="scroll",Zt="sync",er="loadStart",tr="loadEnd",rr="k-state-focused",or=":kendoFocusable",lr="k-state-selected",ar="k-checkbox",nr="input[data-role='checkbox']."+ar,ir="k-grid-norecords",sr="k-link",dr="k-icon",cr="k-sort-order",ur="k-sorted",pr="k-header-column-menu",hr="k-grid-filter",fr="k-grid-content-sticky",gr="k-grid-header-sticky",mr="k-grid-footer-sticky",_r="k-grid-no-left-border",kr="resize",br="columnResize",vr="columnReorder",wr="columnLock",Cr="columnUnlock",yr="columnStick",Sr="columnUnstick",Tr="rowReorder",xr="navigate",Hr="click",Rr="mousedown",Ir="height",Er="tabIndex",zr="function",Dr="string",Ar="bottom",Lr="container-for",Fr="field",Mr="input",Pr="incell",qr="inline",Wr="uid",Vr=1,Br="colSpan",Or="overflow",Gr="hidden",Nr="sort",Ur="group-sort",Kr="Are you sure you want to delete this record?",jr="No records available.",$r="Delete",Qr="Cancel",Jr="Collapse",Yr="Expand",Xr="aria-label",Zr=/(\}|\#)/gi,eo=/#/gi,to="[\\x20\\t\\r\\n\\f]",ro=RegExp("(\\s*left\\s*:\\s*\\d*px;?)*","ig"),oo=RegExp("(\\s*right\\s*:\\s*\\d*px;?)*","ig"),lo=RegExp("(^|"+to+")(k-group-cell|k-hierarchy-cell)("+to+"|$)"),ao=RegExp("(^|"+to+")(k-filter-row)("+to+"|$)"),no='# if (iconClass) {#<a role="button" class="k-button k-button-icontext #=className#" #=attr# href="\\#"><span class="#=iconClass#"></span>#=text#</a># } else { #<a role="button" class="k-button k-button-icontext #=className#" #=attr# href="\\#">#=text#</a># } #',io='<input class="'+ar+'" data-role="checkbox" aria-label="Select row" aria-checked="false" type="checkbox">',so='<input class="'+ar+'" data-role="checkbox" aria-label="Select all rows" aria-checked="false" type="checkbox">',co='<span class="k-icon k-i-reorder"></span>',uo=!1,po=Qe.support.browser,ho=po.msie&&11===po.version,fo=/Mac OS/.test(navigator.userAgent),go={content:"k-content",widget:"k-widget",scrollContainer:"k-scroll-container"};Je.Pager&&(Ue=Je.Pager.extend({init:function(e,t){Je.Pager.fn.init.call(this,e,nt(!0,{},t)),this.dataSource.options.useRanges=!0,this.dataSource._omitPrefetch=!0},options:{name:"GroupsPager"},totalPages:function(){var e=this;return Math.ceil((e._collapsedTotal()||0)/(e.pageSize()||1))},_collapsedTotal:function(){var e=this.dataSource;return e?e.groupsTotal(!0)||0:0}})),Ke=tt.extend({init:function(e,t){var r=this;tt.fn.init.call(r,e,t),r._refreshHandler=pt(r.refresh,r),r.setDataSource(t.dataSource),r.wrap()},setDataSource:function(e){var t=this;t.dataSource&&t.dataSource.unbind(Ot,t._refreshHandler),t.dataSource=e,t.dataSource.bind(Ot,t._refreshHandler),t.dataSource.options.useRanges=!0},options:{name:"VirtualScrollable",itemHeight:e.noop,prefetch:!0,maxScrollHeight:25e4},events:[Yt,Jt,Xt,er,tr],destroy:function(){var e=this;tt.fn.destroy.call(e),e.dataSource.unbind(Ot,e._refreshHandler),e.wrapper.add(e.verticalScrollbar).off(It),clearTimeout(e._timeout),e._scrollingTimeout&&clearTimeout(e._scrollingTimeout),e.drag&&(e.drag.destroy(),e.drag=null),e.wrapper=e.element=e.verticalScrollbar=null,e._refreshHandler=null},wrap:function(){var t,r=this,o=Qe.support.scrollbar()+1,l=r.element;l.css({width:"auto",overflow:"hidden"}).css(uo?"padding-left":"padding-right",o),r.content=l.children().first(),t=r.wrapper=r.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().on("DOMMouseScroll"+It+" mousewheel"+It,pt(r._wheelScroll,r)),r._wrapper(),(Qe.support.kineticScrollNeeded||Qe.support.touch)&&(r.wrapper.css("touch-action","none"),r.drag=new Qe.UserEvents(r.wrapper,{global:!0,allowSelection:!0,start:function(e){e.sender.capture()},move:function(e){r.verticalScrollbar.scrollTop(r.verticalScrollbar.scrollTop()-e.y.delta),Qe.scrollLeft(t,Qe.scrollLeft(t)-e.x.delta),e.preventDefault()}})),r.verticalScrollbar=e('<div class="k-scrollbar k-scrollbar-vertical" />').css({width:o}).appendTo(l).on("scroll"+It,pt(r._scroll,r))},_wrapper:function(){var e=this;ho&&(e.wrapper.css({"overflow-y":Xt}),e.element.css(uo?"padding-left":"padding-right",0))},_wheelScroll:function(e){if(!e.ctrlKey){var t=this.verticalScrollbar,r=t.scrollTop(),o=Qe.wheelDeltaY(e);!o||o>0&&0===r||o<0&&r+t[0].clientHeight==t[0].scrollHeight||(e.preventDefault(),this.verticalScrollbar.scrollTop(r+-o))}},_scroll:function(e){var r=this,o=!r.options.prefetch,l=e.currentTarget.scrollTop,a=r.dataSource,n=r.itemHeight,i=a.skip()||0,s=r._rangeStart||i,d=r.element.innerHeight(),c=!!(r._scrollbarTop&&r._scrollbarTop>l),u=mt.max(mt.floor(l/n),0),p=c?mt.ceil(d/n):mt.floor(d/n),h=mt.max(u+p,0);return r._preventScroll?(r._preventScroll=!1,t):(r._prevScrollTop=r._scrollTop,r._scrollTop=l-s*n,r._scrollbarTop=l,r._scrolling=o,r._fetch(u,h,c)||(r.wrapper[0].scrollTop=r._scrollTop),r.trigger(Xt),o&&(r._scrollingTimeout&&clearTimeout(r._scrollingTimeout),r._scrollingTimeout=setTimeout(function(){r._scrolling=!1,r._page(r._rangeStart,r.dataSource.take())},100)),t)},scrollToTop:function(){this._scrollTo(0)},scrollToBottom:function(){var e=this.verticalScrollbar;this._scrollTo(e[0].scrollHeight-e.height())},_scrollWrapperToTop:function(){this.wrapper.scrollTop(0)},_scrollWrapperToBottom:function(){this.wrapper.scrollTop(this.wrapper[0].scrollHeight)},_scrollWrapperOnColumnResize:function(){var e=this,t=this.wrapper,r=t.scrollTop();t[0].scrollWidth>t[0].clientWidth?(!e._wrapperScrolled&&r||e._isScrolledToBottom())&&(t.scrollTop(r+Qe.support.scrollbar()),e._scrollTop=t.scrollTop(),e._wrapperScrolled=!0):e._wrapperScrolled&&(e._isWrapperScrolledToBottom()||(t.scrollTop(r-Qe.support.scrollbar()),e._scrollTop=t.scrollTop()),e._wrapperScrolled=!1)},_scrollTo:function(e){var t=this,r=t.verticalScrollbar;r.scrollTop()!==e&&(t._preventScroll=!0),t.wrapper.scrollTop(e),t._scrollTop=t.wrapper.scrollTop(),r.scrollTop(e),t._scrollbarTop=r.scrollTop()},_isScrolledToTop:function(){return 0===this.verticalScrollbar.scrollTop()},_isScrolledToBottom:function(){var e=this.verticalScrollbar,t=e.scrollTop();return t>0&&t>=parseInt(e[0].scrollHeight-e.height(),10)},_isWrapperScrolledToBottom:function(){var e=this.wrapper;return e.scrollTop()>=parseInt(e[0].scrollHeight-e.height(),10)},itemIndex:function(e){var t=this._rangeStart||this.dataSource.skip()||0;return t+e},position:function(e){var t,r=this._rangeStart||this.dataSource.skip()||0,o=this.dataSource.pageSize();return t=e>r?e-r:r-e-1,t>o?o:t},scrollIntoView:function(e){var t=this.wrapper[0],r=t.clientHeight,o=this._isScrolledToBottom()?t.scrollTop:this._scrollTop||t.scrollTop,l=e[0].offsetTop,a=e[0].offsetHeight;o>l?this.verticalScrollbar[0].scrollTop-=r/2:l+a>=o+r&&(this.verticalScrollbar[0].scrollTop+=r/2)},_fetch:function(t,r,o){var l=this,a=l.dataSource,n=l.itemHeight,i=a.take(),s=l._rangeStart||a.skip()||0,d=mt.floor(t/i)*i,c=!1,u=.33,p=l.verticalScrollbar,h=po.webkit?1:0,f=a._isGroupPaged()?a.groupsTotal(!0):a.total();return t<s?(c=!0,s=mt.max(0,r-i),l._scrollTop=p.scrollTop()-s*n,l._page(s,i)):r>=s+i&&!o?(c=!0,s=mt.min(t,f-i),l._scrollTop=p.scrollTop()>=p[0].scrollHeight-p[0].offsetHeight-h?l.wrapper[0].scrollHeight-l.wrapper[0].offsetHeight:l.dataSource._isGroupPaged()&&t>=f-i?l.wrapper[0].scrollHeight-l.wrapper[0].offsetHeight-(l._scrollTop-l._prevScrollTop):n,l._page(s,i)):!l._fetching&&l.options.prefetch&&(t<d+i-i*u&&t>i&&a.prefetch(d-i,i,e.noop),r>d+i*u&&a.prefetch(d+i,i,e.noop)),c},fetching:function(){return this._fetching},_page:function(t,r,o){var l=this,a=!l.options.prefetch,n=l.dataSource,i=n._isGroupPaged();o=ht(o)?o:e.noop,l.trigger(Yt,{skip:t,take:r})||(clearTimeout(l._timeout),l._fetching=!0,l._rangeStart=t,i&&n._groupRangeExists(t,t+r)||!i&&n.inRange(t,r)?(l.trigger(er),n.range(t,r,function(){l.trigger(tr),o(),l.trigger(Jt)},"page")):(a||l.trigger(er),l._timeout=setTimeout(function(){l._scrolling||(a&&l.trigger(er),n.range(t,r,function(){l.trigger(tr),o(),l.trigger(Jt)}))},100)))},repaintScrollbar:function(e){var r,o=this,l="",a=o.options.maxScrollHeight,n=o.dataSource,i=Qe.support.kineticScrollNeeded?0:Qe.support.scrollbar(),s=o.wrapper[0],d=o._isScrolledToBottom(),c=o.itemHeight=o.options.itemHeight()||0,u=s.scrollWidth>s.offsetWidth?i:0,p=(n._isGroupPaged()?n.groupsTotal(!0):n.total())*c+u;for(r=0;r<mt.floor(p/a);r++)l+='<div style="width:1px;height:'+a+'px"></div>';p%a&&(l+='<div style="width:1px;height:'+p%a+'px"></div>'),o.verticalScrollbar.html(l),!d||o._isScrolledToBottom()||o.dataSource._isGroupPaged()||o.scrollToBottom(),t!==o._scrollTop&&e&&(s.scrollTop=o._scrollTop,o._scrollWrapperOnColumnResize())},refresh:function(e){var r=this,o=r.dataSource,l=r._rangeStart,a=(e||{}).action,n=r._isScrolledToBottom()||!a||a!==Qt&&a!==Ft&&a!==Zt;r.trigger(tr),clearTimeout(r._timeout),r.repaintScrollbar(n),r.drag&&r.drag.cancel(),t===l||r._fetching||((!a||a!==Zt&&a!==Qt&&"expandGroup"!==a)&&(r._rangeStart=o.skip()),1!==o.page()||a&&(a===Zt||a===Qt||"expandGroup"===a||"collapseGroup"===a)||(r.verticalScrollbar[0].scrollTop=0)),r._fetching=!1}}),je={create:{text:"Add new record",className:"k-grid-add",iconClass:"k-icon k-i-plus"},cancel:{text:"Cancel changes",className:"k-grid-cancel-changes",iconClass:"k-icon k-i-cancel"},save:{text:"Save changes",className:"k-grid-save-changes",iconClass:"k-icon k-i-check"},destroy:{text:"Delete",className:"k-grid-delete",iconClass:"k-icon k-i-close"},edit:{text:"Edit",className:"k-grid-edit",iconClass:"k-icon k-i-edit"},update:{text:"Update",className:"k-primary k-grid-update",iconClass:"k-icon k-i-check"},canceledit:{text:"Cancel",className:"k-grid-cancel",iconClass:"k-icon k-i-cancel"},excel:{text:"Export to Excel",className:"k-grid-excel",iconClass:"k-icon k-i-file-excel"},pdf:{text:"Export to PDF",className:"k-grid-pdf",iconClass:"k-icon k-i-file-pdf"},search:{text:"Search...",className:"k-grid-search"}},$e=Qe.ui.DataBoundWidget.extend({init:function(t,r,o){var l=this;r=dt(r)?{dataSource:r}:r,tt.fn.init.call(l,t,r),o&&(l._events=o),uo=Qe.support.isRtl(t),l._element(),l._aria(),l._columns(e.extend(!0,[],l.options.columns)),l._foreignKeyPromises?e.when.apply(null,l._foreignKeyPromises).then(function(){l._foreignKeyPromises=null,l._continueInit()}):l._continueInit()},_continueInit:function(){var t=this;t._dataSource(),t._stickyColumns(),t._tbody(),t._thead(),t._groupable(),t._toolbar(),t._pageable(),t._setContentHeight(),t._templates(),t._navigatable(),t._selectable(),t._clipboard(),t._details(),t._editable(),t._attachCustomCommandsEvent(),t._adaptiveColumns(),t._minScreenSupport(),t.options.autoBind?t.dataSource.fetch():(t._group=t._groups()>0,t._footer()),t.lockedContent&&(t.wrapper.addClass("k-grid-lockedcolumns"),t._resizeHandler=function(){t.resize()},e(window).on("resize"+It,t._resizeHandler)),Qe.notify(t)},events:[Ot,"dataBinding","cancel",Kt,jt,$t,Mt,Pt,Wt,qt,Vt,Dt,At,Lt,Ft,Ut,Bt,br,vr,Nt,Gt,wr,Cr,yr,Sr,Tr,xr,"page","sort","filter","group","groupExpand","groupCollapse","kendoKeydown"],setDataSource:function(e){var t,r=this,o=r.options.scrollable;r.options.dataSource=e,r._dataSource(),r._pageable(),r._thead(),o&&(o.virtual?(t=r.content.find(">.k-virtual-scrollable-wrap"),Qe.scrollLeft(t,De(t,uo))):(t=r.tbody,Qe.scrollLeft(r.content,De(t,uo)))),r.options.groupable&&r._groupable(),r.virtualScrollable&&r.virtualScrollable.setDataSource(r.options.dataSource),r.options.navigatable&&r._navigatable(),r.options.selectable&&r._selectable(),r.options.autoBind?r.dataSource.fetch():r._footer()},options:{name:"Grid",columns:[],toolbar:null,autoBind:!0,filterable:!1,scrollable:!0,sortable:!1,selectable:!1,allowCopy:!1,navigatable:!1,pageable:!1,persistSelection:!1,editable:!1,encodeTitles:!1,groupable:!1,rowTemplate:"",altRowTemplate:"",search:!1,noRecords:!1,dataSource:{},height:null,resizable:!1,reorderable:!1,columnMenu:!1,detailTemplate:null,columnResizeHandleWidth:3,mobile:"",loaderType:"loadingPanel",messages:{editable:{cancelDelete:Qr,confirmation:Kr,confirmDelete:$r},commands:{create:je.create.text,cancel:je.cancel.text,save:je.save.text,destroy:je.destroy.text,edit:je.edit.text,update:je.update.text,canceledit:je.canceledit.text,excel:je.excel.text,pdf:je.pdf.text,search:je.search.text},noRecords:jr,expandCollapseColumnHeader:"",groupHeader:"Press ctrl + space to group",ungroupHeader:"Press ctrl + space to ungroup",
itemsSelected:"items selected",dragHandleLabel:"Drag row"},width:null},destroy:function(){var t,r=this;r._angularItems("cleanup"),r._destroyColumnAttachments(),tt.fn.destroy.call(r),this._navigatableTables&&(this._navigatableTables.off(It),this._navigatableTables=null,this._headertables=null),r._resizeHandler&&e(window).off("resize"+It,r._resizeHandler),r.pager&&r.pager.element&&r.pager.destroy(),r.timer&&clearTimeout(r.timer),r._progressTimeOut&&clearTimeout(r._progressTimeOut),r._collapseGroupsTimeOut&&clearTimeout(r._collapseGroupsTimeOut),r._endlessFetchTimeOut&&clearTimeout(r._endlessFetchTimeOut),r.pager=null,r._destroyGroupable(),(r.options.reorderable===!0||r.options.reorderable&&r.options.reorderable.columns)&&r.wrapper.data("kendoReorderable").destroy(),r._hasReorderableRows()&&r.tbody.data("kendoReorderable").destroy(),r.selectable&&r.selectable.element&&(r.selectable.destroy(),r.clearArea(),r._selectedIds=null,r.copyHandler&&(r.wrapper.off("keydown",r.copyHandler),r.unbind(r.copyHandler)),r.updateClipBoardState&&(r.unbind(r.updateClipBoardState),r.updateClipBoardState=null),r.clearAreaHandler&&r.wrapper.off("keyup",r.clearAreaHandler)),r.selectable=null,r.resizable&&(r.resizable.destroy(),r._resizeUserEvents&&(r._resizeHandleDocumentClickHandler&&e(document).off("click",r._resizeHandleDocumentClickHandler),r._resizeUserEvents.destroy(),r._resizeUserEvents=null),r.resizable=null),r._destroyVirtualScrollable(),r.editableUserEvents&&(r.editableUserEvents.destroy(),r.editableUserEvents=null),r._lockedContentUserEvents&&(r._lockedContentUserEvents.destroy(),r._lockedContentUserEvents=null),r._destroyEditable(),r.dataSource&&(r.dataSource.unbind(Ot,r._refreshHandler).unbind(kt,r._progressHandler).unbind(bt,r._errorHandler).unbind(Nr,r._clearSortClasses),r._refreshHandler=r._progressHandler=r._errorHandler=r._clearSortClasses=null),t=r.element.add(r.wrapper).add(r.table).add(r.thead).add(r.wrapper.find(">.k-grid-toolbar")),r.content&&(t=t.add(r.content).add(r.content.find(">.k-virtual-scrollable-wrap"))),r.lockedHeader&&r._removeLockedContainers(),r.pane&&r.pane.destroy(),r._isMobile&&(r.wrapper.off("transitionend"+It),r.wrapper.off("contextmenu"+It)),r.minScreenResizeHandler&&e(window).off("resize",r.minScreenResizeHandler),r._detachColumnMediaResizeHandler(),r._draggableInstance&&r._draggableInstance.element&&r._draggableInstance.destroy(),r._draggableInstance=null,r._draggableRowsInstance&&r._draggableRowsInstance.element&&r._draggableRowsInstance.destroy(),r._draggableRowsInstance=null,t.off(It),Qe.destroy(r.wrapper),r.rowTemplate=r.altRowTemplate=r.lockedRowTemplate=r.lockedAltRowTemplate=r.detailTemplate=r.footerTemplate=r.groupFooterTemplate=r.lockedGroupFooterTemplate=r.noRecordsTemplate=null,r.scrollables=r.thead=r.tbody=r.element=r.table=r.content=r.footer=r.wrapper=r.lockedTable=r.lockedContent=r.lockedHeader=r.lockedFooter=r._groupableClickHandler=r._groupRows=r._setContentWidthHandler=null},getOptions:function(){var r,o,l,a=this.options;return a.dataSource=null,r=nt(!0,{},this.options),r.columns=Qe.deepExtend([],this.columns),o=this.dataSource,l=o.options.data&&o._data,o.options.data=null,r.dataSource=e.extend(!0,{},o.options),o.options.data=l,r.dataSource.data=l,r.dataSource.page=o.page(),r.dataSource.filter=e.extend(!0,{},o.filter()),r.dataSource.pageSize=o.pageSize(),r.dataSource.sort=o.sort(),r.dataSource.group=o.group(),r.dataSource.aggregate=o.aggregate(),r.dataSource.transport&&(r.dataSource.transport.dataSource=null),r.pageable&&r.pageable.pageSize&&(r.pageable.pageSize=o.pageSize()),r.$angular=t,r},setOptions:function(e){var t,r,o,l,a=this.getOptions();Qe.deepExtend(a,e),e.dataSource?e.dataSource.filter&&(a.dataSource.filter=e.dataSource.filter):a.dataSource=this.dataSource,t=this.wrapper,r=this._events,o=this.element,this.destroy(),this.options=null,this._isMobile&&(l=t.closest(Qe.roleSelector("pane")).parent(),l.after(t),l.remove(),t.removeClass("k-grid-mobile")),t[0]!==o[0]&&(t.before(o),t.remove()),o.empty(),this.init(o,a,r),this._setEvents(a)},items:function(){return this.lockedContent?this._items(this.tbody).add(this._items(this.lockedTable.children("tbody"))):this._items(this.tbody)},_items:function(t,r){return t.children().filter(function(){var t=e(this);return!(t.hasClass(r?"k-detail-row":"k-grouping-row")||t.hasClass("k-detail-row")||t.hasClass("k-group-footer"))})},dataItems:function(){var e,t,r,o=Qe.ui.DataBoundWidget.fn.dataItems.call(this);if(this.lockedContent){for(e=o.length,t=Array(2*e),r=e;--r>=0;)t[r]=t[r+e]=o[r];o=t}return o},_destroyColumnAttachments:function(){var t=this;t.resizeHandle=null,t.thead&&(this.angular("cleanup",function(){return{elements:t.thead.get()}}),t.thead.add(t.lockedHeader).find("th").each(function(){var t=e(this),r=t.data("kendoFilterMenu"),o=t.data("kendoColumnSorter"),l=t.data("kendoColumnMenu");r&&r.destroy(),o&&o.destroy(),l&&l.destroy()}))},_attachCustomCommandsEvent:function(){var e,t,r,o=this,l=oe(o.columns||[]);for(t=0,r=l.length;t<r;t++)e=l[t].command,e&&s(o,o.wrapper,e)},_aria:function(){var e=this.element.attr("id")||"aria";e&&(this._cellId=e+"_active_cell")},_element:function(){var t=this,r=t.element;r.is("table")||(r=t.options.scrollable?t.element.find("> .k-grid-content > table"):t.element.children("table"),r.length||(r=e("<table />").appendTo(t.element))),t.table=r.attr("role",t._hasDetails()?"treegrid":"grid"),t._wrapper()},_createResizeHandle:function(t,r){var o,l,a,n,i,s,d,c,u,p,h=this,f=h.options.columnResizeHandleWidth,g=h.options.scrollable,m=h.resizeHandle,_=3*f/2,k=0;m&&h.lockedContent&&m.data("th")[0]!==r[0]&&(m.off(It).remove(),m=null),m||(m=h.resizeHandle=e('<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>'),t.append(m)),c=Qe.scrollLeft(t),uo&&(po.mozilla||po.webkit&&po.version>=85)&&(c*=-1),d=parseFloat(t.css("borderLeftWidth")),u=r.offset().left+c-parseFloat(r.css("marginLeft"))-(t.offset().left+d),uo?g&&(k=u<=c?_:0,o=r.closest(".k-grid-header-wrap, .k-grid-header-locked"),s=o[0].scrollWidth-o[0].offsetWidth,i=parseFloat(o.css("marginLeft")),l=po.msie?2*Qe.scrollLeft(o)+d-i-k:0,a=-k,n=po.mozilla?d-i-k:0,u-=a+n+l):u+=r[0].offsetWidth,p=r.offset().top-parseFloat(r.css("marginTop"))-(t.offset().top+parseFloat(t.css("borderTopWidth"))),m.css({top:p,left:u-_,height:ot(r),width:3*f-k}).data("th",r).show(),m.off("dblclick"+It).on("dblclick"+It,function(){h._autoFitLeafColumn(parseInt(r.attr(Qe.attr("index")),10))})},_positionColumnResizeHandle:function(){var r=this,o=r.lockedHeader?r.lockedHeader.find("thead").first():e();r.thead.add(o).on("mousemove"+It,"tr:not(.k-filter-row) > th",function(o){var l=t!==o.buttons?o.buttons:o.which||o.button,a=e(this);a.hasClass("k-group-cell")||a.hasClass("k-hierarchy-cell")||t!==l&&0!==l||a[0].hasAttribute(Qe.attr(Br))||r._createResizeHandle(a.closest("div"),a)})},_resizeHandleDocumentClick:function(t){e(t.target).closest(".k-column-active").length||(e(document).off(t),this._resetResizeHandleHeader(),this._hideResizeHandle())},_resetResizeHandleHeader:function(){var t;this.resizeHandle&&(t=e(this.resizeHandle).data("th"),t&&(t.find(_t+sr).find(_t+dr).show(),t.find(_t+cr).show(),t.find(_t+pr).show(),t.find(_t+hr).show()))},_hideResizeHandle:function(){this.resizeHandle&&(this.resizeHandle.data("th").removeClass("k-column-active"),this.lockedContent&&!this._isMobile?(this.resizeHandle.off(It).remove(),this.resizeHandle=null):this.resizeHandle.hide())},_positionColumnResizeHandleTouch:function(){var t=this,r=t.lockedHeader?t.lockedHeader.find("thead").first():e();t._resizeUserEvents=new Qe.UserEvents(r.add(t.thead),{filter:"th:not(.k-group-cell):not(.k-hierarchy-cell)",threshold:10,minHold:500,hold:function(r){var o=e(r.target);r.preventDefault(),t.resizeHandle&&(t.resizeHandle.data("th").removeClass("k-column-active"),t._resetResizeHandleHeader()),o.addClass("k-column-active"),o.find(_t+sr).find(_t+dr).hide(),o.find(_t+cr).hide(),o.find(_t+pr).hide(),o.find(_t+hr).hide(),t._createResizeHandle(o.closest("div"),o),t._resizeHandleDocumentClickHandler||(t._resizeHandleDocumentClickHandler=pt(t._resizeHandleDocumentClick,t)),e(document).on("click",t._resizeHandleDocumentClickHandler)}})},resizeColumn:function(r,o){var l,a,n,i,s=this,d=!!r.locked,c=!!r.hidden,u=this.options,p=Qe.support.mobileOS?0:Qe.support.scrollbar(),h=d?ct(r,Z(ee(s.columns))):ct(r,X(ee(s.columns))),f=d?s.lockedTable:s.table,g=s.footer||e(),m=d?s.lockedHeader.find("table"):s.thead.closest("table"),_=r.minResizableWidth||10,k=rt(d?f.find("tbody"):s.tbody);return c?(r.width=o>_?o:_,t):(s.footer&&s.lockedContent&&(g=s.footer.children(d?".k-grid-footer-locked":".k-grid-footer-wrap")),l=u.scrollable?m.find("col:not(.k-group-col,.k-hierarchy-col)").eq(h).add(f.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(h)).add(g.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(h)):f.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(h),u.scrollable?(a=!1,n=s.wrapper.width()-p,i=o=o>_?o:_,d&&k-o+i>n&&(i=o+(n-k-2*p),i<0&&(i=o),a=!0),i>10&&i>=_&&(l.css("width",i),k&&(i=a?n-2*p:k+(o-r.width),f.add(m).add(g).css("width",i),d||(s._footerWidth=i))),s._scrollVirtualWrapperOnColumnResize()):o>10&&o>=_&&l.css("width",o),r.width=o,s._applyLockedContainersWidth(),s._syncLockedContentHeight(),s._syncLockedHeaderHeight(),s._updateStickyColumns(),t)},_resizable:function(){var t,r,o,l,n,i,s,d,c=this,u=c.options,p=this._isMobile,h=Qe.support.mobileOS?0:Qe.support.scrollbar();u.resizable&&(t=u.scrollable?c.wrapper.find(".k-grid-header-wrap").first():c.wrapper,p?c._positionColumnResizeHandleTouch(t):c._positionColumnResizeHandle(t),c.resizable&&c.resizable.destroy(),c.resizable=new Je.Resizable(t.add(c.lockedHeader),{handle:(u.scrollable?"":">")+".k-resize-handle",hint:function(t){return e('<div class="k-grid-resize-indicator" />').css({height:ot(t.data("th"))+c.tbody.attr("clientHeight")})},start:function(t){var h,f,g,m,_;d=e(t.currentTarget).data("th"),p&&c._hideResizeHandle(),h=d.closest("table"),f=e.inArray(d[0],ae(d.closest("thead")).filter(":visible")),i=h.parent().hasClass("k-grid-header-locked"),g=i?c.lockedTable:c.table,m=c.footer||e(),c.footer&&c.lockedContent&&(m=c.footer.children(i?".k-grid-footer-locked":".k-grid-footer-wrap")),a(c.wrapper,"col-resize"),s=u.scrollable?h.find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(f).add(g.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(f)).add(m.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(f)):g.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col)").eq(f),_=e.map(c.columns,function(e){return!e.hidden&&(i&&e.locked||!i&&!e.locked)?e:null}),r=t.x.location,o=rt(d),l=oe(_)[f].minResizableWidth||10,n=rt(i?g.children("tbody"):c.tbody),po.webkit&&c.wrapper.addClass("k-grid-column-resizing")},resize:function(t){var a,p,f,g,m,_,k=uo?-1:1,b=o+t.x.location*k-r*k;u.scrollable?(i&&c.lockedFooter?a=c.lockedFooter.children("table"):c.footer&&(a=c.footer.find(">.k-grid-footer-wrap>table")),a&&a[0]||(a=e()),p=d.closest("table"),f=i?c.lockedTable:c.table,g=!1,m=c.wrapper.width()-h,_=b,i&&n-o+_>m&&(_=o+(m-n-2*h),_<0&&(_=b),g=!0),_>10&&_>=l&&(s.css("width",_),n&&(_=g?m-2*h:n+t.x.location*k-r*k,f.add(p).add(a).css("width",_),i||(c._footerWidth=_))),c._scrollVirtualWrapperOnColumnResize()):b>10&&b>=l&&s.css("width",b)},resizeend:function(){var e,t,r,l=rt(d);a(c.wrapper,""),po.webkit&&c.wrapper.removeClass("k-grid-column-resizing"),o!=l&&(t=c.lockedHeader?c.lockedHeader.find("thead").first().find("tr").first().add(c.thead.find("tr").first()):d.parent(),r=d.attr(Qe.attr("index")),r||(r=t.find("th:not(.k-group-cell):not(.k-hierarchy-cell)").index(d)),e=oe(c.columns)[r],e.width=l,c.trigger(br,{column:e,oldWidth:o,newWidth:l}),c._applyLockedContainersWidth(),c._syncLockedContentHeight(),c._syncLockedHeaderHeight(),c._updateStickyColumns()),c._resetResizeHandleHeader(),c._hideResizeHandle(),d=null}}))},_draggable:function(){var t,r=this,o=r.options.reorderable;(o===!0||o&&o.columns)&&(r._draggableInstance&&r._draggableInstance.destroy(),t=r.wrapper.children(".k-grid-header"),r._draggableInstance=r.wrapper.kendoDraggable({group:Qe.guid(),autoScroll:!0,filter:r.content?".k-grid-header:first "+Ht:"table:first>.k-grid-header "+Ht,dragstart:function(){t.children(".k-grid-header-wrap").off("scroll"+It+"scrolling").on("scroll"+It+"scrolling",function(e){r.virtualScrollable?Qe.scrollLeft(r.content.find(">.k-virtual-scrollable-wrap"),this.scrollLeft):Qe.scrollLeft(r.scrollables.not(e.currentTarget),this.scrollLeft)})},dragend:function(){r._resetResizeHandleHeader(),t.children(".k-grid-header-wrap").off("scroll"+It+"scrolling")},drag:function(){r._hideResizeHandle()},hint:function(t){var r=t.attr(Qe.attr("title"));return r&&(r=Qe.htmlEncode(r)),e('<div class="k-reorder-clue k-drag-clue" />').html(r||t.attr(Qe.attr("field"))||t.text()).prepend('<span class="k-icon k-drag-status k-i-cancel"></span>')}}).data("kendoDraggable"))},_reorderable:function(){var t=this,r=t.options.reorderable;(r===!0||r&&r.columns)&&(t.wrapper.data("kendoReorderable")&&t.wrapper.data("kendoReorderable").destroy(),t.wrapper.kendoReorderable({draggable:t._draggableInstance,dropFilter:Ht,dragOverContainers:function(e,r){var o=L(t.columns);return o[e].lockable!==!1&&F(o,t.columns,e,r)>-1},inSameContainer:function(r){return e(r.source).parent()[0]===e(r.target).parent()[0]&&F(L(t.columns),t.columns,r.sourceIndex,r.targetIndex)>-1},change:function(e){var r=L(t.columns),o=r[e.oldIndex],l=F(r,t.columns,e.oldIndex,e.newIndex);t.trigger(vr,{newIndex:l,oldIndex:ct(o,r),column:o}),t.reorderColumn(l,o,"before"===e.position)}}))},_reorderHeader:function(e,t,r,o){var l,a,s,d,c,u=this,p=E(e[0],u.columns),h=E(t,u.columns),f=[];for(s=0;s<e.length;s++)e[s].columns&&(f=f.concat(e[s].columns));a=o?i(o,o,"tr:eq("+p.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)"):i(u.lockedHeader,u.thead,"tr:eq("+p.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)"),d=$(e).length,c=$([t]).length,f.length?(d>0&&0===c?(l="prepend",x(e,t,f,u.columns,u.lockedHeader.find("thead"),u.thead,this._groups(),l)):0===d&&c>0&&(l=0!==h.cell||!e[0].columns||t.columns||u._group?"append":"prepend",x(e,t,f,Q(u.columns),u.thead,u.lockedHeader.find("thead"),this._groups(),l)),(t.columns||p.cell-h.cell>1||h.cell-p.cell>1)&&(t=D(u.columns,t,e[0],r,u.columns),t&&(d>0&&0===c?u._reorderHeader(f,t,r,u.thead):0===d&&c>0?u._reorderHeader(f,t,r,u.lockedHead):u._reorderHeader(f,t,r)))):d!==c&&S(a[p.cell],u.columns,d),n(a,p.cell,h.cell,r,e.length)},_reorderContent:function(t,r,o){var l,a,s,d,c,u,p=this,h=e(),f=t[0],g=v(t),m=ct(f,oe(p.columns)),_=ct(r,oe(p.columns)),k=ct(g[0],ee(p.columns)),b=ct(r,ee(p.columns)),w=$(p.columns).length,C=!!r.locked,y=p.footer||p.wrapper.find(".k-grid-footer"),S=l=b;for(r.hidden&&(s=C?$(p.columns):Q(p.columns),v(s).length>0?(S=l=b=this._findClosestVisibleColumnIndex(s,_),a=v(s.slice(_)).length>0):C?(b=p.lockedTable.find("colgroup"),S=p.lockedHeader.find("colgroup"),l=e(p.lockedFooter).find(">table>colgroup")):(b=p.tbody.prev(),S=p.thead.prev(),l=y.find(".k-grid-footer-wrap").find(">table>colgroup"))),p._hasFilterRow()&&n(p.wrapper.find(".k-filter-row th:not(.k-group-cell,.k-hierarchy-cell)"),m,_,o,t.length),k>=0&&n(i(p.lockedHeader,p.thead.prev(),xt),k,S,a?a:o,g.length),p.options.scrollable&&k>=0&&!p._hasVirtualColumns()&&n(i(p.lockedTable,p.tbody.prev(),xt),k,b,a?a:o,g.length),y&&y.length&&(k>=0&&n(i(p.lockedFooter,y.find(".k-grid-footer-wrap"),">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"),k,l,a?a:o,g.length),n(y.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"),m,_,o,t.length)),d=p.tbody.children(":not(.k-grouping-row,.k-detail-row)"),p.lockedTable&&(w>_?w<=m&&we(p.lockedTable.find(">tbody>tr.k-grouping-row"),p.table.find(">tbody>tr.k-grouping-row"),t.length):w>m&&we(p.table.find(">tbody>tr.k-grouping-row"),p.lockedTable.find(">tbody>tr.k-grouping-row"),t.length),h=p.lockedTable.find(">tbody>tr:not(.k-grouping-row,.k-detail-row)")),c=0,u=d.length;c<u;c+=1)n(i(h[c],d[c],">td:not(.k-group-cell,.k-hierarchy-cell)"),m,_,o,t.length)},_findClosestVisibleColumnIndex:function(e,t){var r=v(e.slice(t)).length>0?e.slice(t):e.slice(0,t+1).reverse(),o=v(r)[0];return ct(o,v(this.columns))},_autoFitLeafColumn:function(e){this.autoFitColumn(oe(this.columns)[e])},_hasReorderableRows:function(){return this._hasDragHandleColumn||this.options.reorderable&&this.options.reorderable.rows},_draggableRows:function(){var t=this,r=t._checkBoxSelection||t.options.selectable&&!Qe.ui.Selectable.parseOptions(t.options.selectable).cell;t._draggableRowsInstance&&t._draggableRowsInstance.destroy(),t._draggableRowsInstance=t.tbody.kendoDraggable({group:"row-draggable",autoScroll:!0,filter:(r?" > .k-state-selected":" > "+Tt)+(t._hasDragHandleColumn?" > .k-drag-cell":""),hint:function(o){var l,a=e('<div class="k-reorder-clue k-drag-clue"><span class="k-icon k-drag-status k-i-cancel"></span></div>');return r&&t.select().length>1?a.append("<span>"+t.select().length+" "+t.options.messages.itemsSelected+"</span>"):(l=o.closest(Tt).clone(),l.find("td.k-command-cell").remove(),l.find("td").each(function(e,t){a.append("<span>"+t.innerText+"&nbsp;</span>")})),a}}).data("kendoDraggable")},_reorderableRows:function(){var t=this,r=t._checkBoxSelection||t.options.selectable&&!Qe.ui.Selectable.parseOptions(t.options.selectable).cell;t.tbody.data("kendoReorderable")&&t.tbody.data("kendoReorderable").destroy(),t.tbody.kendoReorderable({smartPosition:!1,draggable:t._draggableRowsInstance,dragOverContainers:function(o,l){var a=!0,n=e(Tt,t.content).eq(l);return r&&(a=!n.is(".k-state-selected")),a},inSameContainer:function(t){return!r||!e(t.target).is(".k-state-selected")},dropFilter:Tt,allowIcon:"k-i-insert-middle",orientation:"vertical",reorderDropCue:e('<div class="k-drop-hint k-drop-hint-h"><div class="k-drop-hint-start"></div><div class="k-drop-hint-line"></div></div>'),positionDropCue:function(e,t){var r=Qe.getOffset(t.children(wt).eq(0)).left;e.css({transform:"translate(0,-50%)",left:r})},externalDraggable:function(e){var t=e.draggable;if(t)return t},change:function(e){t._triggerRowRorder(e)}})},_triggerRowRorder:function(e){var t=this,r={newIndex:"after"===e.position?e.newIndex+1:e.newIndex,oldIndex:e.oldIndex},o=e.element,l=t._checkBoxSelection||t.options.selectable&&!Qe.ui.Selectable.parseOptions(t.options.selectable).cell;r=l&&t.select().length>1?nt(r,{rows:t.select()}):nt(r,{row:o}),t.trigger(Tr,r)||t.reorderRows(l?t.select():o,r.newIndex)},reorderRows:function(e,t){var r=this,o=r.dataSource,l=r.tbody.children(Tt).length,a=r.dataItem(r.tbody.children(Tt).eq(t)),n=e.toArray().map(function(e){return r.dataItem(e)});a?t=o.indexOf(a):(a=r.dataItem(r.tbody.children(Tt).eq(l-1)),t=o.indexOf(a)+1),t>=0&&(r._rowDropping=!0,o.pushMove(t,n),r._rowDropping=!1)},autoFitColumns:function(e){var t,r,o=this;for(e=e||o.columns,t=0;t<e.length;t++)r=e[t],r.columns?o.autoFitColumns(r.columns):o.autoFitColumn(r)},autoFitColumn:function(t){var r,o,l,a,n,i,s,d,c,u,p,h,f,g,m,k,v,w,C,y,S,T,x=this,H=x.options,R=x.columns,I=x.lockedHeader?ae(x.lockedHeader.find(">table>thead")).filter(_).length:0,E="col:not(.k-group-col):not(.k-hierarchy-col)",z="td:visible:not(.k-group-cell):not(.k-hierarchy-cell)";if(t="number"==typeof t?R[t]:at(t)?st(M(R),function(e){return e===t})[0]:st(M(R),function(e){return e.field===t})[0],t&&b(t)){for(i=t.minResizableWidth,r=ct(t,oe(R)),a=t.locked,l=a?x.lockedHeader.children("table"):x.thead.parent(),o=l.find("[data-index='"+r+"']"),c=o.find("a.k-header-column-menu, a.k-grid-filter"),p=a?x.lockedTable:x.table,h=x.footer||e(),x.footer&&x.lockedContent&&(h=x.footer.children(a?".k-grid-footer-locked":".k-grid-footer-wrap")),f=h.find("table").first(),x.lockedHeader&&!a&&(r-=I),g=0;g<R.length&&R[g]!==t;g++)R[g].hidden&&r--;if(H.scrollable?(n=l.find(E).eq(r).add(p.children("colgroup").find(E).eq(r)).add(f.find("colgroup").find(E).eq(r)),a||(s=p.parent(),d=Qe.scrollLeft(s))):n=p.children("colgroup").find(E).eq(r),m=l.add(p).add(f),po.safari&&o.css("white-space","initial"),k=rt(o),n.width(""),m.css("table-layout","fixed"),n.width("auto"),m.addClass("k-autofitting"),m.css("table-layout",""),u=c.length?rt(c)+rt(o):rt(o),v=Math.ceil(Math.max(u,rt(p.find("tr:not(.k-grouping-row)").eq(0).children(z).eq(r)),rt(f.find("tr").eq(0).children(z).eq(r))))+1,i&&i>v&&(v=i),n.width(v),t.width=v,po.safari&&o.css("white-space",""),H.scrollable){for(w=l.find("col"),y=0,S=0,T=w.length;S<T;S+=1)if(C=w[S].style.width,C&&C.indexOf("%")==-1)y+=parseInt(C,10);else{if(!w.eq(S).hasClass("k-group-col")){y=0;break}y+=parseInt(w.eq(S).width(),10)}y&&m.each(function(){this.style.width=y+"px"})}m.removeClass("k-autofitting"),d&&Qe.scrollLeft(s,d),x.trigger(br,{column:t,oldWidth:k,newWidth:v}),x._applyLockedContainersWidth(),x._syncLockedContentHeight(),x._syncLockedHeaderHeight(),x._updateStickyColumns()}},reorderColumn:function(e,r,o){var l,a,n=this,i=c(r,n.columns),s=i?i.columns:n.columns,d=ct(r,s),u=s[e],p=n.virtualScroll||{},h=!!u.locked,f=$(n.columns).length,g=st(oe(n.columns),function(e){return e.groupHeaderColumnTemplate});d!==e&&(!r.locked&&h&&1==Q(n.columns).length||r.locked&&!h&&1==f||(n._hideResizeHandle(),o===t&&(o=e<d),a=[r],n._reorderHeader(a,u,o),n.lockedHeader&&(O(n.thead),O(n.lockedHeader)),u.columns&&(u=oe(u.columns),u=u[o?0:u.length-1]),r.columns&&(a=oe(r.columns)),n._reorderContent(a,u,o),l=!!r.locked,l=l!=h,r.locked=h,s.splice(o?e:e+1,0,r),s.splice(d<e?d:d+1,1),n._updateLockedCols(),n._updateCols(),n._templates(),n._updateColumnCellIndex(),n._updateColumnSorters(),g.length>0&&n._renderGroupRows(),n._updateTablesWidth(),n._applyLockedContainersWidth(),n._syncLockedHeaderHeight(),n._syncLockedContentHeight(),n._updateFirstColumnClass(),n._updateStickyColumns(),p.columns&&n.refresh(),l&&(h?n.trigger(wr,{column:r}):n.trigger(Cr,{column:r}))))},_updateColumnCellIndex:function(){var e,t=0;this.lockedHeader&&(e=this.lockedHeader.find("thead"),t=H(e,$(this.columns))),H(this.thead,Q(this.columns),t)},lockColumn:function(e){var t,r=this.columns;e="number"==typeof e?r[e]:st(r,function(t){return t.field===e})[0],!e||e.locked||e.hidden||(e.sticky&&this.unstickColumn(r.indexOf(e)),t=$(r).length-1,this.reorderColumn(t,e,!1))},unlockColumn:function(e){var t,r=this.columns;e="number"==typeof e?r[e]:st(r,function(t){return t.field===e})[0],e&&e.locked&&!e.hidden&&(t=$(r).length,this.reorderColumn(t,e,!0))},stickColumn:function(e){var t=this.columns;e="number"==typeof e?t[e]:st(t,function(t){return t.field===e})[0],!e||e.sticky||e.hidden||e.locked&&(this.unlockColumn(t.indexOf(e)),e.locked)||(e.sticky=!0,this._updateStickyColumns())},unstickColumn:function(e){var t=this.columns;e="number"==typeof e?t[e]:st(t,function(t){return t.field===e})[0],e&&e.sticky&&!e.locked&&!e.hidden&&(this._removeStickyAttributes([e]),this._removeStickyStyles(J(t)),e.sticky=!1,this._updateStickyColumns(),0===this._anyStickyColumns()&&(this._templates(),this._hasFilterRow()&&this._updateStickyFilterCells()))},cellIndex:function(t){var r=0;return this.lockedTable&&!e.contains(this.lockedTable[0],t[0])&&(r=oe($(this.columns)).length),e(t).parent().children("td:not(.k-group-cell,.k-hierarchy-cell)").index(t)+r},_modelForContainer:function(t){t=e(t),t.is("tr")||"popup"===this._editMode()||(t=t.closest("tr"));var r=t.attr(Qe.attr("uid"));return this.dataSource.getByUid(r)},_calculateColumnIndex:function(t){var r=this.cellIndex(t),o=0;return this._hasVirtualColumns()&&(o=parseInt(e(t).closest("tr").find("td").first().attr("colspan"),10),o=o>1?o-1:0),r+o},_editable:function(){var t,r=this,o=r.options.editable,l=function(){var t=et(),o=r._editContainer;o&&o[0]&&!e.contains(o[0],t)&&o[0]!==t&&!e(t).closest(".k-animation-container").length&&(r.editable.end()?r.closeCell():r._scrollVirtualWrapper())};o&&(this.wrapper.addClass("k-editable"),t=r._editMode(),"incell"===t?(r.table.add(r.lockedTable).on("mousedown"+It,yt+">"+St,function(t){var o=e(t.target);"incell"===r._editMode()&&o.hasClass("k-checkbox")&&o.prev().attr(Qe.attr("bind"))&&t.preventDefault()}),o.update!==!1&&(fo&&r.wrapper.on(Hr+It,".k-edit-cell > input[type='checkbox']",function(t){e(t.target).trigger("focus")}).on(Hr+It,".k-edit-cell",function(t){e(t.target).is("input")||e(t.currentTarget).find("input[type='checkbox']").trigger("focus")}).on(Rr+It,"tr:not(.k-grouping-row) > td",function(t){var o=r._editContainer;r._mousedownOnEditCell=!(!o||!o[0]||!e.contains(o[0],t.target)&&o[0]!==t.target)}),r.editableUserEvents=new Qe.UserEvents(r.wrapper,{filter:"tr:not(.k-grouping-row) > td",allowSelection:!0,tap:function(t){var o=e(t.target),l=r.lockedTable&&o.closest("table")[0]===r.lockedTable[0];r._mousedownOnEditCell=!1,o.hasClass("k-hierarchy-cell")||o.hasClass("k-detail-cell")||o.hasClass("k-group-cell")||o.hasClass("k-edit-cell")||o.has("a.k-grid-delete").length||o.has("button.k-grid-delete").length||o.closest("tbody")[0]!==r.tbody[0]&&!l||e(t.target).is(":input")||(r.editable?r.editable.end()?(e(et()).trigger("blur"),r.closeCell(),r.editCell(o)):r._scrollVirtualWrapper():r.editCell(o))}}),r.wrapper.on("focusin"+It,function(){e.contains(this,et())||(clearTimeout(r.timer),r.timer=null)}).on("focusout"+It,function(e){var t=!0;(fo&&r._mousedownOnEditCell||r._virtualColScroll)&&(t=!1),r._mousedownOnEditCell=!1,t&&(r.timer=setTimeout(function(){l(e)},1))}))):o.update!==!1&&(r.wrapper.on(Hr+It,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible a.k-grid-edit",function(t){var o=e(this);r._belongsToGrid(o)&&(t.preventDefault(),r.editRow(o.closest("tr")))}),r._isVirtualInlineEditable()&&r.wrapper.on("focusout"+It,"tr:not(.k-grouping-row) > td",function(){r.editable&&!r.editable.end()&&r._scrollVirtualWrapper()})),o.destroy!==!1?r.wrapper.on(Hr+It,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete",function(t){var o=e(this);r._belongsToGrid(o)&&(t.preventDefault(),t.stopPropagation(),r.removeRow(o.closest("tr")))}):r.wrapper.on(Hr+It,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible button.k-grid-delete",function(t){r._belongsToGrid(e(this))&&(t.stopPropagation(),r._confirmation()||t.preventDefault())}))},editCell:function(t){var r,o,l,a;if(t=e(t),r=this,o=oe(r.columns)[r._calculateColumnIndex(t)],l=r._modelForContainer(t),r.closeCell(),l&&Ie(o,l)&&!o.command){if(r.trigger(At,{model:l}))return;r._attachModelChange(l),r._editContainer=t,r._shouldClearEditableState&&r._clearEditableState(),r.editable=t.addClass("k-edit-cell").kendoEditable({fields:{field:o.field,format:o.format,editor:o.editor,values:o.values},model:l,target:r,change:function(e){r.trigger(Lt,{values:e.values,container:t,model:l})&&e.preventDefault()},skipFocus:!(!r._isVirtualIncellEditable()&&!r._hasVirtualColumns()||!r._editableState)}).data("kendoEditable"),a=t.parent().addClass("k-grid-edit-row"),r.lockedContent&&(Se(a[0],r._relatedRow(a).addClass("k-grid-edit-row")[0]),r._syncLockedScroll()),r.trigger(Dt,{container:t,model:l})}},_adjustLockedHorizontalScrollBar:function(){var e=this.table,t=e.parent(),r=e[0].offsetWidth>t[0].clientWidth?Qe.support.scrollbar():0;this.lockedContent.height(t[0].offsetHeight-r)},_syncLockedScroll:function(){this.lockedContent[0].scrollTop=this.content[0].scrollTop,this.virtualScrollable&&(this.lockedContent[0].scrollTop=this.wrapper.find(".k-virtual-scrollable-wrap")[0].scrollTop)},_syncLockedContentHeight:function(){this.lockedTable&&(this.touchScroller||this._adjustLockedHorizontalScrollBar(),this._adjustRowsHeight(this.table,this.lockedTable))},_syncLockedHeaderHeight:function(){var e,t;this.lockedHeader&&(e=this.lockedHeader.children("table"),t=this.thead.parent(),this._adjustRowsHeight(e,t),ye(e,t))},_syncLockedFooterHeight:function(){this.lockedFooter&&this.footer&&this.footer.length&&this._adjustRowsHeight(this.lockedFooter.children("table"),this.footer.find(".k-grid-footer-wrap > table"))},_destroyEditable:function(){var e=this,t=function(){if(e.editable){var t=e.editView?e.editView.element:e._editContainer;t&&(t.off(Hr+It,"a.k-grid-cancel",e._editCancelClickHandler),t.off(Hr+It,"a.k-grid-update",e._editUpdateClickHandler)),e._detachModelChange(),e.editable.destroy(),e.editable=null,e._editContainer=null,e._destroyEditView(),e._editableIsClosing=null}};e.editable&&("popup"!==e._editMode()||e._isMobile?t():e._editableIsClosing?e._editContainer.data("kendoWindow").bind("deactivate",t):(e._editableIsClosing=!0,e._editContainer.data("kendoWindow").bind("deactivate",t).close())),e._confirmDialog&&(e._confirmDialog.close(),e._confirmDialog.destroy(),e._confirmDialog=null)},_destroyEditView:function(){this.editView&&(this.editView.purge(),this.editView=null,this.pane.navigate(""))},_attachModelChange:function(e){var t=this;t._modelChangeHandler=function(e){t._modelChange({field:e.field,model:this})},e.bind("change",t._modelChangeHandler)},_detachModelChange:function(){var e=this,t=e._editContainer,r=e._modelForContainer(t);r&&r.unbind(Ot,e._modelChangeHandler)},closeCell:function(e){var t,r,o,l=this,a=l._editContainer;a&&(o=l._modelForContainer(a),e&&l.trigger("cancel",{container:a,model:o})||(l.trigger(Bt,{type:e?"cancel":"save",model:o,container:a}),a.removeClass("k-edit-cell"),t=oe(l.columns)[l._calculateColumnIndex(a)],r=a.parent().removeClass("k-grid-edit-row"),l.lockedContent&&l._relatedRow(r).removeClass("k-grid-edit-row"),l._destroyEditable(),l._displayCell(a,t,o),l._shouldClearEditableState&&l._clearEditableState(),l.trigger("itemChange",{item:r,data:o,ns:Je}),l.lockedContent&&Se(r.css("height","")[0],l._relatedRow(r).css("height","")[0])))},_displayCell:function(e,t,r){var o=this,l={storage:{},count:0},a=nt({},Qe.Template,o.options.templateSettings),n=Qe.template(o._cellTmpl(t,l),a);l.count>0&&(n=pt(n,l.storage)),e.empty().html(n(r)),o.angular("compile",function(){return{elements:e,data:[{dataItem:r}]}})},removeRow:function(e){this._confirmation(e)&&this._removeRow(e)},_removeRow:function(t){var r,o,l,a,n=this,i=n._editMode();"incell"!==i&&n.cancelRow(),t=e(t),n.lockedContent&&(t=t.add(n._relatedRow(t))),t=t.hide(),n.dataSource._isGroupPaged()&&n._removeGroupIfEmpty(t),r=n._modelForContainer(t),r&&!n.trigger(Ft,{row:t,model:r})?(a=n.dataSource.options.schema,n._selectedIds&&a&&a.model&&(o=ht(n.dataSource.options.schema.model)?n.dataSource.options.schema.model.fn.idField:n.dataSource.options.schema.model.id,l=r[o],delete n._selectedIds[l]),n.dataSource.remove(r),"inline"!==i&&"popup"!==i||n.dataSource.sync()):"incell"===i&&n._destroyEditable()},_editMode:function(){var e="incell",t=this.options.editable;return t!==!0&&(e="string"==typeof t?t:t.mode||e),e},editRow:function(t){var r,o,l,a=this;t instanceof Xe?r=t:(t=e(t),r=a._modelForContainer(t)),o=a._editMode(),a.cancelRow(),r&&(t=a.tbody.children("["+Qe.attr("uid")+"="+r.uid+"]"),a._attachModelChange(r),"popup"===o?a._createPopupEditor(r):"inline"===o?a._createInlineEditor(t,r):"incell"===o&&e(t).children(wt).each(function(){var t=e(this),o=oe(a.columns)[a._calculateColumnIndex(t)];if(r=a._modelForContainer(t),r&&(!r.editable||r.editable(o.field))&&o.field&&!o.selectable)return a.editCell(t),!1}),l=a.editView?a.editView.element:a._editContainer,l&&(this._editCancelClickHandler||(this._editCancelClickHandler=pt(this._editCancelClick,this)),l.on(Hr+It,"a.k-grid-cancel",this._editCancelClickHandler),this._editUpdateClickHandler||(this._editUpdateClickHandler=pt(this._editUpdateClick,this)),l.on(Hr+It,"a.k-grid-update",this._editUpdateClickHandler)))},_editUpdateClick:function(e){e.preventDefault(),e.stopPropagation(),this.saveRow()},_editCancelClick:function(t){var r,o=this,l=o.options.navigatable,a=o.editable.options.model,n=o.editView?o.editView.element:o._editContainer;t.preventDefault(),t.stopPropagation(),o.trigger("cancel",{container:n,model:a})||(r=o.items().index(e(o.current()).parent()),o.cancelRow(),l&&(o._setCurrent(o.items().eq(r).children().filter(St).first()),xe(o.table,!0)))},_createPopupEditor:function(r){var o,l,a,n,i,s,d,c,u,p,h,f,g,m=this,_="<div "+Qe.attr("uid")+'="'+r.uid+'" class="k-popup-edit-form"><'+(m._isMobile?'ul class="k-edit-form-container k-listgroup k-listgroup-flush">':'div class="k-edit-form-container">'),k=[],b=oe(m.columns),v=Qe.guid(),w=m.options.editable,C=w.template,y=at(w)?w.window:{},S=nt({},Qe.Template,m.options.templateSettings);
if(!m.trigger(At,{model:r})){if(y=y||{},C)for(typeof C===Dr&&(C=Qe.unescape(C)),_+=Qe.template(C,S)(r),a=0,n=b.length;a<n;a++)o=b[a],o.command&&(p=Te(o.command,"edit"),p&&(l=p));else for(a=0,n=b.length;a<n;a++)o=b[a],o.selectable||(o.command?o.command&&(p=Te(o.command,"edit"),p&&(l=p)):m._isMobile?(_+='<li class="k-item k-listgroup-item">',Ie(o,r)?(k.push({field:o.field,title:o.title,format:o.format,editor:o.editor,values:o.values}),_+='<label class="k-label k-listgroup-form-row">',_+='<span class="k-item-title k-listgroup-form-field-label">'+(o.title&&(m.options.encodeTitles?Be(o.title,!0):o.title)||o.field||"")+"</span>",_+='<div class="k-listgroup-form-field-wrapper" id="'+o.field+"_"+v+'" '+Qe.attr("container-for")+'="'+o.field+'"></div>',_+="</label>"):(f={storage:{},count:0},i=Qe.template(m._cellTmpl(o,f),S),f.count>0&&(i=pt(i,f.storage)),_+='<label class="k-label k-listgroup-form-row k-no-click">',_+='<span class="k-item-title k-listgroup-form-field-label">'+(o.title&&(m.options.encodeTitles?Be(o.title,!0):o.title)||o.field||"")+"</span>",_+='<span class="k-no-editor k-listgroup-form-field-wrapper">'+i(r)+"</span>",_+="</label>"),_+="</li>"):(_+='<div class="k-edit-label"><label for="'+o.field+'">'+(o.title&&(m.options.encodeTitles?Be(o.title):o.title)||o.field||"")+"</label></div>",Ie(o,r)?(k.push({field:o.field,title:o.title,format:o.format,editor:o.editor,values:o.values}),_+="<div "+Qe.attr("container-for")+'="'+o.field+'" class="k-edit-field"></div>'):(f={storage:{},count:0},i=Qe.template(m._cellTmpl(o,f),S),f.count>0&&(i=pt(i,f.storage)),_+='<div class="k-edit-field k-no-editor">'+i(r)+"</div>")));l&&at(l)&&(at(l.text)&&(s=l.text.update,d=l.text.cancel),at(l.iconClass)&&(c=l.iconClass.update,u=l.iconClass.cancel),l.attr&&(h=l.attr)),m._isMobile?(_+="</ul></div>",m.editView=m.pane.append("<div data-"+Qe.ns+'role="view" class="k-grid-edit-form"><div data-'+Qe.ns+'role="header" class="k-header"><a href="\\#" class="k-header-cancel k-link k-grid-cancel" title="#=messages.cancel#" aria-label="#=messages.cancel#"><span class="k-icon k-i-arrow-chevron-left"></span></a>'+(m.options.messages.commands.edit||"Edit")+'<a href="\\#" class="k-header-done k-link k-grid-update" title="#=messages.done#" aria-label="#=messages.done#"><span class="k-icon k-i-check"></span></a></div><div data-'+Qe.ns+'role="content" class="'+go.content+'">'+_+"</div></div>"),g=m._editContainer=m.editView.element.find(".k-popup-edit-form")):(_+='<div class="k-edit-buttons k-state-default">',_+=m._createButton({name:"update",text:s,attr:h,iconClass:c})+m._createButton({name:"canceledit",text:d,attr:h,iconClass:u}),_+="</div></div></div>",g=m._editContainer=e(_).appendTo(m.wrapper).eq(0).kendoWindow(nt({modal:!0,resizable:!1,draggable:!0,title:m.options.messages.commands.edit||"Edit",visible:!1,close:function(o){if(o.userTriggered){if(o.sender.element.trigger("focus"),m.trigger("cancel",{container:g,model:r}))return o.preventDefault(),t;var l=m.items().index(e(m.current()).parent());m._editableIsClosing=!0,m.cancelRow(),m.options.navigatable&&(m._setCurrent(m.items().eq(l).children().filter(St).first()),xe(m.table,!0))}}},y))),m.editable=m._editContainer.kendoEditable({fields:k,model:r,clearContainer:!1,target:m}).data("kendoEditable"),m._openPopUpEditor(),m.trigger(Dt,{container:g,model:r})}},_openPopUpEditor:function(){var e=this,t=e._editContainer?e._editContainer.data("kendoWindow"):null,r=(e.options.editable||{}).window||{};this._isMobile?this.pane.navigate(this.editView,this._editAnimation):t&&(r.position||t.center(),t.open())},_createInlineEditor:function(t,r){var o,l,a,n=this,i=[];n.trigger(At,{model:r})||(n.lockedContent&&(t=t.add(n._relatedRow(t))),t.children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){if(l=e(this),o=oe(n.columns)[n._calculateColumnIndex(l)],!o.command&&Ie(o,r))i.push({field:o.field,title:o.title,format:o.format,editor:o.editor,values:o.values}),l.attr(Qe.attr("container-for"),o.field),l.empty();else if(o.command&&(a=Te(o.command,"edit"))){l.empty();var t,s,d,c,u;at(a)&&(at(a.text)&&(t=a.text.update,s=a.text.cancel),at(a.iconClass)&&(d=a.iconClass.update,c=a.iconClass.cancel),a.attr&&(u=a.attr)),e(n._createButton({name:"update",text:t,attr:u,iconClass:d})+n._createButton({name:"canceledit",text:s,attr:u,iconClass:c})).appendTo(l)}}),n._editContainer=t,n._editContainer.addClass("k-grid-edit-row"),n._shouldClearEditableState&&n._clearEditableState(),n.editable=new Qe.ui.Editable(n._editContainer,{target:n,fields:i,model:r,skipFocus:n._isVirtualInlineEditable()&&n._editableState&&!!n._editableState.field||n._hasVirtualColumns(),clearContainer:!1}),t.length>1&&(Se(t[0],t[1]),n._applyLockedContainersWidth()),n.trigger(Dt,{container:t,model:r}))},cancelRow:function(e){var t,r=this,o=r._editContainer;if(o){if(t=r._modelForContainer(o),!t||e&&r.trigger("cancel",{container:o,model:t}))return;r._destroyEditable(),r.dataSource.cancelChanges(t),r._clearEditableState(),r._displayRow("popup"!==r._editMode()?o:r.tbody.find("["+Qe.attr("uid")+"="+t.uid+"]"))}},saveRow:function(){var t,r=this,o=this._editContainer,l=this._modelForContainer(o),a=e.Deferred();return o&&this.editable?(t=r.editable&&r.editable.end(),!t||this.trigger(Lt,{container:o,model:l})?(t||r._scrollVirtualWrapper(),a.reject().promise()):(r._clearEditableState(),this.dataSource.sync())):a.resolve().promise()},_displayRow:function(t){var r,o,l,a,n,i=this,s=i._modelForContainer(t),d=t.hasClass("k-state-selected"),c=t.hasClass("k-alt");s&&(i.lockedContent&&(r=e((c?i.lockedAltRowTemplate:i.lockedRowTemplate)(s)),i._relatedRow(t.last()).replaceWith(r)),i.angular("cleanup",function(){return{elements:t.get()}}),o=e((c?i.altRowTemplate:i.rowTemplate)(s)),t.is(":visible")||o.hide(),t.replaceWith(o),i.trigger("itemChange",{item:o,data:s,ns:Je}),r&&r.length&&i.trigger("itemChange",{item:r,data:s,ns:Je}),a=o,n=[{dataItem:s}],r&&r.length&&(a=o.add(r),n.push({dataItem:s})),i.angular("compile",function(){return{elements:a.get(),data:n}}),d&&(i.options.selectable||i._checkBoxSelection)&&i.select(o.add(r)),r&&Se(o[0],r[0]),l=o.next(),l.hasClass("k-detail-row")&&l.is(":visible")&&o.find(".k-hierarchy-cell .k-icon").removeClass("k-i-expand").addClass("k-i-collapse"))},_showMessage:function(t,r){var o,l=this;return l._isMobile?(o=l._confirmDialog=new Qe.ui.Confirm(e("<div />").appendTo(document.body),{modal:{preventScroll:!0},closable:!1,title:!1,content:t.title,messages:{okText:t.confirmDelete,cancel:t.cancelDelete},open:function(){l.content&&(l.content.data(Or,l.content.css(Or)),l.content.css(Or,Gr))},close:function(){l.content&&l.content.css(Or,l.content.data(Or))}}),o.result.done(function(){l._removeRow(r)}).fail(function(){var e=l._confirmDialog;e&&(e.close(),e.destroy())}),!1):window.confirm(t.title)},_confirmation:function(e){var t=this,r=t.options.editable,o=r===!0||typeof r===Dr?t.options.messages.editable.confirmation:r.confirmation;return at(r)&&typeof r.mode===Dr&&typeof o!==zr&&typeof o!==Dr&&o!==!1&&(o=t.options.messages.editable.confirmation),o===!1||null==o||(typeof o===zr&&(o=o(t._modelForContainer(e))),t._showMessage({confirmDelete:r.confirmDelete||t.options.messages.editable.confirmDelete,cancelDelete:r.cancelDelete||t.options.messages.editable.cancelDelete,title:o===!0?t.options.messages.editable.confirmation:o},e))},cancelChanges:function(){var e=this;e.dataSource.cancelChanges(),e._isVirtualEditable()&&e._virtualPageToTop(function(){e.virtualScrollable.scrollToTop()})},saveChanges:function(){var e=this,t=e.editable&&e.editable.end();!t&&e.editable||e.trigger(Ut)?t||e._scrollVirtualWrapper():e.dataSource.sync()},addRow:function(){var e,t,r=this,o=r.dataSource,l=r._editMode(),a=r.options.editable.createAt||"",n=o.pageSize(),i=o.view()||[],s=a.toLowerCase()===Ar,d=r._isVirtualEditable();r.editable&&r.editable.end()||!r.editable?("incell"!=l&&r.cancelRow(),e=o.indexOf(i[0]),s&&(e+=i.length,n&&!o.options.serverPaging&&n<=i.length&&(e-=1)),e<0&&(e=o.page()>o.totalPages()?(o.page()-1)*n:0),r.options.navigatable&&"incell"==l&&r._removeCurrent(),d?r._virtualAddRow():(t=o.insert(e,{}),r._editModel(t))):r._scrollVirtualWrapper()},_editModel:function(e){var t,r,o,l,a=this,n=a.options.editable.createAt||"",i=a._editMode();e&&(t=e.uid,r=a.lockedContent?a.lockedTable:a.table,o=r.find("tr["+Qe.attr("uid")+"="+t+"]"),l=o.children("td:not(.k-group-cell,.k-hierarchy-cell)").eq(a._firstEditableColumnIndex(o)),"inline"===i&&o.length?a.editRow(o):"popup"===i?a.editRow(e):l.length&&a.editCell(l),"bottom"==n.toLowerCase()&&a.lockedContent&&(a.lockedContent[0].scrollTop=a.content[0].scrollTop=a.table[0].offsetHeight))},_virtualAddRow:function(){var e=this,t=(e.options.editable.createAt||"").toLowerCase()===Ar;e._clearEditableState(),t?e._virtualAddRowAtBottom():e._virtualAddRowAtTop()},_virtualAddRowAtTop:function(){var e,t=this,r=t.dataSource,o=t.virtualScrollable;1===r.page()?(e=r.insert(0,{}),t._editModel(e),o.scrollToTop()):t._virtualPageToTop(function(){e=r.insert(0,{}),t._editModel(e),o.scrollToTop()})},_virtualAddRowAtBottom:function(){var e,t=this,r=t.dataSource,o=t.virtualScrollable,l=r.total();r.at(l-1)instanceof Xe?(e=r.insert(l,{}),t._virtualPageToBottom(function(){t._editModel(e),o.scrollToBottom()})):t._virtualPageToBottom(function(){e=r.insert(l,{}),t._editModel(e),o.scrollToBottom()})},_virtualPageToTop:function(e){var t=this;t._virtualPage(0,t.dataSource.take(),function(){e()})},_virtualPageToBottom:function(e){var t=this,r=t.dataSource,o=r.take(),l=r.total(),a=l>o?l-o:0;t._virtualPage(a,o,function(){e()})},_virtualPage:function(e,t,r){var o=this;o._isVirtualEditable()&&(o.virtualScrollable._preventScroll=!0,o.virtualScrollable._page(e,t,r))},_firstEditableColumnIndex:function(e){var t,r,o,l=this,a=oe(l.columns),n=l._modelForContainer(e);for(r=0,o=a.length;r<o;r++)if(t=a[r],n&&(!n.editable||n.editable(t.field))&&!t.command&&t.field&&t.hidden!==!0)return r;return-1},_toolbar:function(){var t,r=this,o=r.wrapper,l=r.options.toolbar,a=r.options.editable;l&&(t=r.wrapper.find(".k-grid-toolbar"),t.length||(ht(l)||(l=typeof l===Dr?l:r._toolbarTmpl(l).replace(eo,"\\#"),l=pt(Qe.template(l),r)),t=e('<div class="k-toolbar k-grid-toolbar" />').html(l({})).prependTo(o),r.angular("compile",function(){return{elements:t.get()}})),a&&a.create!==!1&&t.on(Hr+It,".k-grid-add",function(e){e.preventDefault(),r.addRow()}).on(Hr+It,".k-grid-cancel-changes",function(e){e.preventDefault(),r.cancelChanges()}).on(Hr+It,".k-grid-save-changes",function(e){e.preventDefault(),r.saveChanges()}),t.on(Hr+It,".k-grid-excel",function(e){e.preventDefault(),r.saveAsExcel()}),t.on(Hr+It,".k-grid-pdf",function(e){e.preventDefault(),r.saveAsPDF().done(function(){r._pdfInitialized=!1})}),t.on(Mr+It,".k-grid-search input",function(e){var t=e.currentTarget;clearTimeout(r._searchTimeOut),r._searchTimeOut=setTimeout(function(){var e,o,l,a,n;if(r._searchTimeOut=null,e=r.options,o=e.search?e.search.fields:null,l={filters:[],logic:"or"},a=t.value,o||(o=le(e.columns)),r.dataSource.options.endless&&(r.dataSource.options.endless=null,r._endlessPageSize=r.dataSource.options.pageSize),a)for(n=0;n<o.length;n++)r._pushExpression(l.filters,o[n],a);else l={};r.dataSource.filter(l)},300)}))},_pushExpression:function(e,t,r){var o=this,l=o.dataSource.options.serverFiltering,a={string:"contains",number:"gte",date:"gte",enums:"eq","boolean":"eq"},n=t.name||t,i=t.operator,s=o.dataSource.reader.model&&o.dataSource.reader.model.fields,d=s&&s[n],c=d&&d.parse,u={field:n,operator:i||a.string,value:r};(i||l)&&d&&Qe.isFunction(c)&&null!==c(r)&&nt(u,{operator:i||a[d.type],value:c(r)}),l&&d&&Qe.isFunction(c)&&null===c(r)||e.push(u)},_toolbarTmpl:function(e){var t,r,o,l=this,a="",n="",i=l.options.messages.commands;if(dt(e))for(t=0,r=e.length;t<r;t++)o="string"==typeof e[t]?e[t].toLowerCase():(e[t].name||"").toLowerCase(),"search"===o?("string"!=typeof e[t]&&(n=e[t].text),n=n||i.search,a+="<span class='k-textbox k-grid-search k-display-flex'>",a+="<input autocomplete='off' placeholder='"+n+"' title='"+n+"' class='k-input' />",a+="<span class='k-input-icon'><span class='k-icon k-i-search'></span></span>",a+="</span>"):a+=l._createButton(e[t]);return a},_createButton:function(e){var r,o=e.template||no,a=typeof e===Dr?e:e.name||e.text,n=je[a]?je[a].className:"k-grid-"+(a||"").replace(/\s/g,""),i={className:n,text:a,attr:"",iconClass:""},s=this.options.messages.commands;if(!(a||at(e)&&e.template))throw Error("Custom commands should have name specified");return at(e)?(e=nt(!0,{},e),e.className&&ct(i.className,e.className.split(" "))<0?e.className+=" "+i.className:e.className===t&&(e.className=i.className),"edit"===a&&(e=nt(!0,{},e),e.text=at(e.text)?e.text.edit:e.text,e.iconClass=at(e.iconClass)?e.iconClass.edit:e.iconClass),e.attr&&(at(e.attr)&&(e.attr=l(e.attr)),typeof e.attr===Dr&&(r=e.attr.match(/class="(.+?)"/),r&&ct(r[1],e.className.split(" "))<0&&(e.className+=" "+r[1]))),i=nt(!0,i,je[a],{text:s[a]},e)):i=nt(!0,i,je[a],{text:s[a]}),Qe.template(o)(i)},_hasFooters:function(){return!!this.footerTemplate||!!this.groupFooterTemplate||this.footer&&this.footer.length>0||this.wrapper.find(".k-grid-footer").length>0},_groupable:function(){var t=this;t._groupableClickHandler?t.table.add(t.lockedTable).off(Hr+It,t._groupableClickHandler):t._groupableClickHandler=function(r){var o=e(this),l=o.closest("tr"),a=t._groupRows?t._groupRows[t.wrapper.find(".k-grouping-row").index(l)]:{};o.hasClass("k-i-collapse")?t.trigger("groupCollapse",{group:a,element:l})||t.collapseGroup(l):t.trigger("groupExpand",{group:a,element:l})||t.expandGroup(l),r.preventDefault(),r.stopPropagation()},t._isLocked()?t.lockedTable.on(Hr+It,".k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse",t._groupableClickHandler):t.table.on(Hr+It,".k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse",t._groupableClickHandler),t._attachGroupable()},_attachGroupable:function(){var t=this,r=t.wrapper,o=t.options.groupable,l=Ht+"["+Qe.attr("field")+"]",a=t.content?".k-grid-header:first "+l:"table:first>.k-grid-header "+l;o&&o.enabled!==!1&&(r.has("div.k-grouping-header")[0]||e("<div>&nbsp;</div>").addClass("k-grouping-header").prependTo(r),t.groupable&&t._destroyGroupable(),po.chrome&&(r.find("div.k-grouping-header").css("touch-action","none"),r.find(a).css("touch-action","none")),t.groupable=new Je.Groupable(r,nt({},o,{draggable:t._draggableInstance,groupContainer:">div.k-grouping-header",dataSource:t.dataSource,draggableElements:a,filter:a,allowDrag:t.options.reorderable,change:function(e){t.trigger("group",{groups:e.groups})?e.preventDefault():(t._clearEditableState(),t.dataSource.options.endless&&(t.dataSource.options.endless=null,t._endlessPageSize=t.dataSource.options.pageSize,t.dataSource._skip=0,t.dataSource._pageSize=t.dataSource._take=t._endlessPageSize,t.dataSource._page=1))}})),t._addGroupableOptionsToHeader())},_addGroupableOptionsToHeader:function(){var e,t,r,o=this,l=M(o.columns),a={},n="",i=o._headerCells(),s="";for(r=0;r<l.length;r++)n=l[r].field,a[l[r].field]=l[r];for(r=0;r<i.length;r++)e=i.eq(r),s=e.attr(Qe.attr(Fr)),t=a[s],t&&t.groupable&&t.groupable.sort&&e.data(Ur,t.groupable.sort)},_destroyGroupable:function(){var e=this;e.groupable&&e.groupable.element&&e.groupable.element.kendoGroupable("destroy"),e.groupable=null,e._removeGroupableOptionsFromHeader()},_removeGroupableOptionsFromHeader:function(){var e,t=this,r=t._headerCells();for(e=0;e<r.length;e++)r.eq(e).removeData(Ur)},_continuousItems:function(t,r){var o,l,a,n,i,s,d,c;if(this.lockedContent){for(o=this,l=o.table.add(o.lockedTable),a=e(t,l[0]),n=e(t,l[1]),i=r?$(o.columns).length:1,s=r?o.columns.length-i:1,d=[],c=0;c<a.length;c+=i)ut.apply(d,a.slice(c,c+i)),ut.apply(d,n.splice(0,s));return d}},_selectable:function(){var r,o,l,a,n=this,i=[],s=n._isLocked(),d=n.options.selectable;d&&(n.selectable&&n.selectable.destroy(),n._selectedIds={},d=Qe.ui.Selectable.parseOptions(d),r=d.multiple,o=d.cell,n._hasDetails()&&(i[i.length]=".k-detail-row"),(n.options.groupable||n._hasFooters()||n._groups())&&(i[i.length]=".k-grouping-row,.k-group-footer"),i=i.join(","),""!==i&&(i=":not("+i+")"),l=n.table,s&&(l=l.add(n.lockedTable)),a=">"+(o?Ct:"tbody>tr"+i),n.selectable=new Qe.ui.Selectable(l,{filter:a,aria:!0,multiple:r,change:function(){var e;o||n._persistSelectedRows(),n._checkBoxSelection&&(e=n.selectable.value(),n._uncheckCheckBoxes(),n._checkRows(e),n._toggleHeaderCheckState(e.length&&e.length===n.items().length?!0:!1)),n.trigger(Ot)},useAllItems:s&&r&&o,relatedTarget:function(t){var r,l,a,i;if(!o&&s){for(l=e(),a=0,i=t.length;a<i;a++)r=n._relatedRow(t[a]),ct(r[0],t)<0&&(l=l.add(r));return l}},continuousItems:function(){return n._continuousItems(a,o)},ignoreOverlapped:n.options.selectable&&n.options.selectable.ignoreOverlapped,addIdToRanges:!0}),n.options.navigatable&&l.on("keydown"+It,function(a){var i=n.current(),d=a.target;if(i)if(a.keyCode===lt.SPACEBAR&&!a.shiftKey&&e.inArray(d,l)>-1&&!i.is(".k-edit-cell,.k-header")&&i.parent().is(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")){if(a.preventDefault(),a.stopPropagation(),i=o?i:i.parent(),s&&!o&&(i=i.add(n._relatedRow(i))),r)if(a.ctrlKey){if(i.hasClass(lr))return n._deselectCheckRows(i),t}else n.selectable.clear();else n.selectable.clear();o||(n.selectable._lastActive=i),n.selectable.value(i)}else!o&&(e(d).is("td")||e(d).is("table")&&ct(d,this._navigatableTables))&&(a.shiftKey&&a.keyCode==lt.LEFT||a.shiftKey&&a.keyCode==lt.RIGHT||a.shiftKey&&a.keyCode==lt.UP||a.shiftKey&&a.keyCode==lt.DOWN||a.keyCode===lt.SPACEBAR&&a.shiftKey)&&(a.preventDefault(),a.stopPropagation(),i=i.parent(),s&&(i=i.add(n._relatedRow(i))),r?(n.selectable._lastActive||(n.selectable._lastActive=i),n.selectable.selectRange(n.selectable._firstSelectee(),i)):(n.selectable.clear(),n.selectable.value(i)))}))},_clipboard:function(){var e,t=this.options,r=t.selectable;r&&t.allowCopy&&(e=this,t.navigatable||e.table.add(e.lockedTable).attr("tabindex",0).on("mousedown"+It+" keydown"+It,".k-detail-cell",function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()}).on("mousedown"+It,yt+">"+St,pt(ze,e)),e.copyHandler=pt(e.copySelection,e),e.updateClipBoardState=function(){e.areaClipBoard&&e.areaClipBoard.val(e.getTSV()).trigger("focus").select()},e.bind("change",e.updateClipBoardState),e.wrapper.on("keydown",e.copyHandler),e.clearAreaHandler=pt(e.clearArea,e),e.wrapper.on("keyup",e.clearAreaHandler))},copySelectionToClipboard:function(e){this._createAreaClipBoard(),this.areaClipBoard.val(this.getTSV(e)).trigger("focus").select(),document.execCommand("copy")},copySelection:function(t){t instanceof jQuery.Event&&!t.ctrlKey&&!t.metaKey||e(t.target).is("input:visible,textarea:visible")||window.getSelection&&""+window.getSelection()||document.selection&&document.selection.createRange().text||(this._createAreaClipBoard(),this.areaClipBoard.val(this.getTSV()).trigger("focus").select())},_createAreaClipBoard:function(){this.areaClipBoard||(this.areaClipBoard=e("<textarea />").css({position:"fixed",top:"50%",left:"50%",opacity:0,width:0,height:0}).appendTo(this.wrapper))},getTSV:function(t){var r,o,l,a,n,i,s,d,c,u=this,p=u.select(),h="\t",f=u.options.allowCopy,g=!0,m=u._isLocked()&&$(u.columns).length;return e.isPlainObject(f)&&f.delimeter&&(h=f.delimeter),r="",p.length&&(p.eq(0).is("tr")&&(p=p.find("td:not(.k-group-cell)")),g&&p.filter(":visible"),o=[],l=this.columns.length,a=u._isLocked()&&$(u.columns).length,n=!0,i=[],d=ee(this.columns),e.each(p,function(t,r){var d,c,p,h;r=e(r),s=u._getCellField(r,m),d=r.closest("tr"),c=d.index(),p=r.index(),g&&(p-=r.prevAll(":hidden").length),a&&n&&(n=e.contains(u.lockedTable[0],r[0])),u._groups()&&n&&(p-=u._groups()),p=n?p:p+a,s&&(i[p]=s),l>p&&(l=p),h=r.text(),o[c]||(o[c]=[]),o[c][p]=h}),c=o.length,o=e.each(o,function(e,t){t&&(o[e]=t.slice(l),c>e&&(c=e))}),t&&i.length&&o.splice(c,0,i.map(function(e){return Oe(e,d)})),e.each(o.slice(c),function(e,t){r+=t?t.join(h)+"\r\n":"\r\n"})),r},clearArea:function(t){var r;this.areaClipBoard&&t&&t.target===this.areaClipBoard[0]&&(r=this.options.navigatable?e(this.current()).closest("table"):this.table,xe(r,!0)),this.areaClipBoard&&(this.areaClipBoard.remove(),this.areaClipBoard=null)},_adaptiveColumns:function(){var e=this;e._anyColumnHasMediaQuery()&&(e._setColumnsMediaVisibility(e.columns),e._attachColumnMediaResizeHandler())},_anyColumnHasMediaQuery:function(){return this._columnsWithMediaQuery().length},_columnsWithMediaQuery:function(){return w(this.columns)},_attachColumnMediaResizeHandler:function(){var t=this;t._detachColumnMediaResizeHandler(),t._columnMediaResizeHandler=pt(t._onColumnMediaResize,t),e(window).on(kr+It,t._columnMediaResizeHandler)},_detachColumnMediaResizeHandler:function(){var t=this;t._columnMediaResizeHandler&&e(window).off(kr+It,t._columnMediaResizeHandler)},_onColumnMediaResize:function(){var e=this;e._setColumnsMediaVisibility(e.columns),e._setContentMediaWidth()},_setColumnsMediaVisibility:function(e){var t,r=e||[];for(t=0;t<r.length;t++)this._setColumnMediaVisibility(r[t])},_setColumnMediaVisibility:function(e){var t=this;C(e.media)?t._setColumnsMediaVisibility(e.columns):m(e)?(t._showColumnByMedia(e),e.hidden||t._setColumnsMediaVisibility(e.columns)):t._hideColumnByMedia(e)},_showColumnByMedia:function(e){e.hidden||this.showColumn(e),g(e)},_hideColumnByMedia:function(e){var t=e.hidden;t||(e._hideByMedia=!0,this.hideColumn(e),e._hideByMedia=!1,e.hidden=t),g(e)},_setContentMediaWidth:function(){var t,r,o,l,a,n,i,s,d,c,u,p,h,f,g,m=this,b=m.options,v=m._isLocked();if(b.scrollable&&b.resizable&&(v&&m.lockedFooter?t=m.lockedFooter.children("table"):m.footer&&(t=m.footer.find(">.k-grid-footer-wrap>table")),t&&t[0]||(t=e()),r=v?m.wrapper.find(".k-grid-header-locked").find("table"):m.wrapper.find(".k-grid-header").find("table"),o=v?m.lockedTable:m.table,l=r.find("th"),a=r.find("colgroup"),n=l.length,i=l.filter(_).length,s=l.length-i,d=0,""!==r[0].style.width&&parseFloat(r[0].style.width)!==d)){for(c=r.css("width"),u=0;u<n;u++)k(l[u])&&(h=Math.max(u,u-s),f=a.children()[h],g=f?f.style.width:"",""!==g?p=parseFloat(g):(r.css("width","auto"),p=rt(l.eq(u)),r.css("width",c)),d+=p);o.css("width",d-1),r.css("width",d),t.css("width",d),m._updateStickyColumns()}},_minScreenSupport:function(){var t=this.hideMinScreenCols();t&&(this.minScreenResizeHandler=pt(this.hideMinScreenCols,this),e(window).on("resize",this.minScreenResizeHandler))},hideMinScreenCols:function(){var e=this.columns,t=window.innerWidth>0?window.innerWidth:screen.width;return this._iterateMinScreenCols(e,t)},_iterateMinScreenCols:function(e,r){var o,l,a,n=!1;for(o=0;o<e.length;o++)l=e[o],a=l.minScreenWidth,a!==t&&null!==a&&(n=!0,a>r?this.hideColumn(l):this.showColumn(l)),!l.hidden&&l.columns&&(n=this._iterateMinScreenCols(l.columns,r)||n);return n},_stickyColumns:function(){var e=this;e._anyStickyColumns()&&e._setStickyColumns(!1)},_updateStickyColumns:function(){var e=this,t=st(oe(e.columns),function(e){return e.groupHeaderColumnTemplate});e._anyStickyColumns()&&(e._setStickyColumns(!0),e._templates(),t.length>0&&e._renderGroupRows(),e._hasFilterRow()&&e._updateStickyFilterCells())},_updateStickyFilterCells:function(){var t=this,r=t.thead.find(".k-filter-row").find("th:not(.k-group-cell,.k-hierarchy-cell)");r.length&&r.each(function(){var t=e(this),r=t.data("column"),o=t.attr("style")||"";r.sticky?(t.attr("style",o+r.stickyStyle),t.addClass(gr)):(o=o.replace(ro,""),o=o.replace(oo,""),t.attr("style",o),t.removeClass(gr))})},_anyStickyColumns:function(){var e=this;return J(e.columns).length},_setStickyColumns:function(e){var t=this,r=J(t.columns),o=Y(t.columns),l=t._calculateStickyWidths(o);t._removeStickyAttributes(r),t._setStickyClassAttributes(r),t._setStickyStyleAttributes(o,l,e),e&&t._setStickyStyles(o,l)},_calculateStickyWidths:function(e,t,r){var o,l,a,n,i,s=this,d=uo?"right":"left",c=uo?"left":"right",u={left:Array(e.length).fill(t?t:0),right:Array(e.length).fill(r?r:0)};for(o=0;o<e.length-1;o++)l=e[o],a=s._sumColumnWidth(l),n=a+u[d][o],u[d][o+1]=n;for(o=e.length-1;o>0;o--)l=e[o],a=s._sumColumnWidth(l),i=a+u[c][o],u[c][o-1]=i;return u},_setStickyClassAttributes:function(e,t){var r,o,l=this;for(r=0;r<e.length;r++)o=e[r],o.columns&&(!t&&r&&(t=r),l._setStickyClassAttributes(te([o]),t)),t&&K(o,"headerAttributes","class",_r),K(o,"attributes","class",fr),K(o,"headerAttributes","class",gr),K(o,"footerAttributes","class",mr)},_setStickyStyleAttributes:function(e,t,r){var o,l,a,n,i,s,d,c=this;for(o=0;o<e.length;o++)l=e[o],a=t.left[o],n=t.right[o],i="left: "+a+"px; right: "+n+"px;",l.columns&&(s=re([l]),d=c._calculateStickyWidths(s,a,n),c._setStickyStyleAttributes(s,d,r),r&&c._setStickyStyles(s,d)),K(l,"attributes","style",i),K(l,"headerAttributes","style",i),K(l,"footerAttributes","style",i),l.stickyStyle=i},_removeStickyAttributes:function(e){var t,r,o=this,l=RegExp("(\\s*"+fr+")*","ig"),a=RegExp("(\\s*"+gr+")*","ig"),n=RegExp("(\\s*"+mr+")*","ig"),i=RegExp("(\\s*"+_r+")*","ig");for(t=0;t<e.length;t++)r=e[t],r.columns&&o._removeStickyAttributes(te([r])),j(r,"attributes","class",l),j(r,"attributes","style",ro),j(r,"attributes","style",oo),j(r,"headerAttributes","class",a),j(r,"headerAttributes","class",i),j(r,"headerAttributes","style",ro),j(r,"headerAttributes","style",oo),j(r,"footerAttributes","class",n),j(r,"footerAttributes","style",ro),j(r,"footerAttributes","style",oo)},_setStickyStyles:function(t,r){var o,l,a,n,i,s,d,c,u,p,h,f=this,g=oe(Q(f.columns)),m=f.tbody.children(":not(.k-detail-row)");for(o=0;o<t.length;o++)if(n=t[o],s=r.left[o],d=r.right[o],i=g.indexOf(n),c=f._getColumnHeader(n),c.addClass(gr),n.headerAttributes["class"]&&n.headerAttributes["class"].indexOf(_r)!==-1&&c.addClass(_r),N(c,s,d),!n.columns)for(f.footer&&(u=f.footer.find(".k-grid-footer-wrap tr.k-footer-template").children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(i),u.addClass(mr),N(u,s,d)),l=0;l<m.length;l++)a=e(m[l]),a.hasClass("k-grouping-row")?(p=a.find("."+n.groupHeaderColumnTemplateClass),p.addClass(fr),N(p,s,d)):(h=a.children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(i),h.addClass(fr),N(h,s,d))},_removeStickyStyles:function(t){var r,o,l,a,n,i,s,d,c,u=this,p=oe(Q(u.columns)),h=u.tbody.children(":not(.k-detail-row)");for(r=0;r<t.length;r++)if(a=t[r],n=p.indexOf(a),i=u._getColumnHeader(a),i.removeClass(gr),i.removeClass(_r),N(i,"",""),a.columns)u._removeStickyStyles(a.columns);else for(a.footerTemplate&&u.footer&&(s=u.footer.find(".k-grid-footer-wrap tr.k-footer-template").children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(n),s.removeClass(mr),N(s,"","")),o=0;o<h.length;o++)l=e(h[o]),l.hasClass("k-grouping-row")?(d=l.find("."+a.groupHeaderColumnTemplateClass),d.removeClass(fr),N(d,"","")):(c=l.children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(n),c.removeClass(fr),N(c,"",""))},_getColumnHeader:function(t){var r=this,o=e(e("#"+t.headerAttributes.id).length?"#"+t.headerAttributes.id:"#"+r._cellId);return o},_sumColumnWidth:function(e){var t=this,r=0;return r=t._sumCurrentWidths(e.columns?oe([e]):[e])},_sumCurrentWidths:function(e){var t,r,o,l=this,a=0,n=0,i=e.length;for(o=0;o<i;o++)t=e[o],r=l._getColumnHeader(t),!t.hidden&&m(t)&&(n=r.is(":visible")?r.outerWidth():t.width,a+=n?parseInt(n,10):0);return a},_belongsToGrid:function(e){return this.wrapper[0]===e.closest(Rt)[0]},getSelectedData:function(){var e,t=this,r=t.selectable.selectedRanges(),o=Object.keys(r),l=t.selectable.selectedSingleItems(),a=[],n=ee(t.columns);for(e=0;e<o.length;e++)a=a.concat(t._mapSelectionToData(r[o[e]],n));return l.length&&(a=a.concat(t._mapSelectionToData(l,n))),a},exportSelectedToExcel:function(e){var t,r,o,l,a,n,i,s,d,c,u,p,h,f;if(!Qe.excel||!Qe.ooxml)throw Error("The excel export functionality depends on both kendo.excel.js and kendo.ooxml.js scripts, please make sure they are included.");for(t=this,r=this.options.excel||{},o=ee(t.columns),l=new Qe.excel.ExcelExporter({}),a=function(){return{autoWidth:!0}},n={sheets:[{columns:Array.apply(0,Array(o.length)).map(a),rows:[],freezePane:{},filter:!1}]},i=t.selectable.selectedRanges(),s=Object.keys(i),d=t.selectable.selectedSingleItems(),u=[],p=t._isLocked()&&$(t.columns).length,h=Ge.bind(t),c=0;c<s.length;c++)u=u.concat(t._mapSelectionToData(i[s[c]],o,Ne));u.length&&t._addRangeSelectionRows(n,l,u,e),u=d.length?t._mapSelectionToData(d,o,Ne):[],u.length&&(p&&(u=u.sort(h)),t._addSingleSelectionRows(n,l,u,e)),n.sheets[0].rows.length&&(f=new Qe.ooxml.Workbook(n),f.options||(f.options={}),f.options.skipCustomHeight=!0,f.toDataURLAsync().then(function(e){Qe.saveAs({dataURI:e,fileName:n.fileName||r.fileName,proxyURL:r.proxyURL,forceProxy:r.forceProxy})}))},_addSingleSelectionRows:function(e,t,r,o){var l,a=0,n=ee(this.columns);for(a=0;a<r.length;a++)l=r[a],t.data=[l],this._setExporterColumns(t,n,l),this._createExportRows(e,t,o)},_addRangeSelectionRows:function(e,t,r,o){var l=ee(this.columns);t.data=r,this._setExporterColumns(t,l,r[0]),this._createExportRows(e,t,o)},_createExportRows:function(e,t,r){e.sheets[0].rows=e.sheets[0].rows.concat(r?t._rows():t._dataRows(t.data,0))},_setExporterColumns:function(t,r,o){t.columns=t.options.columns=e.map(r.filter(function(e){return Object.keys(o).indexOf(e.field)>=0}),t._prepareColumn)},_mapSelectionToData:function(t,r,o){var l,a,n,i,s,d,c=this,u=t[0][0].nodeName,p="TR"===u,h={},f=function(e){var t={};if(e.field&&(!o||o(e)))return t[e.field]=l[e.field],t},g=c._isLocked()&&$(c.columns).length;for(d=0;d<t.length;d++)if(a=t[d],l=c.dataItem(p?a:a.parent()),p)h[l.uid]=e.extend.apply(null,r.map(f));else{if(i=c._getCellField(a,g),!i)continue;if(n=h[l.uid],n||(n=h[l.uid]={}),s=T(r,i),!s||o&&!o(s))continue;n[i]=l[i]}return Object.keys(h).map(function(e){return h[e].uid=e,h[e]})},_getCellField:function(t,r){var o=this,l=r&&e.contains(o.lockedTable[0],t[0]),a=Qe.attr("field");return r?o.element.find(".k-grid-header-"+(l?"locked":"wrap")+" th").eq(t.index()).attr(a):o.thead.find("th").eq(t.index()).attr(a)},_relatedRow:function(t){var r,o,l=this.lockedTable;return t=e(t),l?(r=t.closest(this.table.add(this.lockedTable)),o=r.find(">tbody>tr").index(t),r=r[0]===this.table[0]?l:this.table,r.find(">tbody>tr").eq(o)):t},_relatedCell:function(t){var r,o,l=this.lockedTable;return t=e(t),l?(r=t.closest(this.table.add(this.lockedTable)),o=r.find(">tbody>tr>td").index(t),r=r[0]===this.table[0]?l:this.table,r.find(">tbody>tr>td").index(o)):t},clearSelection:function(){var e=this;return e.selectable&&!e._checkBoxSelection&&e.selectable.clear(),e._checkBoxSelection?(e._deselectCheckRows(e.select()),t):(e.options.persistSelection?e._persistSelectedRows():e._selectedIds={},e.trigger(Ot),t)},select:function(e){var r=this,o=r.selectable,l=Qe.ui.Selectable.parseOptions(this.options.selectable),a=l.cell;return e=r.table.add(r.lockedTable).find(e),e.length?(o&&!o.options.multiple&&(o.clear(),e=e.first()),r._isLocked()&&(e=e.add(e.map(function(){return a?r._relatedCell(this):r._relatedRow(this)}))),o&&!r._checkBoxSelection?o.value(e):(r._checkRows(e),r.select().length===r.items().length&&r._toggleHeaderCheckState(!0),a||r._persistSelectedRows(),r.trigger(Ot)),t):o?o.value():r.items().filter("."+lr)},_toggleHeaderCheckState:function(e){var t=this;e?t.thead.add(t.lockedHeader).find("tr "+nr).prop("checked",!0).attr("aria-checked",!0).attr("aria-label","Deselect all rows"):t.thead.add(t.lockedHeader).find("tr "+nr).prop("checked",!1).attr("aria-checked",!1).attr("aria-label","Select all rows")},_uncheckCheckBoxes:function(){var e=this,t=e.table.add(e.lockedTable);t.find("tbody "+nr).attr("aria-checked",!1).prop("checked",!1).attr("aria-label","Select row")},_deselectCheckRows:function(t){var r=this;t=r.table.add(r.lockedTable).find(t),r._isLocked()&&(t=t.add(t.map(function(){return r._relatedRow(this)}))),t.each(function(){e(this).removeClass(lr).find(nr).attr("aria-checked",!1).prop("checked",!1).attr("aria-label","Select row")}),r._toggleHeaderCheckState(!1),r._persistSelectedRows(),r.trigger(Ot)},_checkRows:function(t){t.each(function(){e(this).addClass(lr).find(nr).prop("checked",!0).attr("aria-label","Deselect row").attr("aria-checked",!0);
})},_persistSelectedRows:function(){var e,t,r,o,l=this,a=l.items(),n=l.dataSource.options,i=n.schema,s={};if(i&&i.model&&l._data&&(r=ht(i.model)?i.model.fn.idField:i.model.id))for(l.select().each(function(){t=l.dataItem(this),s[t[r]]=!0}),o=0;o<a.length;o++)t=l.dataItem(a[o]),e=t[r],s[e]?l._selectedIds[e]=!0:delete l._selectedIds[e]},selectedKeyNames:function(){var e,t=this,r=[];for(e in t._selectedIds)r.push(e);return r.sort(),r},_updateCurrentAttr:function(t,r){var o,l,a=e(t).data("headerId");e(t).removeClass(rr).closest("table").removeAttr("aria-activedescendant"),a?(a=a.replace(this._cellId,""),e(t).attr("id",a)):e(t).removeAttr("id"),o=r.attr("id"),o!=this._cellId&&r.data("headerId",o),r.is("th")?l=o:r.attr("id",this._cellId),r.addClass(rr).closest("table").attr("aria-activedescendant",l||this._cellId),this._current=r},_scrollCurrent:function(){var t,r,o,l,a,n,i=this._current,s=this.options.scrollable;i&&s&&(t=i.parent(),r=t.closest("table").parent(),o=r.is(".k-grid-content-locked,.k-grid-header-locked"),l=r.is(".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap"),a=e(this.content).find(">.k-virtual-scrollable-wrap").addBack().last()[0],l&&(this.virtualScroll?(n=Math.max(ct(t[0],this._items(t.parent())),0),this.virtualScroll.rows?(this._rowVirtualIndex=this.virtualScrollable.itemIndex(n),this.virtualScrollable.scrollIntoView(t)):(this._rowVirtualIndex=n,this._scrollTo(this._relatedRow(t)[0],a))):this._scrollTo(this._relatedRow(t)[0],a)),this.lockedContent&&(this.lockedContent[0].scrollTop=a.scrollTop),o||this._scrollTo(i[0],a))},current:function(e){return this._setCurrent(e,!0)},_setCurrent:function(t,r,o){var l,a,n,i=this._current;return t=e(t),t.length&&(i&&i[0]===t[0]||(l=t.parent(),a=l.children(wt),n=parseInt(l.children().first().attr("colspan"),10),this._hasVirtualColumns()&&(this._virtualCellIndex=(n>1?n:0)+a.index(t)),this._updateCurrentAttr(i,t),o||this._scrollCurrent(),r||this.trigger(xr,{element:t}))),t&&t.length&&(this._lastCellIndex=t.parent().children(wt).index(t)),this._current},_removeCurrent:function(){this._current&&(this._current.removeClass(rr),this._current=null)},_scrollTo:function(t,r){var o=t.tagName.toLowerCase(),l="td"===o||"th"===o,a=e(t).closest("table")[0],n=t[l?"offsetWidth":"offsetHeight"],i=r[l?"scrollLeft":"scrollTop"],s=r[l?"clientWidth":"clientHeight"],d="relative"===e(t).css("position")&&uo&&l?Math.abs(a.offsetLeft-t.offsetLeft):t[l?"offsetLeft":"offsetTop"],c=d+n,u=0,p=0,h=0;uo&&l&&(po.msie||po.edge?p=a.offsetLeft:(po.mozilla||po.webkit&&po.version>85)&&(h=a.offsetLeft-Qe.support.scrollbar())),i=Math.abs(i+p-h),u=i>d?d:c>i+s?n<=s?c-s:d:i,u=Math.abs(u+p)+h,r[l?"scrollLeft":"scrollTop"]=u},_navigatable:function(){var t,r,o,l=this;l.options.navigatable&&(t=l.table.add(l.lockedTable),r=l.thead.parent().add(e(">table",l.lockedHeader)),o=t,l.options.scrollable&&(o=o.add(r),r.attr(Er,-1)),this._navigatableTables=o,this._headertables=r,o.off("mousedown"+It+" focus"+It+" focusout"+It+" keydown"+It),r.on("keydown"+It,pt(l._openHeaderMenu,l)).find("a.k-link").attr("tabIndex",-1),t.attr(Er,mt.max(t.attr(Er)||0,0)).on("keydown"+It,".k-detail-cell",function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()}),o.on(Qe.support.touch?"touchstart"+It:"mousedown"+It,yt+">"+St,pt(ze,l)).on("focus"+It,pt(l._tableFocus,l)).on("focusout"+It,pt(l._tableBlur,l)).on("keydown"+It,l,pt(l._tableKeyDown,l)))},_openHeaderMenu:function(e){e.altKey&&e.keyCode==lt.DOWN&&(this.current().find(".k-grid-filter, .k-header-column-menu").click(),e.stopImmediatePropagation())},_setTabIndex:function(e){this._navigatableTables.attr(Er,-1),e.attr(Er,0)},_tableFocus:function(t){var r=this.current(),o=e(t.currentTarget);r&&r.is(":visible")?r.addClass(rr):this._virtualColScroll?this._setCurrent(o.find(yt).first().children(St).first(),!0,!0):this._setCurrent(o.find(yt).first().children(St).first()),this._setTabIndex(o)},_tableBlur:function(){var e=this.current();e&&e.removeClass(rr)},_findCellIndex:function(e,t,r){var o,l;if(r)for(l=t;l>=0&&(o=l,e[l].hidden);l--);else for(l=t;l<e.length&&(o=l,e[l].hidden);l++);return o},_scrollToColumn:function(e,r){var o,l,a,n,i;if(this._virtualCellIndex===t)return!1;for(o=this,l=o._virtualCellIndex,a=oe(Q(o.columns)),n=0,e==(uo?lt.LEFT:lt.RIGHT)&&l!==a.length-1?l=o._findCellIndex(a,l+1):e==(uo?lt.RIGHT:lt.LEFT)&&l?l=o._findCellIndex(a,l-1,!0):e==lt.HOME?l=o._findCellIndex(a,0):e==lt.END&&(l=o._findCellIndex(a,a.length-1,!0)),i=0;i<l;i++)n+=a[i].width;return o._virtualCellIndex=l,r&&(r.preventDefault(),r.stopPropagation()),Qe.scrollLeft(o.content,n),!0},_tableKeyDown:function(r){var o,l=this.current(),a=this.virtualScroll||{},n=this.virtualScrollable&&this.virtualScrollable.fetching(),i=e(r.target),s=!r.isDefaultPrevented()&&!i.is(":button,a,:input,a>.k-icon");return n?(r.preventDefault(),t):((!a.columns||l&&document.body.contains(l[0])||!this._scrollToColumn(r.keyCode,r))&&(l||(l=e(this.lockedTable).add(this.options.scrollable?this.table:this.tbody).find(yt).first().children(St).first()),l.length&&(o=!1,s&&r.keyCode==lt.UP&&(o=this._moveUp(l,r.shiftKey,r.ctrlKey)),s&&r.keyCode==lt.DOWN&&(o=this._moveDown(l,r.shiftKey,r.ctrlKey)),s&&r.keyCode==(uo?lt.LEFT:lt.RIGHT)&&(o=this._moveRight(l,r.altKey,r.shiftKey,r.ctrlKey,r.currentTarget)),s&&r.keyCode==(uo?lt.RIGHT:lt.LEFT)&&(o=this._moveLeft(l,r.altKey,r.shiftKey,r.ctrlKey,r.currentTarget)),s&&r.keyCode==lt.PAGEDOWN&&(o=this._handlePageDown()),s&&r.keyCode==lt.PAGEUP&&(o=this._handlePageUp()),s&&r.keyCode==lt.HOME&&(o=this._handleHome(l,r.ctrlKey)),s&&r.keyCode==lt.END&&(o=this._handleEnd(l,r.ctrlKey)),s&&r.keyCode==lt.SPACEBAR&&(o=this._handleSpaceKey(l,r.ctrlKey)),r.keyCode!=lt.ENTER&&r.keyCode!=lt.F2||(o=this._handleEnterKey(l,r.currentTarget,i)),r.keyCode==lt.ESC&&(o=this._handleEscKey(l,r.currentTarget)),r.keyCode==lt.TAB&&(o=this._handleTabKey(l,r.currentTarget,r.shiftKey,i)),o&&(r.preventDefault(),r.stopPropagation()))),t)},_moveLeft:function(t,r,o,l,a){var n,i,s=t.parent(),d=s.parent();return r?this.collapseRow(s):l&&t.is(".k-header")&&this.options.reorderable?this._moveColumn(t,!0):(i=d.find(yt).index(s),n=this._prevHorizontalCell(d,t,i),n[0]||(o?this.lockedTable?(n=this._relatedRow(s),e.contains(this.lockedTable[0],s[0])&&(n=n.prevAll(Tt).first()),n=n.children(wt).last()):n=this._tabNext(t,a,!0):(d=this._horizontalContainer(d),n=this._prevHorizontalCell(d,t,i),n[0]!==t[0]&&xe(d.parent(),!0))),this._setCurrent(n)),!0},_moveRight:function(t,r,o,l,a){var n,i,s=t.parent(),d=s.parent();return r?this.expandRow(s):l&&t.is(".k-header")&&this.options.reorderable?this._moveColumn(t,!1):(i=d.find(yt).index(s),n=this._nextHorizontalCell(d,t,i),n[0]||(o?this.lockedTable?(n=this._relatedRow(s),e.contains(this.table[0],s[0])&&(n=n.nextAll(Tt).first()),n=n.children(wt).first()):n=this._tabNext(t,a,!1):(d=this._horizontalContainer(d,!0),n=this._nextHorizontalCell(d,t,i),n[0]!==t[0]&&xe(d.parent(),!0))),this._setCurrent(n)),!0},_moveUp:function(e,t,r){var o,l,a,n,i,s=e.parent().parent();return t?(o=e.parent(),o=o.prevAll(Tt).first(),o=e.parent().is(Tt)?o.children().eq(e.index()):o.children(wt).last()):r&&e.parent().is(Tt)&&this._hasReorderableRows()?(l=e.index(),o=e.parent(),o=o.prevAll(Tt).first(),a=this.tbody.children(Tt).index(o),n=this.tbody.children(Tt).index(e.parent()),a>=0&&!this.trigger(Tr,{oldIndex:n,newIndex:a,row:e.parent()})&&(this.reorderRows(e.parent(),a),o=this.tbody.children(Tt).eq(a).children().eq(l))):(o=this._prevVerticalCell(s,e),o[0]||(this._lastCellIndex=0,s=this._verticalContainer(s,!0),o=this._prevVerticalCell(s,e),o[0]&&xe(s.parent(),!0))),i=this._lastCellIndex||0,this._setCurrent(o),this._lastCellIndex=i,!0},_moveDown:function(e,t,r){var o,l,a,n,i,s=e.parent().parent();return t?(o=e.parent(),o=o.nextAll(Tt).first(),o=e.parent().is(Tt)?o.children().eq(e.index()):o.children(wt).first()):r&&e.parent().is(Tt)&&this._hasReorderableRows()?(l=e.index(),o=e.parent(),o=o.nextAll(Tt).first(),a=this.tbody.children(Tt).index(o),n=this.tbody.children(Tt).index(e.parent()),a>=0&&!this.trigger(Tr,{oldIndex:n,newIndex:a,row:e.parent()})&&(this.reorderRows(e.parent(),a+1),o=this.tbody.children(Tt).eq(a).children().eq(l))):(o=this._nextVerticalCell(s,e),o[0]||(this._lastCellIndex=0,s=this._verticalContainer(s),o=this._nextVerticalCell(s,e),o[0]&&xe(s.parent(),!0))),i=this._lastCellIndex||0,this._setCurrent(o),this._lastCellIndex=i,!0},_moveColumn:function(t,r){var o=this.wrapper.data().kendoReorderable.element.find(this._draggableInstance.options.filter+":visible"),l=v(L(this.columns)),a=o.index(e(t)),n=r?-1:1,i=l[a],s=F(l,this.columns,a,a+n);s>=0&&(this.reorderColumn(s,i,r),this.trigger(vr,{newIndex:s,oldIndex:a,column:i}))},_handleHome:function(e,r){var o,l=e.parent(),a=l.parent(),n=this.lockedTable&&this.lockedTable.children("tbody")[0]===a[0],i=a[0]===this.tbody[0];return this._hasVirtualColumns()?(this._scrollToColumn(Qe.keys.HOME),!0):(r?o=this.lockedTable?this.lockedTable.find(Tt).first().children(St).first():this.table.find(Tt).first().children(St).first():(i||n)&&(i&&this.lockedTable&&(l=this._relatedRow(l)),o=l.children(wt).first()),o&&o.length?(this._setCurrent(o),!0):t)},_handleEnd:function(e,r){var o,l=e.parent(),a=l.parent(),n=this.lockedTable&&this.lockedTable.children("tbody")[0]===a[0],i=a[0]===this.tbody[0];return this._hasVirtualColumns()?(this._scrollToColumn(Qe.keys.END),!0):(r?o=this.table.find(Tt).last().children(St).last():(i||n)&&(!i&&this.lockedTable&&(l=this._relatedRow(l)),o=l.children(wt).last()),o&&o.length?(this._setCurrent(o),!0):t)},_handlePageDown:function(){return!!this.options.pageable&&(this.dataSource.page(this.dataSource.page()+1),!0)},_handlePageUp:function(){return!!this.options.pageable&&(this.dataSource.page(this.dataSource.page()-1),!0)},_handleTabKey:function(t,r,o,l){var a,n=this.options.editable&&"incell"==this._editMode();return!(!n||t.is("th")||(this.options.scrollable?this._headertables.filter(r).length:this.thead.filter(l).length))&&(a=e(et()).closest(".k-edit-cell"),a[0]&&a[0]!==t[0]&&(t=a),a=this._tabNext(t,r,o),a[0]!==t[0]&&(!!a.length&&(this._handleEditing(t,a,a.closest("table")),!0)))},_handleEscKey:function(t,r){var o,l=et(),a="incell"==this._editMode();return Fe(t)?(a?this.closeCell(!0):(o=e(t).parent().index(),l&&l.blur(),this.cancelRow(!0),o>=0&&this._setCurrent(this.items().eq(o).children(St).first())),xe(r,!0),!0):!!t.has(l).length&&(xe(r,!0),!0)},_toggleCurrent:function(e,t,r){var o=e.parent();return!e.is(".k-command-cell")&&(o.is(".k-grouping-row")?(o.find(".k-icon").first().click(),!0):!(t||!r)&&(o.find(".k-icon").first().click(),!0))},_handleSpaceKey:function(t,r){var o,l,a,n,i=this;if(r&&i.groupable&&t.hasClass("k-header"))return o=i.groupable.descriptors(),l=t.attr(Qe.attr("field")),a=i.groupable.aggregates(),n=t.attr(Qe.attr("title"))||l,i.groupable._canDrag(t)?(o.push({field:l,dir:"asc",aggregates:a||[]}),n+=" "+i.options.messages.ungroupHeader):(o=e.grep(o,function(e){return e.field!==l}),n+=" "+i.options.messages.groupHeader),t.attr("aria-label",n),i.dataSource.group(o),!0},_handleEnterKey:function(t,r,o){var l,a,n=this.options.editable&&this.options.editable.update!==!1,i=o.closest("[role=gridcell]"),s=this._hasDetails();return o.is("table")||e.contains(t[0],o[0])||(t=i),t.is("th")?(l=t.find(".k-link"),l.length?l.click():t.find(nr).trigger("focus"),!0):!!this._toggleCurrent(t,n,s)||(a=t.find(":kendoFocusable").first(),a[0]&&!t.hasClass("k-edit-cell")&&t.hasClass("k-state-focused")?(a.trigger("focus"),!0):!(!n||o.is(":button,.k-button,textarea"))&&(i[0]||(i=t),this._handleEditing(i,!1,r),!0))},_nextHorizontalCell:function(e,t,r){var o,l,a,n=t.nextAll(wt);return n.length||(o=e.find(yt),l=o.index(t.parent()),l!=-1)?n.first():t.hasClass("k-header")?(a=[],G([$(this.columns)[0]],ie(o.eq(0).children(":visible").first()),a,0,0),a[r]?a[r][0]:t):t.parent().hasClass("k-filter-row")?o.last().children(wt).first():o.eq(r).children(wt).first()},_prevHorizontalCell:function(e,t,r){var o,l,a,n,i=t.prevAll(wt);return i.length||(o=e.find(yt),l=o.index(t.parent()),l!=-1)?i.first():t.hasClass("k-header")?(a=[],n=$(this.columns),G([n[n.length-1]],ie(o.eq(0).children().last()),a,0,0),a[r]?a[r][0]:t):t.parent().hasClass("k-filter-row")?o.last().children(wt).last():o.eq(r).children(wt).last()},_currentDataIndex:function(e,r){var o,l=r.attr("data-index");return l?(o=$(this.columns).length,o&&!e.closest("div").hasClass("k-grid-content-locked")[0]?l-o:l):t},_prevVerticalCell:function(t,r){var o,l=r.parent(),a=t.children(yt),n=a.index(l),i=this._currentDataIndex(t,r);if(i||r.hasClass("k-header"))return o=ne(r),o.eq(o.length-2);if(i=Math.max(l.children(wt).index(r),this._lastCellIndex||0),l.hasClass("k-filter-row"))return ae(t).filter(_).eq(i);if(n==-1){if(this._hasVirtualColumns()&&(i=this._virtualCellIndex),l=t.find("tr.k-filter-row:visible"),!l[0])return(this._hasDetails()||r.parent().find(".k-hierarchy-cell").length)&&i&&i--,ae(t).filter(_).eq(i)}else l=0===n?e():a.eq(n-1);return o=l.children(wt),o.eq(o.length>i?i:0)},_nextVerticalCell:function(e,r){var o,l,a,n,i,s,d,c=r.parent(),u=e.children(yt),p=u.index(c),h=this._currentDataIndex(e,r),f=this.virtualScroll||{};if(p!=-1&&h===t&&r.hasClass("k-header"))return ie(r).eq(1);if(h=h?parseInt(h,10):c.children(wt).index(r),h=Math.max(h,this._lastCellIndex||0),p==-1?(c=u.eq(0),f.columns&&(l=parseInt(c.children().first().attr("colspan"),10),h=this._virtualCellIndex-(l>1?l:0)),(this._hasDetails()||c.find(".k-hierarchy-cell").length)&&h++):c=u.eq(p+r[0].rowSpan),a=h,this._currentDataIndex(e,r)!==t)for(n=c.children(":not(.k-group-cell):not(.k-hierarchy-cell)"),i=n.filter(":hidden"),s=0,d=i.length;s<d;s++)n.index(i[s])<h&&a--;return h=a,o=c.children(wt),o.eq(o.length>h?h:0)},_verticalContainer:function(e,t){var r=e.parent(),o=this._navigatableTables.length,l=Math.floor(o/2),a=ct(r[0],this._navigatableTables);return t&&(l*=-1),a+=l,(a>=0||a<o)&&(r=this._navigatableTables.eq(a)),r.find(t?">thead":">tbody")},_horizontalContainer:function(e,t){var r,o,l=this._navigatableTables.length;return l<=2?e:(r=e.parent(),o=ct(r[0],this._navigatableTables),o+=t?1:-1,!t||2!=o&&o!=l?!t&&(1==o||o<0)?e:this._navigatableTables.eq(o).find("thead, tbody"):e)},_tabNext:function(e,t,r){var o=!0,l=r?e.prevAll(wt).first():e.nextAll(":visible").first();if(!l.length){if(l=e.parent(),this.lockedTable&&(o=r&&t==this.lockedTable[0]||!r&&t==this.table[0],l=this._relatedRow(l)),o){if(this._hasVirtualColumns())return e;l=l[r?"prevAll":"nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible").first()}l=r?l.children(wt).last():l.children(wt).first()}return l},_handleEditing:function(r,o,l){var a,n,i=this,s=e(et()),d=i._editMode(),c=po.msie,u=i._editContainer,p=i.options.editable&&i.options.editable.update!==!1;if(l=e(l),n="incell"==d?r.hasClass("k-edit-cell"):r.parent().hasClass("k-grid-edit-row"),i.editable){if(e.contains(u[0],s[0])&&(s.trigger("blur"),c&&s.trigger("blur")),!i.editable)return xe(l),t;if(!i.editable.end())return i._setCurrent("incell"==d?u:u.children().filter(wt).first()),a=u.find(":kendoFocusable").first()[0],a&&a.focus(),t;"incell"==d?i.closeCell():(i.saveRow(),n=!0)}o&&i._setCurrent(o),xe(l,!0),p&&(!n&&!o||o)&&(d===Pr?e(i.current()).hasClass(vt)||i.editCell(i.current()):i.editRow(i.current().parent()))},_wrapper:function(){var e=this,t=e.table,r=e.options.height,o=e.options.width,l=e.element;l.is("div")||(l=l.wrap("<div/>").parent()),e.wrapper=l.addClass("k-grid k-widget k-grid-display-block"),r&&(e.wrapper.css(Ir,r),t.css(Ir,"auto")),o&&e.wrapper.css("width",o),e._initMobile()},_initMobile:function(){var e,t=this.options,r=this;this._isMobile=t.mobile===!0&&Qe.support.mobileOS||"phone"===t.mobile||"tablet"===t.mobile,this._isMobile&&(e=this.wrapper.addClass("k-grid-mobile").wrap("<div data-"+Qe.ns+'stretch="true" data-'+Qe.ns+'role="view" data-'+Qe.ns+'init-widgets="false"></div>').parent(),this.pane=this._createPane(e),this.view=this.pane.view(),t.height?this.pane.element.parent().css(Ir,t.height):this.pane.element.parent().css(Ir,this.wrapper[0].style.height),this._editAnimation="slide",r.wrapper.on("transitionend"+It,function(e){e.stopPropagation()}),r.wrapper.on("contextmenu"+It,"th a",function(e){return e.preventDefault(),!1}),this.view.bind("showStart",function(){r._isLocked()&&(r._updateTablesWidth(),r._applyLockedContainersWidth(),r._syncLockedContentHeight(),r._syncLockedHeaderHeight(),r._syncLockedFooterHeight())}))},_createPane:function(e){var t=Qe.Pane.wrap(e,{viewEngine:{viewOptions:{renderOnInit:!0,wrap:!1,wrapInSections:!0,detachOnHide:!1,detachOnDestroy:!1}}});return t},_tbody:function(){var t,r=this,o=r.table;t=o.find(">tbody"),t.length||(t=e("<tbody/>").appendTo(o)),r.tbody=t.attr("role","rowgroup")},_scrollable:function(){var t,r,o,l,a,n,i,s=this,d=s.options,c=d.scrollable,u=c!==!0&&c.virtual,p=u?Ae(c.virtual):null,h=!Qe.support.kineticScrollNeeded||p&&p.rows?Qe.support.scrollbar():0;c&&(t=s.wrapper.children(".k-grid-header"),t[0]||(t=e('<div class="k-grid-header" />').insertBefore(s.table)),t.css(uo?"padding-left":"padding-right",c.virtual?h+1:h),r=e('<table role="grid" />'),r.width(s.table[0].style.width),r.append(s.thead),t.empty().append(e('<div class="k-grid-header-wrap k-auto-scrollable" />').append(r)),s.content=s.table.parent(),s.virtualScroll=p,s.content.is(".k-virtual-scrollable-wrap, "+_t+go.scrollContainer)&&(s.content=s.content.parent()),s.content.is(".k-grid-content, .k-virtual-scrollable-wrap")||(s.content=s.table.wrap('<div class="k-grid-content k-auto-scrollable" />').parent()),p&&p.rows&&!s.virtualScrollable&&s._createVirtualScrollable(),p&&p.columns&&s.table.css({width:q(ee(X(s.columns)))}),o=t.children(".k-grid-header-wrap"),s.scrollables=o.add(s.content),l=s.wrapper.find(".k-grid-footer"),l.length&&(s.scrollables=s.scrollables.add(l.children(".k-grid-footer-wrap"))),o.off("scroll"+It).on("scroll"+It,function(e){s._scrollLeft!==this.scrollLeft&&Qe.scrollLeft(s.scrollables.not(e.currentTarget),this.scrollLeft)}),p&&p.rows?s.content.find(">.k-virtual-scrollable-wrap").off("scroll"+It).on("scroll"+It,function(){var e=this.scrollLeft!=s._scrollLeft;s._scrollLeft=this.scrollLeft,Qe.scrollLeft(s.scrollables,this.scrollLeft),s.lockedContent&&(s.lockedContent[0].scrollTop=this.scrollTop),p.columns&&e&&s.refresh()}):(a=c.endless,n=s.dataSource.options.pageSize,a&&(s._endlessPageSize=n),s.content.off("scroll"+It).on("scroll"+It,function(e){var t=this.scrollLeft!=s._scrollLeft;s._scrollLeft=this.scrollLeft,Qe.scrollLeft(s.scrollables.not(e.currentTarget),s._scrollLeft),s.lockedContent&&e.currentTarget==s.content[0]&&(s.lockedContent[0].scrollTop=this.scrollTop),a&&this.scrollTop+this.clientHeight-this.scrollHeight>=-10&&!s._endlessFetchInProgress&&s._endlessPageSize<s.dataSource.total()&&(s._skipRerenderItemsCount=s._endlessPageSize,s._endlessPageSize=s._endlessPageSize+n,s.dataSource.options.endless=!0,s._endlessFetchInProgress=!0,s.dataSource.pageSize(s._endlessPageSize)),p&&p.columns&&t&&(s._virtualColScroll=!0,s._cacheEditableState(),s.refresh(),s._restoreEditableState(),s._virtualColScroll=!1)}),i=s.content.data("kendoTouchScroller"),i&&i.destroy(),i=Qe.touchScroller(s.content),i&&i.movable&&(s.touchScroller=i,i.movable.bind("change",function(e){Qe.scrollLeft(s.scrollables,-e.sender.x),s.lockedContent&&s.lockedContent.scrollTop(-e.sender.y)}),s.one(Kt,function(e){e.sender.wrapper.addClass("k-grid-backface")}))))},_createVirtualScrollable:function(){var e=this;e.virtualScrollable&&e.virtualScrollable.destroy(),e.virtualScrollable=new Ke(e.content,{dataSource:e.dataSource,itemHeight:function(){return e._averageRowHeight()},page:function(){e._restoreEditableState()},scroll:function(){e._focusEditable()},loadStart:function(){e._progress(!0)},loadEnd:function(){e._progress(!1)}}),e.virtualScrollable.bind(Yt,pt(e._onVirtualPaging,e))},_onVirtualPaging:function(){var e=this;e._cacheEditableState(),e._isVirtualIncellEditable()&&(e._shouldClearEditableState=!1,e.closeCell(),e._shouldClearEditableState=!0)},_isVirtualEditable:function(){return this._isVirtualIncellEditable()||this._isVirtualInlineEditable()||this._isVirtualPopupEditable()},_isVirtualInlineEditable:function(){return this.virtualScrollable&&this._editMode()===qr},_isVirtualIncellEditable:function(){return this.virtualScrollable&&this._editMode()===Pr},_isVirtualPopupEditable:function(){return this.virtualScrollable&&"popup"===this._editMode()},_hasVirtualColumns:function(){return!!(this.virtualScroll||{}).columns},_scrollVirtualWrapper:function(){var e=this,t=e.virtualScrollable;(e._isVirtualInlineEditable()||e._isVirtualIncellEditable())&&(t._isScrolledToBottom()?t._scrollWrapperToBottom():t._isScrolledToTop()&&t._scrollWrapperToTop())},_scrollVirtualWrapperOnColumnResize:function(){var e=this.virtualScrollable;e&&e._scrollWrapperOnColumnResize()},_restoreEditableState:function(){var t,o,l=this,a=l._editableState||{},n=a.model,i=l.dataSource,s=l._isVirtualInlineEditable(),d=l._isVirtualIncellEditable(),c=l._hasVirtualColumns();(s||d||c)&&n&&i._getByUid(n.uid,i.view())&&(l._editMode()===qr?(l._shouldClearEditableState=!1,l.editRow(n),c||l._focusEditable()):l._editMode()===Pr&&(t=l.tbody.children(r(Wr,n.uid)),o=e(t).children(r(Fr,a.field)),o[0]&&(l._shouldClearEditableState=!1,l.editCell(o),c||l._focusEditable()))),l._shouldClearEditableState=!0},_focusEditable:function(){var e=this,t=(e._editableState||{}).field,o=e._editContainer;o&&o.length&&!gt(o[0],et())&&e._canFocusEditable()&&(e._isVirtualInlineEditable()||e._hasVirtualColumns()?o.find(r(Lr,t)).find(or).eq(0).trigger("focus"):(e._isVirtualIncellEditable()||e._hasVirtualColumns())&&o.find(or).eq(0).trigger("focus"))},_canFocusEditable:function(){var e=this,t=(e._isVirtualIncellEditable()||e._isVirtualInlineEditable()||e._hasVirtualColumns())&&(Le((e.virtualScrollable||{}).wrapper,e._editContainer)||Le(e.content,e._editContainer));return t},_cacheEditableState:function(){var t,r,o=this,l=o._editContainer,a=l?o._modelForContainer(l):null,n=o._isVirtualInlineEditable(),i=o._isVirtualIncellEditable(),s=o._hasVirtualColumns();(n||i||s)&&a&&(o._clearEditableState(),t=e(et()),l&&t[0]&&gt(l[0],t[0])&&(t.change(),r=Qe.widgetInstance(t,Qe.ui),r&&ht(r.value)&&t.is(Mr)&&(r.value(t.val()),r.trigger(Ot))),o._editMode()===qr?o._editableState={model:a,field:t.closest("["+Qe.attr(Lr)+"]").attr(Qe.attr(Lr))}:o._editMode()===Pr&&(o._editableState={model:a,field:l.attr(Qe.attr(Fr))}))},_clearSortClasses:function(){var e=this,t=e.content||e.table,r=e.lockedContent;t&&t.find(xt).removeClass(ur),r&&r.find(xt).removeClass(ur)},_clearEditableState:function(){var e=this;(e.virtualScrollable||e.virtualScroll&&e._hasVirtualColumns())&&(e._editableState=null)},_destroyVirtualScrollable:function(){var e=this;e._clearEditableState(),e.virtualScrollable&&e.virtualScrollable.element&&e.virtualScrollable.destroy(),e.virtualScrollable=null},_renderNoRecordsContent:function(){var t,r=this;r.options.noRecords&&(t=r.table.parent().children("."+ir),t.length&&(r.angular("cleanup",function(){return{elements:t.get()}}),t.remove()),r.dataSource&&r.dataSource.view().length||(t=e(r.noRecordsTemplate({})).insertAfter(r.table),r.angular("compile",function(){return{elements:t.get(),data:[{}]}})))},_setContentWidth:function(t){var r,o=this,l="k-grid-content-expander",a='<div class="'+l+'"></div>',n=o.resizable;o.options.scrollable&&o.wrapper.is(":visible")&&(r=o.table.parent().children("."+l),o._setContentWidthHandler=pt(o._setContentWidth,o),o.dataSource&&o.dataSource.view().length?r[0]&&(r.remove(),n&&n.unbind("resize",o._setContentWidthHandler)):(r[0]||(r=e(a).appendTo(o.table.parent()),n&&n.bind("resize",o._setContentWidthHandler)),o.thead&&(r.width(o.thead.width()),isNaN(parseFloat(t,10))||Qe.scrollLeft(o.content,t))),o._applyLockedContainersWidth(),o._syncLockedContentHeight(),o.lockedHeader&&0===o.table[0].clientWidth&&(o.table[0].style.width="1px"))},_applyLockedContainersWidth:function(){if(this.options.scrollable&&this.lockedHeader){var e,t=this.thead.parent(),r=t.parent(),o=this.wrapper[0].clientWidth,l=this._groups(),a=Qe.support.scrollbar(),n=this.lockedHeader.find(">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)"),i=t.find(">colgroup>col:not(.k-group-col, .k-hierarchy-col)"),s=W(n),d=W(i);l>0&&(s+=rt(this.lockedHeader.find(".k-group-cell").first())*l),s>=o&&(s=o-3*a),this.lockedHeader.add(this.lockedContent).width(s),r[0].style.width=r.parent().width()-s-2+"px",t.add(this.table).width(d),this.virtualScrollable&&!ho&&(o-=a),this.content[0].style.width=o-s-1+"px",this.lockedFooter&&this.lockedFooter.length&&(this.lockedFooter.width(s),e=this.footer.find(".k-grid-footer-wrap"),e[0].style.width=r[0].clientWidth+"px",e.children().first().width(d))}},_setContentHeight:function(){var e,t,r=this,o=r.options,l=r.wrapper.children(".k-grid-header"),a=Qe.support.scrollbar(),n=(o.scrollable||{}).height;o.scrollable&&r.wrapper.is(":visible")&&(n&&""===r.content[0].style.height&&(r.content[0].style.height=n),e=r.wrapper.innerHeight(),e-=ot(l),r.pager&&r.pager.element.is(":visible")&&(e-=ot(r.pager.element)),o.groupable&&(e-=ot(r.wrapper.children(".k-grouping-header"))),o.toolbar&&(e-=ot(r.wrapper.children(".k-grid-toolbar"))),r.footerTemplate&&(e-=ot(r.wrapper.children(".k-grid-footer"))),t=function(e){var t,r;return!!e[0].style.height||(t=e.height(),e.height("auto"),r=e.height(),t!=r?(e.height(""),!0):(e.height(""),!1))},t(r.wrapper)&&(e>2*a?(r.lockedContent&&(a=r.table[0].offsetWidth>r.table.parent()[0].clientWidth?a:0,r.lockedContent.height(e-a)),r.content.height(e)):r.content.height(2*a+1)))},_averageRowHeight:function(){var e,t=this,r=t._items(t.tbody,!0).length,o=t._rowHeight;return 0===r?o:(t._rowHeight||(t._rowHeight=o=ot(t.table)/r,t._sum=o,t._measures=1),e=ot(t.table)/r,o!==e&&(t._measures++,t._sum+=e,t._rowHeight=t._sum/t._measures),o)},_dataSource:function(){var e,r=this,o=r.options,l=o.dataSource;l=dt(l)?{data:l}:l,at(l)&&(nt(l,{table:r.table,fields:r.columns}),e=o.pageable,at(e)&&e.pageSize!==t&&(l.pageSize=e.pageSize)),r.dataSource&&r._refreshHandler?r.dataSource.unbind(Ot,r._refreshHandler).unbind(kt,r._progressHandler).unbind(bt,r._errorHandler).unbind(Nr,r._sortHandler):(r._refreshHandler=pt(r.refresh,r),r._progressHandler=pt(r._requestStart,r),r._errorHandler=pt(r._error,r),r._sortHandler=pt(r._clearSortClasses,r)),r.dataSource=Ye.create(l).bind(Ot,r._refreshHandler).bind(kt,r._progressHandler).bind(bt,r._errorHandler).bind(Nr,r._sortHandler)},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_modelChange:function(t){var r,o,l,a,n,i,s,d,c,u,p=this,h=p.tbody,f=t.model,g=p.tbody.find("tr["+Qe.attr("uid")+"="+f.uid+"]"),m=g.hasClass("k-alt"),_=p._items(h).index(g),k=p.lockedContent;if(k&&(r=p._relatedRow(g)),g.add(r).children(".k-edit-cell").length&&!p.options.rowTemplate)g.add(r).children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){o=e(this),l=oe(p.columns)[p._calculateColumnIndex(o)],l.field===t.field&&(o.hasClass("k-edit-cell")?o.addClass("k-dirty-cell"):p._displayCell(o,l,f))});else if(!g.hasClass("k-grid-edit-row")){for(i=e().add(g),k&&(a=(m?p.lockedAltRowTemplate:p.lockedRowTemplate)(f),i=i.add(r),r.replaceWith(a)),p.angular("cleanup",function(){return{elements:i.get()}}),a=(m?p.altRowTemplate:p.rowTemplate)(f),g.replaceWith(a),a=p._items(h).eq(_),u=[{dataItem:f}],k&&(g=g.add(r),r=p._relatedRow(a)[0],Se(a[0],r),a=a.add(r),u.push({dataItem:f})),p.angular("compile",function(){return{elements:a.get(),data:u}}),n=p.options.selectable,(n||p._checkBoxSelection)&&g.hasClass("k-state-selected")&&p.select(a),d=i.children(":not(.k-group-cell,.k-hierarchy-cell)"),s=a.children(":not(.k-group-cell,.k-hierarchy-cell)"),_=0,c=p.columns.length;_<c;_++)l=p.columns[_],o=s.eq(_),n&&d.eq(_).hasClass("k-state-selected")&&o.addClass("k-state-selected");p.trigger("itemChange",{item:a,data:f,ns:Je})}},_pageable:function(){var t,r=this,o=r.options.pageable,l=r.options.navigatable;o&&(t=r.wrapper.children("div.k-grid-pager"),t.length||(t=e('<div class="k-pager-wrap k-grid-pager"/>')),"top"===o.position?t.prependTo(r.wrapper).addClass("k-grid-pager-top"):t.appendTo(r.wrapper),r.pager&&r.pager.destroy(),r.pager="object"==typeof o&&o instanceof Qe.ui.Pager?o:r.dataSource._groupPaging?new Ue(t,nt({},o,{dataSource:r.dataSource,navigatable:l})):new Qe.ui.Pager(t,nt({},o,{dataSource:r.dataSource,navigatable:l})),r.pager.bind("pageChange",function(e){r.trigger("page",{page:e.index})&&e.preventDefault()}),r._togglePagerVisibility())},_footer:function(){var t,r,o,l=this,a=l.dataSource.aggregates(),n="",i=l.footerTemplate,s=l.options,d=l.footer||l.wrapper.find(".k-grid-footer");i?(n=e(l._wrapFooter(i(a))),d.length?(r=n,l.angular("cleanup",function(){return{elements:d.get()}}),d.replaceWith(r),d=l.footer=r):d=l.footer=s.scrollable?s.pageable&&"top"!==s.pageable.position?n.insertBefore(l.wrapper.children("div.k-grid-pager")):n.appendTo(l.wrapper):n.insertBefore(l.tbody),l.angular("compile",function(){return{elements:d.find("td:not(.k-group-cell, .k-hierarchy-cell)").get(),data:it(l.columns,function(e){return{column:e,aggregate:a[e.field]}})}})):d&&!l.footer&&(l.footer=d),d.length&&(s.scrollable&&(t=d.attr("tabindex",-1).children(".k-grid-footer-wrap"),l.scrollables=e(l.scrollables.filter(function(){return!e(this).is(".k-grid-footer-wrap")}).toArray()).add(t)),l._footerWidth&&d.find("table").css("width",l._footerWidth),t&&(o=Qe.scrollLeft(l.content),s.scrollable!==!0&&l.virtualScroll&&l.virtualScroll.rows&&(o=Qe.scrollLeft(l.wrapper.find(".k-virtual-scrollable-wrap"))),Qe.scrollLeft(t,o))),l.lockedContent&&(l._appendLockedColumnFooter(),l._applyLockedContainersWidth(),l._syncLockedFooterHeight())},_wrapFooter:function(t){var r=this,o="",l=Qe.support.mobileOS?0:Qe.support.scrollbar();return r.options.scrollable?(o=e('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table><tbody>'+t+"</tbody></table></div></div>"),r._appendCols(o.find("table")),o.css(uo?"padding-left":"padding-right",l),o):'<tfoot class="k-grid-footer">'+t+"</tfoot>"},_columnMenu:function(){var e,r,o,l,a,n,i,s,d,c=this,u=oe(c.columns),p=c.options,h=p.columnMenu,f=st(c.columns,function(e){return e.columns!==t}).length>0,g=st(c.columns,function(e){return e.lockable!==!1}).length>0,m=st(c.columns,function(e){return e.stickable===!0}).length>0,_=this._isMobile,k=function(e){c.trigger(qt,{field:e.field,container:e.container})},b=function(e){c.trigger(Vt,{field:e.field,container:e.container})},v=function(e){xe(e.closest("table"),!0)},w=function(e){c.trigger(yr,{column:e.column})},C=function(e){c.trigger(Sr,{column:e.column})},y=function(e){c.trigger("sort",{sort:e.sort})?e.preventDefault():(c._clearEditableState(),c.dataSource.options.endless&&(c.dataSource.options.endless=null,c._endlessPageSize=c.dataSource.options.pageSize,c.dataSource.pageSize(c.dataSource.options.pageSize)))},S=function(e){c.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(c._clearEditableState(),c.dataSource.options.endless&&(c.dataSource.options.endless=null,c._endlessPageSize=c.dataSource.options.pageSize,c.dataSource.pageSize(c.dataSource.options.pageSize)))},T=p.$angular;if(h)for("boolean"==typeof h&&(h={}),c._setColumnsMediaVisibility(u),n=ae(c.thead),i=0,s=n.length;i<s;i++)r=u[i],d=n.eq(i),r.command||!r.field&&!d.attr("data-"+Qe.ns+"field")||(e=d.data("kendoColumnMenu"),e&&e.destroy(),l=r.sortable!==!1&&h.sortable!==!1&&p.sortable!==!1&&nt({},p.sortable,{compare:(r.sortable||{}).compare}),a=!(!p.filterable||r.filterable===!1||h.filterable===!1)&&nt({pane:c.pane},p.filterable,r.filterable),r.filterable&&r.filterable.dataSource&&(a.forceUnique=!1,a.checkSource=r.filterable.dataSource),a&&(a.format=r.format),o={dataSource:c.dataSource,values:r.values,columns:h.columns,sortable:l,filterable:a,messages:h.messages,owner:c,closeCallback:v,init:k,open:b,stick:w,unstick:C,pane:c.pane,sort:y,filtering:S,filter:_?":not(.k-column-active)":"",hasLockableColumns:$(u).length>0&&g&&!f,hasStickableColumns:m&&!f,encodeTitles:c.options.encodeTitles,
componentType:h.componentType},T&&(o.$angular=T),d.kendoColumnMenu(o))},_headerCells:function(){return e(this.thead).find("th").filter(function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")})},_filterable:function(){var e,t,r,o,l,a,n,i=this,s=oe(i.columns),d=function(e){i.trigger(Pt,{field:e.field,container:e.container})},c=function(e){xe(e.closest("table"),!0)},u=function(e){i.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(i._clearEditableState(),i.dataSource.options.endless&&(i.dataSource.options.endless=null,i._endlessPageSize=i.dataSource.options.pageSize,i.dataSource.pageSize(i.dataSource.options.pageSize)))},p=function(e){i.trigger(Wt,{field:e.field,container:e.container})},h=i.options.filterable;if(h&&typeof h.mode==Dr&&h.mode.indexOf("menu")==-1&&(h=!1),h&&!i.options.columnMenu)for(t=ae(i.thead),o=0,l=t.length;o<l;o++)r=t.eq(o),s[o].filterable===!1||s[o].command||!s[o].field&&!r.attr("data-"+Qe.ns+"field")||(e=r.data("kendoFilterMenu"),e&&e.destroy(),e=r.data("kendoFilterMultiCheck"),e&&e.destroy(),a=s[o].filterable,n=nt({},h,a,{dataSource:i.dataSource,values:s[o].values,format:s[o].format,closeCallback:c,title:s[o].title||s[o].field,init:d,open:p,pane:i.pane,change:u}),a&&a.messages&&(n.messages=nt(!0,{},h.messages,a.messages)),a&&a.dataSource&&(n.forceUnique=!1,n.checkSource=a.dataSource),a&&a.multi?r.kendoFilterMultiCheck(n):r.kendoFilterMenu(n))},_filterRow:function(){var t,r,o,l,a,n,i,s,d,c,u,p,h,f,g,m=this;if(m._hasFilterRow())for(r=m.options.$angular,o=oe(m.columns),l=m.options.filterable,a=m.thead.find(".k-filter-row"),n=function(e){m.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(m._clearEditableState(),m.dataSource.options.endless&&(m.dataSource.options.endless=null,m._endlessPageSize=m.dataSource.options.pageSize,m.dataSource.pageSize(m.dataSource.options.pageSize)))},this._updateHeader(this.dataSource.group().length),i=0;i<o.length;i++){if(d=o[i],c=m.options.filterable.operators,u=!1,p=e("<th/>"),h=d.field,d.hidden&&p.hide(),a.append(p),h&&d.filterable!==!1){if(f=d.filterable&&d.filterable.cell||{},s=m.options.dataSource,s instanceof Ye&&(s=m.options.dataSource.options),g=nt(!0,{},l.messages),d.filterable&&nt(!0,g,d.filterable.messages),f.enabled===!1){p.html("&nbsp;");continue}f.dataSource&&(s=f.dataSource,u=!0),d.filterable&&d.filterable.operators&&(c=d.filterable.operators),t={column:d,dataSource:m.dataSource,suggestDataSource:s,customDataSource:u,field:h,messages:g,values:d.values,template:f.template,delay:f.delay,inputWidth:f.inputWidth,suggestionOperator:f.suggestionOperator,minLength:f.minLength,dataTextField:f.dataTextField,operator:f.operator,operators:c,showOperators:f.showOperators,change:n},r&&(t.$angular=r),e("<span/>").attr(Qe.attr("field"),h).appendTo(p).kendoFilterCell(t)}else p.html("&nbsp;");p.data("column",d)}},_sortable:function(){var e,t,r,o,l,a,n=this,i=oe(n.columns),s=n.options.sortable,d=function(e){n.trigger("sort",{sort:e.sort})?e.preventDefault():n._clearEditableState()};if(s){for(o=ae(n.thead),l=0,a=o.length;l<a;l++)e=i[l],e.sortable!==!1&&!e.command&&e.field&&(r=o.eq(l),t=r.data("kendoColumnSorter"),t&&t.destroy(),r.attr("data-"+Qe.ns+"field",e.field).kendoColumnSorter(nt({},s,e.sortable,{dataSource:n.dataSource,aria:!0,filter:":not(.k-column-active)",change:d})));o=null}},_columns:function(t){var r,o,l,a,n,i=this,s=i.table,c=s.find("col"),u=i.element.find("thead tr"),p=i.options.dataSource;if(t=t.length?t:it(s.find("th:not(.k-group-cell):not(.k-hierarchy-cell)"),function(t,r){t=e(t);var o=t.attr(Qe.attr("sortable")),l=t.attr(Qe.attr("filterable")),a=t.attr(Qe.attr("type")),n=t.attr(Qe.attr("groupable")),i=t.attr(Qe.attr("field")),s=t.attr(Qe.attr("title")),d=t.attr(Qe.attr("menu"));return i||(i=t.text().replace(/\s|[^A-z0-9]/g,"")),{field:i,type:a,title:s,sortable:"false"!==o,filterable:"false"!==l,groupable:"false"!==n,menu:"false"!==d,template:t.attr(Qe.attr("template")),width:c.eq(r).css("width")}}),r=!(i.table.find("tbody tr").length>0&&(!p||!p.transport)),i.options.scrollable){if(a=t,o=$(t),t=Q(t),o.length>0&&0===t.length)throw Error("There should be at least one non locked column");he(i.element.find("tr:has(th)").first(),a),t=o.concat(t)}if(u.length&&t.length&&i._updateColumnIDs(t,u.first()),i.columns=d(t,r),e.grep(oe(i.columns),function(e){return e.selectable}).length&&(i._selectedIds={},i._checkBoxSelection=!0,i.wrapper.on(Hr+It,"tbody > tr "+nr,pt(i._checkboxClick,i)),i.wrapper.on(Hr+It,"thead > tr "+nr,pt(i._headerCheckboxClick,i))),l=e.grep(oe(i.columns),function(e){return e.draggable}),l.length)for(i._hasDragHandleColumn=!0,n=0;n<l.length;n++)l[n].headerAttributes=e.extend({"aria-label":i.options.messages.dragHandleLabel},l[n].headerAttributes);i._foreignKeyBindings(i.columns)},_foreignKeyBindings:function(e){var t,r,o=this,l=e.length;for(r=0;r<l;r++)t=e[r],t.dataSource&&o._fetchForeignKeyValues(t)},_fetchForeignKeyValues:function(t){var r=this,o=e.Deferred();r._hasBoundForeignKey=!0,t.dataSource=Ye.create(t.dataSource),r._foreignKeyPromises||(r._foreignKeyPromises=[]),r._foreignKeyPromises.push(o),t.dataSource.fetch().then(function(){var e=t.dataSource.data();t.values=e.map(function(e){return{value:e[t.dataValueField],text:e[t.dataTextField]}}),o.resolve()})},_updateColumnIDs:function(e,t){var r,o,l;if(e.length){for(r=t.find("th:not(.k-group-cell):not(.k-hierarchy-cell)"),l=0;l<e.length;l++)o=r.eq(l).attr("id"),o&&(e[l].headerAttributes=nt(e[l].headerAttributes,{id:o}));this._updateColumnIDs(te(e),t.next())}},_headerCheckboxClick:function(t){var r=this,o=e(t.target),l=o.prop("checked");r._belongsToGrid(o)&&(l?r.select(r.items()):r.clearSelection())},_checkboxClick:function(t){var r=this,o=e(t.target).closest("tr"),l=!o.hasClass(lr);r._belongsToGrid(o)&&(l?r.select(o):r._deselectCheckRows(o))},_groups:function(){var e=this.dataSource.group();return e?e.length:0},_tmpl:function(e,r,a,n){var i,s,d,c,u,p=this,h=nt({},Qe.Template,p.options.templateSettings),f=h.paramName,g=r.length,m={storage:{},count:0},_=p._hasDetails(),k=[],b=p._groups(),v=p.options.navigatable,w=Qe.attr("field"),C="";if(!e){for(e="<tr",a&&k.push("k-alt"),k.push("k-master-row"),k.length&&(e+=' class="'+k.join(" ")+'"'),g&&(e+=" "+Qe.attr("uid")+'="#='+Qe.expr("uid",h.paramName)+'#"'),e+=" role='row'>",b>0&&!n&&(e+=o(b)),_&&(e+='<td class="k-hierarchy-cell" aria-expanded="false"><a class="k-icon k-i-expand" href="\\#" '+Xr+'="'+Yr+'" tabindex="-1"></a></td>'),i=0;i<g;i++)d=r[i],s=d.template,c=typeof s,u=d.field,p._editMode()===Pr&&u&&(d.attributes=d.attributes||{},p.virtualScroll&&(d.attributes[w]=u),C=p._dirtyCellTemplate(u,f),d.attributes["class"]=d.attributes["class"]||"",d.attributes["class"].indexOf(C)<0&&(d.attributes["class"]+=C)),d.colSpan&&d.colSpan>0&&ce(d.attributes)?d.attributes=ue(d.attributes):!d.colSpan&&d.hidden&&(d.attributes=de(d.attributes)),d.command&&(d.attributes=d.attributes||{},t!==d.attributes["class"]?d.attributes["class"]+=" k-command-cell":d.attributes["class"]="k-command-cell"),d.draggable&&(d.attributes=d.attributes||{},t!==d.attributes["class"]?d.attributes["class"]+=" k-drag-cell k-touch-action-none":d.attributes["class"]="k-drag-cell k-touch-action-none",t===d.attributes["aria-label"]&&(d.attributes["aria-label"]=p.options.messages.dragHandleLabel),t!==d.attributes.style?d.attributes.style+=" cursor: move;":d.attributes.style="cursor: move;"),e+="<td"+l(d.attributes),v&&!d.draggable&&(e+=" aria-describedby='"+d.headerAttributes.id+"'"),d.colSpan&&(d.colSpan>1&&(e+=" "+Qe.attr("virtual")),e+=" colSpan='"+d.colSpan+"'"),e+=" role='gridcell'>",e+=p._cellTmpl(d,m),e+="</td>";e+="</tr>"}return e=Qe.template(e,h),m.count>0?pt(e,m.storage):e},_dirtyCellTemplate:function(e,t){var r;return e&&t?(r="["===e.charAt(0)?Qe.expr(e,t+".dirtyFields"):t+".dirtyFields['"+e+"']","#= "+t+" && "+t+".dirty && "+t+".dirtyFields && "+r+" ? ' k-dirty-cell' : '' #"):""},_headerCellText:function(e){var t=this,r=nt({},Qe.Template,t.options.templateSettings),o=e.headerTemplate,l=typeof o,a=e.title&&(t.options.encodeTitles?Be(e.title):e.title)||e.field||"";return l===zr?a=Qe.template(o,r)({}):l===Dr&&(a=o),a},_cellTmpl:function(e,t){var r,o,l=this,a=nt({},Qe.Template,l.options.templateSettings),n=e.template,i=a.paramName,s=e.field,d="",c=e.format,u=typeof n,p=e.values;if(e.command){if(dt(e.command)){for(r=0,o=e.command.length;r<o;r++)d+=e.command[r].visible?Qe.format("#= {0}(data)? '{1}':'' #",e.command[r].visible,l._createButton(e.command[r]).replace(eo,"\\#").replace(/'/gi,"\\'")):l._createButton(e.command[r]).replace(eo,"\\#");return d}return l._createButton(e.command).replace(eo,"\\#")}return e.selectable?io:e.draggable?co:(d+=l._dirtyIndicatorTemplate(s,i),u===zr?(t.storage["tmpl"+t.count]=n,d+="#=this.tmpl"+t.count+"("+i+")#",t.count++):u===Dr?d+=n:p&&p.length&&at(p[0])&&"value"in p[0]&&s?(d+="#var v ="+Qe.stringify(fe(p)).replace(eo,"\\#")+"#",d+="#var f = v[",a.useWithBlock||(d+=i+"."),d+=s+"]#",d+="${f != null ? f : ''}"):(d+=e.encoded?"#:":"#=",c&&(d+='kendo.format("'+c.replace(Zr,"\\$1")+'",'),s?(s=Qe.expr(s,i),d+=s+"==null?'':"+s):d+="''",c&&(d+=")"),d+="#"),d)},_dirtyIndicatorTemplate:function(e,t){var r;return e&&t?(r="["===e.charAt(0)?Qe.expr(e,t+".dirtyFields"):t+".dirtyFields['"+e+"']","#= "+t+" && "+t+".dirty && "+t+".dirtyFields && "+r+" ? '<span class=\"k-dirty\"></span>' : '' #"):""},_virtualCols:function(t){var r,o,l,a=this,n=e.map(t,function(e){return e.hidden?0:parseInt(e.width,10)}),i=Qe.scrollLeft(a.virtualScrollable?a.content.find(">.k-virtual-scrollable-wrap"):a.content),s=rt(a.content),d=q(t),c=[],u=0,p=0,h=0,f=0,g=0;for(f=0;f<t.length;f++){if(r=f<n.length-1?n[f+1]:0,!(g+n[f]+2*r<i)){u=1+h;break}n[f]&&h++,g+=n[f]}for(h=0,g=0,o=t.length-1;o>=0;o--){if(!(g+3*n[o]<d-s-i)){for(p=1+h,l=f;l<=o;l++)t[l].locked||(c.push(t[l]),t[l].colSpan&&delete t[l].colSpan);c[0].colSpan=u,c[c.length-1].colSpan=p;break}n[o]&&h++,g+=n[o]}return c[0].hidden&&c[0].colSpan--,a.virtualCols=c,c},_templates:function(){var t=this,r=t.options,o=t.dataSource,l=o.group(),a=t.footer||t.wrapper.find(".k-grid-footer"),n=o.aggregate(),i=oe(t.columns),s=oe($(t.columns)),d=r.scrollable?oe(Q(t.columns)):i,c=(t.virtualScroll||{}).columns?t._virtualCols(d):d,u=st(v(s),function(e,t){return e.groupHeaderColumnTemplate&&0!==t}),p=st(v(c),function(e){return e.groupHeaderColumnTemplate});if(r.scrollable&&s.length){if(r.rowTemplate||r.altRowTemplate)throw Error("Having both row template and locked columns is not supported");t.rowTemplate=t._tmpl(r.rowTemplate,c,!1,!0),t.altRowTemplate=t._tmpl(r.altRowTemplate||r.rowTemplate,c,!0,!0),t.lockedRowTemplate=t._tmpl(r.rowTemplate,s),t.lockedAltRowTemplate=t._tmpl(r.altRowTemplate||r.rowTemplate,s,!0)}else t.rowTemplate=t._tmpl(r.rowTemplate,c),t.altRowTemplate=t._tmpl(r.altRowTemplate||r.rowTemplate,c,!0);t._hasDetails()&&(t.detailTemplate=t._detailTmpl(r.detailTemplate||"")),(t._group&&!ft(n)||!ft(n)&&!a.length||st(i,function(e){return e.footerTemplate}).length)&&(t.footerTemplate=t._footerTmpl(i,n,"footerTemplate","k-footer-template")),l&&st(i,function(e){return e.groupFooterTemplate}).length&&(n=e.map(l,function(e){return e.aggregates}),t.groupFooterTemplate=t._footerTmpl(c,n,"groupFooterTemplate","k-group-footer",s.length),r.scrollable&&s.length&&(t.lockedGroupFooterTemplate=t._footerTmpl(s,n,"groupFooterTemplate","k-group-footer"))),l&&(u.length||p.length)?(n=e.map(l,function(e){return e.aggregates}),t.groupHeaderColumnTemplate=t._groupHeaderTmpl(v(c),n,"groupHeaderColumnTemplate","k-grouping-row",s.length,p),r.scrollable&&s.length&&(t.lockedGroupHeaderColumnTemplate=t._groupHeaderTmpl(v(s),n,"groupHeaderColumnTemplate","k-grouping-row",0,u))):(t.groupHeaderColumnTemplate=null,t.lockedGroupHeaderColumnTemplate=null),t.options.noRecords&&(t.noRecordsTemplate=t._noRecordsTmpl())},_noRecordsTmpl:function(){var t,r,o,l='<div class="{0}">{1}</div>',a='<div class="k-grid-norecords-template"{1}>{0}</div>',n=this.options.scrollable&&!this.wrapper[0].style.height?' style="margin:0 auto;position:static;"':"",i={storage:{},count:0},s=e.extend({},Qe.Template,this.options.templateSettings),d=s.paramName,c="";return t=this.options.noRecords.template?this.options.noRecords.template:Qe.format(a,this.options.messages.noRecords,n),r=typeof t,"function"===r?(i.storage["tmpl"+i.count]=t,c+="#=this.tmpl"+i.count+"("+d+")#",i.count++):"string"===r&&(c+=t),o=Qe.template(Qe.format(l,ir,c),s),i.count>0&&(o=e.proxy(o,i.storage)),o},_footerTmpl:function(e,t,r,a,n){var i,s,d,c,u,p=this,h=nt({},Qe.Template,p.options.templateSettings),f=h.paramName,g="",m={},_=0,k={},b=p._groups(),v=p.dataSource._emptyAggregates(t);for(g+='<tr class="'+a+'">',b>0&&!n&&(g+=o(b)),p._hasDetails()&&(g+='<td class="k-hierarchy-cell">&nbsp;</td>'),i=0,s=e.length;i<s;i++)u=e[i],d=u[r],c=typeof d,g+="<td"+l(u.footerAttributes)+">",d?(c!==zr&&(k=v[u.field]?nt({},h,{paramName:f+"['"+u.field+"']"}):{},d=Qe.template(d,k)),m["tmpl"+_]=d,g+="#=this.tmpl"+_+"("+f+")#",_++):g+="&nbsp;",g+="</td>";return g+="</tr>",g=Qe.template(g,h),_>0?pt(g,m):g},_groupHeaderTmpl:function(e,r,o,l,a,n){var i,s,d,c,u,p,h=this,f=nt({},Qe.Template,h.options.templateSettings),g=f.paramName,m="",_={},k=0,b={},v=h.dataSource._emptyAggregates(r),w=n.length?ct(n[0],e):-1;if(m+='<tr role="row" class="'+l+'">',a||(m+='# for (var i = 0; i < data.groupCells; i++) { #<td class="k-group-cell">&nbsp;</td># } #'),h._hasDetails()&&(m+='<td class="k-hierarchy-cell">&nbsp;</td>'),w<0)return m+=a?"":Me(e.length),t;if(w<Vr&&n.length<=1&&!a)return m+=a?"":Me(e.length),Qe.template(m,f);for(w<Vr?(w=a?0:1,m+=a?"":Me(w)):m+=a?Pe(w):Me(w),i=w,s=e.length;i<s;i++)u=e[i],d=u[o],c=typeof d,u.sticky?(p=u.groupHeaderColumnTemplateClass||"",p||(p=u.groupHeaderColumnTemplateClass="group-header-column-template-"+Qe.guid()),m+="<td class='"+fr+" "+p+"' style='"+(u.stickyStyle||"")+"'>"):m+="<td>",d?(c!==zr&&(b=v[u.field]?nt({},f,{paramName:g+"['"+u.field+"']"}):{},d=Qe.template(d,b)),_["tmpl"+k]=d,m+="#=this.tmpl"+k+"("+g+")#",k++):m+="&nbsp;",m+="</td>";return m+="</tr>",m=Qe.template(m,f),k>0?pt(m,_):m},_detailTmpl:function(e){var t=this,r="",l=nt({},Qe.Template,t.options.templateSettings),a=l.paramName,n={},i=0,s=t._groups(),d=v(oe(t.columns)).length,c=typeof e;return r+='<tr class="k-detail-row">',s>0&&(r+=o(s)),r+='<td class="k-hierarchy-cell"></td><td class="k-detail-cell"'+(d?' colspan="'+d+'"':"")+">",c===zr?(n["tmpl"+i]=e,r+="#=this.tmpl"+i+"("+a+")#",i++):r+=e,r+="</td></tr>",r=Qe.template(r,l),i>0?pt(r,n):r},_hasDetails:function(){var e=this;return null!==e.options.detailTemplate||(e._events[Mt]||[]).length},_hasFilterRow:function(){var t=this.options.filterable,r=t&&typeof t.mode==Dr&&t.mode.indexOf("row")!=-1,o=this.columns,l=e.grep(o,function(e){return e.filterable===!1});return o.length&&l.length==o.length&&(r=!1),r},_details:function(){var t=this;if(t.options.scrollable&&t._hasDetails()&&$(t.columns).length)throw Error("Having both detail template and locked columns is not supported");t.table.on(Hr+It,".k-hierarchy-cell .k-i-expand, .k-hierarchy-cell .k-i-collapse",function(r){var o=e(this);return t._toggleDetails(o),r.preventDefault(),!1})},_toggleDetails:function(t,r){var o,l,a=this,n=t.closest("td.k-hierarchy-cell"),i=t.hasClass("k-i-expand"),s=t.closest("tr.k-master-row"),d=a.detailTemplate,c=a._hasDetails(),u=i?Jr:Yr,p=!!i;t.toggleClass("k-i-expand",!i).toggleClass("k-i-collapse",i).attr(Xr,u),n.attr("aria-expanded",p),o=s.next(),c&&!o.hasClass("k-detail-row")&&(l=a.dataItem(s),o=e(d(l)).addClass(s.hasClass("k-alt")?"k-alt":"").insertAfter(s),a.angular("compile",function(){return{elements:o.get(),data:[{dataItem:l}]}}),a.trigger(Mt,{masterRow:s,detailRow:o,data:l,detailCell:o.find(".k-detail-cell")})),a.trigger(i?jt:$t,{masterRow:s,detailRow:o}),r?Ve(o,i):o.toggle(i)},dataItem:function(t){if(t=e(t)[0],!t)return null;var r,o,l=this.tbody.children(),a=/k-grouping-row|k-detail-row|k-group-footer/,n=t.sectionRowIndex;for(o=n,r=0;r<n;r++)a.test(l[r].className)&&o--;return this._data[o]},expandRow:function(t,r){var o=e(t).find("> td .k-i-expand");o.length&&this._toggleDetails(o,r)},collapseRow:function(t,r){var o=e(t).find("> td .k-i-collapse");o.length&&this._toggleDetails(o,r)},_createHeaderCells:function(e,r){var o,a,n,i,s,d,c,u=this,p="",h=u.options.messages,f=oe(u.columns),g=u.dataSource.group();for(o=0,i=e.length;o<i;o++)a=e[o].column||e[o],n=u._headerCellText(a),s=a.title,d="",c=ct(a,f),a.selectable?(p+="<th scope='col'"+l(a.headerAttributes),r&&!e[o].colSpan&&(p+=" rowspan='"+r+"'"),c>-1&&(p+=Qe.attr("index")+"='"+c+"'"),n=a.headerTemplate?n:Qe.template(so)({}),p+=">"+n+"</th>"):a.draggable?(p+="<th class='k-header k-drag-cell' scope='col'"+l(a.headerAttributes),r&&!e[o].colSpan&&(p+=" rowspan='"+r+"'"),c>-1&&(p+=Qe.attr("index")+"='"+c+"'"),n=a.headerTemplate?n:"",p+=">"+n+"</th>"):a.command?(p+="<th scope='col'"+l(a.headerAttributes),r&&!e[o].colSpan&&(p+=" rowspan='"+r+"'"),c>-1&&(p+=Qe.attr("index")+"='"+c+"'"),p+=">"+n+"</th>"):(a.field&&(d=Qe.attr("field")+"='"+a.field+"' "),p+="<th scope='col' role='columnheader' "+d,p+=" aria-haspopup='true'",r&&!e[o].colSpan&&(p+=" rowspan='"+r+"'"),e[o].colSpan>1?(p+='colspan="'+(e[o].colSpan-P(a.columns))+'" ',p+=Qe.attr("colspan")+"='"+e[o].colSpan+"'"):1===e[o].colSpan&&(p+=Qe.attr("colspan")+"='"+e[o].colSpan+"'"),s&&(s=s&&(u.options.encodeTitles?Be(s,!0):s),p+=Qe.attr("title")+'="'+s+'" '),a.groupable!==t&&(p+=Qe.attr("groupable")+"='"+a.groupable+"' "),He(u,a)&&(p+="aria-label='"+(s||a.field)+" ",p+=Re(g,a.field)?h.ungroupHeader:h.groupHeader,p+="' "),a.aggregates&&a.aggregates.length&&(p+=Qe.attr("aggregates")+"='"+a.aggregates+"'"),c>-1&&(p+=Qe.attr("index")+"='"+c+"'"),p+=l(a.headerAttributes),p+=">"+n+"</th>");return p},_appendLockedColumnContent:function(){var t,r,o,l,a,n=this.columns,i=this.table.find("colgroup"),s=i.find(xt),d=e(),c=0,u=0;for(t=0,r=n.length;t<r;t++)if(n[t].locked)if(b(n[t])){for(l=1,n[t].columns&&(l=oe(n[t].columns).length-P(n[t].columns)),l=l||1,a=0;a<l;a++)d=d.add(s.eq(t+u+a-c));u+=l-1}else c++;o=e('<div class="k-grid-content-locked"><table><colgroup></colgroup><tbody></tbody></table></div>'),i.detach(),o.find("colgroup").append(d),i.insertBefore(this.table.find("tbody")),this.lockedContent=o.insertBefore(this.content),this.lockedTable=o.children("table")},_appendLockedColumnFooter:function(){var t,r,o=this,l=o.footer,a=l.find(".k-footer-template>td"),n=l.find(".k-grid-footer-wrap>table>colgroup>col"),i=e('<div class="k-grid-footer-locked"><table><colgroup></colgroup><tbody><tr class="k-footer-template"></tr></tbody></table></div>'),s=o._groups(),d=e(),c=e();for(d=d.add(a.filter(".k-group-cell")),t=0,r=oe($(o.columns)).length;t<r;t++)d=d.add(a.eq(t+s));for(c=c.add(n.filter(".k-group-col")),t=0,r=v(oe(Z(o.columns))).length;t<r;t++)c=c.add(n.eq(t+s));d.appendTo(i.find("tr")),c.appendTo(i.find("colgroup")),o.lockedFooter=i.prependTo(l)},_appendLockedColumnHeader:function(t){var r,o,l,a,n,i,s,d,c,u,p,h=this,f=this.columns,g=[],m=0,_=e(),k=h._hasFilterRow(),v=0,w=e(),C=0,S=e(),T=h.thead.prev().find(xt),x=h.thead.find("tr").first().find(".k-header:not(.k-group-cell,.k-hierarchy-cell)"),H=h.thead.find(".k-filter-row").find("th:not(.k-group-cell,.k-hierarchy-cell)"),R=0;for(r=0,l=f.length;r<l;r++){if(f[r].locked){if(s=x.eq(r),C=oe(f[r].columns||[]).length,b(f[r])){for(d=null,f[r].columns&&(d=C-P(f[r].columns)),d=d||1,c=0;c<d;c++)_=_.add(T.eq(r+R+c-m));R+=d-1}for(G([f[r]],ie(s),g,0,0),C=C||1,u=0;u<C;u++)w=w.add(H.eq(v+u));v+=C}f[r].columns&&(m+=P(f[r].columns)),b(f[r])||m++}if(g.length){for(o='<div class="k-grid-header-locked" style="width:1px"><table><colgroup></colgroup><thead>',o+=Array(g.length+1).join("<tr></tr>"),o+=(k?'<tr class="k-filter-row"></tr>':"")+"</thead></table></div>",i=e(o),T=i.find("colgroup"),T.append(h.thead.prev().find("col.k-group-col").add(_)),a=i.find("thead tr:not(.k-filter-row)"),r=0,l=g.length;r<l;r++)S=y(g[r]),a.eq(r).append(h.thead.find("tr").eq(r).find(".k-group-cell").add(S));return p=O(this.thead),g.length<p&&V(i,p-g.length),n=i.find(".k-filter-row"),n.append(h.thead.find(".k-filter-row .k-group-cell").add(w)),this.lockedHeader=i.prependTo(t),this.thead.find(".k-group-cell").remove(),!0}return!1},_removeLockedContainers:function(){var e=this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);Qe.destroy(e),e.off(It).remove(),this.lockedHeader=this.lockedContent=this.lockedFooter=null,this.selectable=null},_thead:function(){var t,r,o,l,a,n,i,s,d,c=this,u=c.columns,p=c._hasDetails()&&u.length,h=c._hasFilterRow(),f="",g=c.table.find(">thead"),m=c.element.find("thead").first().length>0,_=c.options.messages.expandCollapseColumnHeader;if(g.length||(g=e("<thead/>").insertBefore(c.tbody)),c.lockedHeader&&c.thead?(r=c.thead.find("tr:has(th):not(.k-filter-row)").html(""),r.remove(),r=e(),c._removeLockedContainers()):r=m?c.element.find("thead").first().find("tr:has(th):not(.k-filter-row)"):c.element.find("tr:has(th)").first(),r.length){for(t=0;t<u.length;t++)l=ct(u[t],oe(u)),a=ae(r.parent()).filter("th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(l),u[t].hidden&&l>=0&&(a[0].style.display="none");c._updateHeadersAttr(te(u))}else if(r=g.children().first(),!r.length){for(o=[{rowSpan:1,cells:[],index:0}],c._prepareColumns(o,u),t=0;t<o.length;t++)f+="<tr>",p&&(f+='<th class="k-hierarchy-cell" scope="col">'+_+"</th>"),f+=c._createHeaderCells(o[t].cells,o[t].rowSpan),f+="</tr>";r=e(f)}h&&(n=e("<tr/>"),n.addClass("k-filter-row"),(p||r.find(".k-hierarchy-cell").length)&&n.prepend('<th class="k-hierarchy-cell" scope="col">&nbsp;</th>'),i=(c.thead||g).find(".k-filter-row"),i.length&&(Qe.destroy(i),i.remove()),g.append(n)),r.children().length?p&&!r.find(".k-hierarchy-cell")[0]&&r.prepend('<th class="k-hierarchy-cell" scope="col">'+(_?_:"&nbsp;")+"</th>"):(f="",p&&(f+='<th class="k-hierarchy-cell" scope="col">&nbsp;</th>'),f+=c._createHeaderCells(u),r.html(f)),r.attr("role","row").find("th").addClass("k-header"),c.options.scrollable||g.addClass("k-grid-header"),r.find("script").remove().end().prependTo(g),c.thead&&c._destroyColumnAttachments(),this.angular("cleanup",function(){return{elements:g.find("th"+St).get()}}),this.angular("compile",function(){return{elements:g.find(Ht).get(),data:it(u,function(e){return{column:e}})}}),c.thead=g.attr("role","rowgroup"),c._sortable(),c._filterable(),c._filterRow(),c._scrollable(),c._columnMenu(),d=this.options.scrollable&&$(this.columns).length,d&&(s=c._appendLockedColumnHeader(c.thead.closest(".k-grid-header")),c._appendLockedColumnContent(),c.lockedContent.on("DOMMouseScroll"+It+" mousewheel"+It,pt(c._wheelScroll,c)),Qe.support.touch&&(c._lockedContentUserEvents=new Qe.UserEvents(c.lockedContent,{move:function(e){c.content.scrollTop(c.content.scrollTop()+-e.y.delta),e.preventDefault()}})),c._updateLockedCols()),c._updateCols(),c._updateColumnCellIndex(),c._updateFirstColumnClass(),c._resizable(),c._draggable(),c._reorderable(),c._updateHeader(c._groups()),c._updateStickyColumns(),d&&(s&&c._syncLockedHeaderHeight(),c._applyLockedContainersWidth()),c.groupable&&c._attachGroupable()},_retrieveFirstColumn:function(t,r){var o,l=e();if(r.length&&t[0]){for(o=t[0];o.columns&&o.columns.length;)o=o.columns[0],r=r.filter(":not(:first)");l=l.add(r)}return l},_updateFirstColumnClass:function(){var t,r,o=this,l=o.columns||[],a=o._hasDetails()&&l.length;a||o._groups()||(t=o.thead.find(">tr:not(.k-filter-row):not(:first)"),l=Q(l),r=o._retrieveFirstColumn(l,t),o._isLocked()&&(t=o.lockedHeader.find("thead>tr:not(.k-filter-row):not(:first)"),l=$(o.columns),r=r.add(o._retrieveFirstColumn(l,t))),r.each(function(){var t=e(this).find("th");t.removeClass("k-first"),t.eq(0).addClass("k-first")}))},_prepareColumns:function(e,t,r,o){var l,a,n=o||e[e.length-1],i=e[n.index+1],s=0;for(l=0;l<t.length;l++)a={column:t[l],colSpan:0},n.cells.push(a),t[l].columns&&t[l].columns.length&&(i||(i={rowSpan:0,cells:[],index:e.length},e.push(i)),a.colSpan=t[l].columns.length,this._prepareColumns(e,t[l].columns,a,i),s+=a.colSpan-1,n.rowSpan=e.length-n.index);r&&(r.colSpan+=s)},_wheelScroll:function(e){var t,r,o;e.ctrlKey||(t=this.content,this.virtualScroll&&this.virtualScroll.rows&&(t=this.virtualScrollable.verticalScrollbar),r=t.scrollTop(),o=Qe.wheelDeltaY(e),o&&(t[0].scrollHeight>t[0].clientHeight&&(t[0].scrollTop<t[0].scrollHeight-t[0].clientHeight&&o<0||t[0].scrollTop>0&&o>0)&&e.preventDefault(),t.scrollTop(r+-o)))},_isLocked:function(){return null!=this.lockedHeader},_updateHeaderCols:function(){var e=this.thead.parent().add(this.table);this._isLocked()?pe(e,ee(X(this.columns)),this._hasDetails(),0):pe(e,ee(v(this.columns)),this._hasDetails(),0)},_updateColumnSorters:function(){var e,t,r,o,l,a=this,n=ae(a.thead),i=oe(a.columns);if(a.options.sortable)for(o=0,l=n.length;o<l;o++)e=i[o],e.sortable!==!1&&!e.command&&e.field&&(t=n.eq(o),r=t.data("kendoColumnSorter"),r&&r.refresh())},_updateHeadersAttr:function(e){var t,r,o;if(e.length){for(t=this,r=0;r<e.length;r++)e[r].headerAttributes&&(o=t.element.find("[id='"+e[r].headerAttributes.id+"']"),o.attr("headers",e[r].headerAttributes.headers));t._updateHeadersAttr(te(e))}},_updateCols:function(e){e=e||this.thead.parent().add(this.table),this._appendCols(e,this._isLocked())},_updateLockedCols:function(e){this._isLocked()&&(e=e||this.lockedHeader.find("table").add(this.lockedTable),pe(e,ee(Z(this.columns)),this._hasDetails(),this._groups()))},_appendCols:function(e,t){t?pe(e,ee(X(this.columns)),this._hasDetails(),0):pe(e,ee(v(this.columns)),this._hasDetails(),this._groups())},_autoColumns:function(e){if(e&&e.toJSON){var t,r,o=this;e=e.toJSON(),r=!(o.table.find("tbody tr").length>0&&(!o.dataSource||!o.dataSource.transport));for(t in e)o.columns.push({field:t,encoded:r,headerAttributes:{id:Qe.guid()}});o._thead(),o._templates()}},_rowsHtml:function(e,t){var r,o,l=this,a="",n=t.rowTemplate,i=t.altRowTemplate;for(r=0,o=e.length;r<o;r++)l._skipRerenderItemsCount>0?l._skipRerenderItemsCount--:a+=r%2?i(e[r]):n(e[r]),l._data.push(e[r]);return a},_groupData:function(e,t,r){var o,l=this,a=l._groupAggregatesDefaultObject||{},n=e.items,i=nt({},a,e.aggregates),s=nt({},{field:e.field,value:e.value,items:n,aggregates:i},e.aggregates[r?r.field:e.field]),d={};if(!t)for(o in i)d[o]=nt({},i[o],{group:{field:e.field,value:e.value,items:n}});return nt({},d,s)},_removeGroupIfEmpty:function(e){var t,r,o,l=this,a=l.dataSource._group.length;for(o=0;o<a;o++)e=e.prev(),t=+e.attr("data-group-item-count"),r=+e.attr("data-sub-group-count"),1!=t&&1!=r||e.hide()},_groupRowHtml:function(e,t,r,o,l,a,n){var i,s,d,c=this,u="",p=e.field,h=st(oe(c.columns),function(e){return e.field==p})[0]||{},f=v(c.columns)[0],g=f?f.groupHeaderColumnTemplate:null,m=h.groupHeaderTemplate?h.groupHeaderTemplate:g,_=(h.title&&(c.options.encodeTitles?Be(h.title,!0):h.title)||p)+": "+ge(e.value,h.format,h.values,h.encoded),k=e.currentItems||e.items,b=c._groups(),w=l.groupFooterTemplate,C=l.groupHeaderColumnTemplate,y=!c.dataSource._isGroupPaged()||c.dataSource._groupsState[e.uid];if(c.options.editable&&e.items&&e.items[0]&&e.items[0].isNew&&e.items[0].isNew()&&(y=!0),(l.groupFooterTemplate||l.groupHeaderColumnTemplate||h.groupHeaderTemplate)&&(d=c._groupData(e,!1,!(h.groupHeaderTemplate||!v(c.columns)[0].groupHeaderColumnTemplate)&&v(c.columns)[0])),m&&!a&&(_=typeof m===zr?m(d):Qe.template(m)(d)),c._skipRerenderItemsCount?o(t,r,_,y,e.uid,c.dataSource._isGroupPaged()):C?e.excludeHeader?e.excludeHeader=!1:u+=C(nt({},d,{groupCells:r,colspan:b-r,text:_})):e.excludeHeader?e.excludeHeader=!1:u+=o(t,r,_,y,e.uid,c.dataSource._isGroupPaged()),y)if(e.hasSubgroups)for(i=0,s=k.length;i<s;i++)u+=c._groupRowHtml(k[i],a?t:t-1,r+1,o,l,a,n&&i===k.length-1);else u+=c._rowsHtml(k,l);return w&&(n?ct(e.value,c._skippedGroups)||c._skippedGroups.push(e.value):(c._skippedGroups.length&&c._skippedGroups[0]===e.value&&c._skippedGroups.shift(),c._skipRerenderItemsCount||(u+=w(d)))),u},collapseGroup:function(r){var o,l,a,n,i,s,d,c,u,p,h=this,f=r,g=this.options.groupable,m=g.showFooter,_=m?0:1,k=e();if(r=e(r),o=r.find(".k-group-cell").length,this.dataSource._isGroupPaged())return s=r.attr("data-group-uid"),d=h.dataSource._getGroupByUid(s),c=h.dataSource._calculateGroupsTotal([d],!0),h.dataSource._groupsState[s]=!1,u=h.dataSource._calculateGroupsTotal([d],!0),h.dataSource._serverGroupsTotal-=c-u,h._progress(!0),h.dataSource.range(h.dataSource._currentRangeStart,h.dataSource.take(),function(){h._progress(!1)},"collapseGroup"),t;for(this._isLocked()&&(r.closest("div").hasClass("k-grid-content-locked")?k=this.tbody.children("tr").eq(r.index()).nextAll("tr"):(k=r.nextAll("tr"),r=this.lockedTable.find(">tbody>tr").eq(r.index()))),r.find(".k-i-collapse").addClass("k-i-expand").removeClass("k-i-collapse"),r.find("td[aria-expanded='true']").first().attr("aria-expanded",!1).find("a").attr(Xr,Yr),r=r.nextAll("tr"),p=[],a=0,n=r.length;a<n&&(i=r.eq(a),l=i.find(".k-group-cell").length,i.hasClass("k-grouping-row")?_++:i.hasClass("k-group-footer")&&_--,!(l<=o||i.hasClass("k-group-footer")&&_<0));a++)k.length&&p.push(k[a]),p.push(i[0]);e(p).hide(),this.options.scrollable.endless&&this.content&&(clearTimeout(h._collapseGroupsTimeOut),h._collapseGroupsTimeOut=setTimeout(function(){h.content.scroll(),h._groupToCollapse=f}))},expandGroup:function(r){var o,l,a,n,i,s,d,c,u,p,h,f,g,m,_;if(r=e(r),o=this,l=o.options.groupable.showFooter,s=e(),u=[],p=1,a=r.find(".k-group-cell").length,this.dataSource._isGroupPaged())return h=r.attr("data-group-uid"),f=o.dataSource._getGroupByUid(h),g=o.dataSource._calculateGroupsTotal([f],!0),o.dataSource._groupsState[h]=!0,f.items&&f.items.length&&(m=o.dataSource._calculateGroupsTotal([f],!0),o.dataSource._serverGroupsTotal+=m-g),o._progress(!0),o.dataSource.range(o.dataSource._currentRangeStart,o.dataSource.take(),function(){o._progress(!1)},"expandGroup"),t;for(this._isLocked()&&(r.closest("div").hasClass("k-grid-content-locked")?s=this.tbody.children("tr").eq(r.index()).nextAll("tr"):(s=r.nextAll("tr"),r=this.lockedTable.find(">tbody>tr").eq(r.index()))),r.find(".k-i-expand").addClass("k-i-collapse").removeClass("k-i-expand"),r.find("td[aria-expanded='false']").first().attr("aria-expanded",!0).find("a").attr(Xr,Jr),r=r.nextAll("tr"),d=0,c=r.length;d<c&&(n=r.eq(d),i=n.find(".k-group-cell").length,!(i<=a));d++)i!=a+1||n.hasClass("k-detail-row")||(n.show(),s.eq(d).show(),n.hasClass("k-grouping-row")&&n.find(".k-icon").hasClass("k-i-collapse")&&o.expandGroup(n),n.hasClass("k-master-row")&&n.find(".k-icon").hasClass("k-i-collapse")&&(n.next().show(),s.eq(d+1).show())),n.hasClass("k-grouping-row")&&(l&&u.push(n.is(":visible")),p++),n.hasClass("k-group-footer")&&(l&&(_=u.pop(),n.toggle(_),s.eq(d).toggle(_)),1==p?(n.show(),s.eq(d).show()):p--);(0===a&&o.options.scrollable.endless&&this._isLocked()||!o.options.scrollable.endless&&this._isLocked())&&o._syncLockedContentHeight()},_updateHeader:function(t){var r=this,o=r._isLocked()?r.lockedHeader.find("thead"):r.thead,l=o.find("tr.k-filter-row").find("th.k-group-cell").length,a=o.find("tr").first().find("th.k-group-cell").length,n=o.children("tr:not(:first)").filter(function(){return!e(this).children(":visible").length});t>a?(e(Array(t-a+1).join('<th class="k-group-cell k-header" scope="col">'+r.options.messages.expandCollapseColumnHeader+"</th>")).prependTo(o.children("tr:not(.k-filter-row)")),r.element.is(":visible")&&n.find("th.k-group-cell").hide()):t<a&&o.find("tr").each(function(){e(this).find("th.k-group-cell").eq(t).remove(),e(this).find("th.k-group-cell").slice(t).remove()}),t>l&&e(Array(t-l+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>')).prependTo(o.find(".k-filter-row"))},_firstDataItem:function(e,t){return e&&t&&(e=e.hasSubgroups?this._firstDataItem(e.items[0],t):e.items[0]),e},_updateTablesWidth:function(){var t,r=this;r._isLocked()&&(t=e(">.k-grid-footer>.k-grid-footer-wrap>table",r.wrapper).add(r.thead.parent()).add(r.table),r._footerWidth=Ce(t.eq(0)),t.width(r._footerWidth),t=e(">.k-grid-footer>.k-grid-footer-locked>table",r.wrapper).add(r.lockedHeader.find(">table")).add(r.lockedTable),
t.width(Ce(t.eq(0))))},hideColumn:function(r){var o,l,a,n,s,d,c,u,p,h,f,g=this,m=0,k=g.footer||g.wrapper.find(".k-grid-footer"),w=g.virtualScroll||{},C=g.columns,y=g.lockedHeader?ae(g.lockedHeader.find(">table>thead")).filter(_).length:0,S=st(oe(g.columns),function(e){return e.groupHeaderColumnTemplate});if(r="number"==typeof r?C[r]:at(r)?st(M(C),function(e){return e===r})[0]:st(M(C),function(e){return e.field===r})[0],r&&b(r)){if(h=g._columnVisibilitySetter(r),r.columns&&r.columns.length){for(d=A(r,C),h(r,!1),me(i(e(">table>thead",g.lockedHeader),g.thead,">tr:eq("+d.row+")>th"),d.cell,!1),a=0;a<r.columns.length;a++)this.hideColumn(r.columns[a]);return g.trigger(Gt,{column:r}),t}if(p=ct(r,v(oe(C))),h(r,!1),g._setParentsVisibility(r,!1),g._templates(),g._updateCols(),g._updateLockedCols(),f=g.thead,c=p,g.lockedHeader&&y>p?f=g.lockedHeader.find(">table>thead"):c-=y,o=ae(f).filter(_).eq(c),o[0].style.display="none",me(i(e(">table>thead",g.lockedHeader),g.thead,">tr.k-filter-row>th"),p,!1),k[0]&&(g._updateCols(k.find(">.k-grid-footer-wrap>table")),g._updateLockedCols(k.find(">.k-grid-footer-locked>table")),me(k.find(".k-footer-template>td"),p,!1)),w.columns&&!r.locked)return g._updateContentWidth(),g.trigger(Gt,{column:r}),t;if(g.lockedTable&&y>p?_e(g.lockedTable.find(">tbody>tr"),p):_e(g.tbody.children(),p-y),g.lockedTable)g._updateTablesWidth(),g._applyLockedContainersWidth(),g._syncLockedContentHeight(),g._syncLockedHeaderHeight(),g._syncLockedFooterHeight();else{for(n=g.thead.prev().find("col"),a=0,u=n.length;a<u;a+=1)if(s=n[a].style.width,n[a].className.indexOf("k-hierarchy-col")>-1)m+=rt(n[a]);else if(n[a].className.indexOf("k-group-col")>-1)m+=rt(n[a]);else{if(!s||s.indexOf("%")!=-1){m=0;break}m+=parseInt(s,10)}l=g.wrapper.find(">.k-grid-header table").first().add(g.wrapper.find(">.k-grid-footer table").first()).add(g.table),g._footerWidth=null,m&&(l.each(function(){this.style.width=m+"px"}),g._footerWidth=m,g._setContentWidth())}g._updateFirstColumnClass(),g._updateStickyColumns(),S.length>0&&g._renderGroupRows(),g.trigger(Gt,{column:r})}},_setParentsVisibility:function(t,r){var o,l,a,n,s,d=this,c=d.columns,p=[],h=d._columnVisibilitySetter(t),f=r?function(e){return v(e.columns).length&&e.hidden}:function(e){return!v(e.columns).length&&!e.hidden};if(u(t,c,p)&&p.length)for(o=p.length-1;o>=0;o--)l=p[o],a=E(l,c),n=i(e(">table>thead",this.lockedHeader),this.thead,">tr:eq("+a.row+")>th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(a.cell),f(l)&&(h(l,r),n[0].style.display=r?"":"none"),n.filter("["+Qe.attr("colspan")+"]").length&&(s=parseInt(n.attr(Qe.attr("colspan")),10),n[0].colSpan=s-P(l.columns)||1)},_updateContentWidth:function(){var e=this,t=e.table.add(e.thead.parent());t.css({width:q(ee(X(e.columns)))}),e.refresh()},showColumn:function(r){var o,l,a,n,s,d,c,u,p,h,f,g,m,_,k=this,v=k.columns,w=k.virtualScroll||{},C=k.footer||k.wrapper.find(".k-grid-footer"),y=k.lockedHeader?ae(k.lockedHeader.find(">table>thead")).length:0,S=st(oe(k.columns),function(e){return e.groupHeaderColumnTemplate});if("number"==typeof r?(h=r,r=v[r]):at(r)?e.each(M(v),function(e,t){if(t===r)return r=t,h=e,!1}):e.each(M(v),function(e,t){if(t.field===r)return r=t,h=e,!1}),r&&!b(r)){if(m=k._columnVisibilitySetter(r),r.columns&&r.columns.length){for(c=E(r,v),f=M(k.options.columns)[h],m(r,!0),me(i(e(">table>thead",k.lockedHeader),k.thead,">tr:eq("+c.row+")>th"),c.cell,!0),o=0;o<r.columns.length;o++)f.columns[o].hidden||this.showColumn(r.columns[o]);return k.trigger(Nt,{column:r}),t}if(g=ct(r,oe(v)),m(r,!0),k._setParentsVisibility(r,!0),k._templates(),k._updateCols(),k._updateLockedCols(),_=k.thead,d=g,k.lockedHeader&&y>g?_=k.lockedHeader.find(">table>thead"):d-=y,a=ae(_).eq(d),a[0].style.display="",me(i(e(">table>thead",k.lockedHeader),k.thead,">tr.k-filter-row>th"),g,!0),C[0]&&(k._updateCols(C.find(">.k-grid-footer-wrap>table")),k._updateLockedCols(C.find(">.k-grid-footer-locked>table")),me(C.find(".k-footer-template>td"),g,!0)),w.columns&&!r.locked)return k._updateContentWidth(),k.trigger(Nt,{column:r}),t;if(k.lockedTable&&y>g?ve(k.lockedTable.find(">tbody>tr"),g):ve(k.tbody.children(),g-y),k.lockedTable)k._updateTablesWidth(),k._applyLockedContainersWidth(),k._syncLockedContentHeight(),k._syncLockedHeaderHeight();else if(n=k.wrapper.find(">.k-grid-header table").first().add(k.wrapper.find(">.k-grid-footer table").first()).add(k.table),r.width){for(s=0,p=k.thead.prev().find("col"),o=0,l=p.length;o<l;o+=1)if(u=p[o].style.width,p[o].className.indexOf("k-hierarchy-col")>-1)s+=rt(p[o]);else if(p[o].className.indexOf("k-group-col")>-1)s+=rt(p[o]);else{if(u.indexOf("%")>-1){s=0;break}s+=parseInt(u,10)}k._footerWidth=null,s&&(n.each(function(){this.style.width=s+"px"}),k._footerWidth=s,k._setContentWidth())}else n.width("");k._updateFirstColumnClass(),k._updateStickyColumns(),S.length>0&&k._renderGroupRows(),k.trigger(Nt,{column:r})}},_columnVisibilitySetter:function(e){var t=e||{};return C(t.media)?p:f},_buildSkeleton:function(){var e,t,r,o=this.virtualCols?this.virtualCols:ee(this.columns),l=this.dataSource.pageSize()||this.dataSource.total(),a="";for(this._hasVirtualColumns()&&(e=parseInt(this.content.find("tr").first().find("td").first().attr("colspan"),10)),t=0;t<l;t++){for(a+="<tr>",r=0;r<o.length;r++)a+=e&&!r?"<td colspan='"+e+"'><span class='k-skeleton k-skeleton-text k-skeleton-pulse'></span></td>":"<td><span class='k-skeleton k-skeleton-text k-skeleton-pulse'></span></td>";a+="</tr>"}return a},_progress:function(e){var t,r=this.element,o=this.options.scrollable&&this.options.scrollable.endless,l=this.options.loaderType,a=this.options.scrollable&&this.options.scrollable.virtual;a?r=this.content:this._editContainer&&"popup"===this._editMode()?r=this._editContainer:this.lockedContent||o?r=this.wrapper:this.element.is("table")?r=this.element.parent():this.content&&this.content.length&&(r=this.content),"skeleton"==l?e?(t=this._buildSkeleton(),r.find("tbody").empty().append(t)):r.find(".k-skeleton").closest("tbody").empty():o&&e?Qe.ui.progress(r,e,{height:this.content.height(),top:this.content[0].offsetTop,opacity:!0}):Qe.ui.progress(r,e)},_resize:function(e,t){this._syncLockedContentHeight(),this._syncLockedHeaderHeight(),this.content&&(this._setContentWidth(),this._setContentHeight()),this.lockedTable&&this._syncLockedScroll(),this.virtualScrollable&&(t||this._rowHeight)&&(t&&(this._rowHeight=null),this.virtualScrollable.repaintScrollbar()),this.pager&&this.pager.element&&this.pager.resize(t),this._anyStickyColumns()&&this._updateStickyColumns(!1)},_isActiveInTable:function(){var t=et();return!!t&&(this.table[0]===t||e.contains(this.table[0],t)||this._isLocked()&&(this.lockedTable[0]===t||e.contains(this.lockedTable[0],t)))},refresh:function(t){var r,o,l,a=this,n=a.dataSource.view(),i=a.options.navigatable,s=a.virtualScroll||{},d=e(a.current()),c=!1,u=(a.dataSource.group()||[]).length,p=u+ee(v(a.columns)).length;t&&"itemchange"===t.action&&(a.editable||a.options.scrollable.endless)&&("popup"!=this._editMode()||"popup"===this._editMode()&&!a._editableIsClosing)||(s.columns&&a._templates(),t&&"remove"===t.action&&a.editable&&a.editable.options.model&&ct(a.editable.options.model,t.items)>-1&&a.editable.options.model.unbind(Ot,a._modelChangeHandler),t=t||{},a.trigger("dataBinding",{action:t.action||"rebind",index:t.index,items:t.items})||(t.action===Zt&&a._isVirtualEditable()&&(a._destroyEditable(),a._clearEditableState()),a._angularItems("cleanup"),a._endlessFetchInProgress||(i&&(a._isActiveInTable()||a._editContainer&&a._editContainer.data("kendoWindow"))&&(c=d.is("th"),r=c?d.parent().children(":not(.k-group-cell)").index(d[0]):Math.max(a.cellIndex(d),0)),a._destroyEditable()),a.options.scrollable&&a.options.scrollable.endless&&!a._pdfInitialized?(clearTimeout(a._progressTimeOut),a._progressTimeOut=setTimeout(function(){a._endlessFetchInProgress||a._progress(!1)},100)):a._progress(!1),a._hideResizeHandle(),a._data=[],a.columns.length||(a._autoColumns(a._firstDataItem(n[0],u)),p=u+a.columns.length),a._group=u>0||a._group,a._group&&(a._templates(),a._updateCols(),a._updateLockedCols(),a._virtualColScroll||a._updateHeader(u),a._group=u>0,a._groupRows=ke(n)),a.content&&(o=Qe.scrollLeft(a.content)),l=a._skipRerenderItemsCount,a._renderContent(n,p,u),a.options.scrollable&&a.options.scrollable.endless&&this.lockedContent&&(a._skipRerenderItemsCount=l),a._renderLockedContent(n,p,u),a._virtualColScroll||(a._footer(),a._renderNoRecordsContent(),a._togglePagerVisibility(),a._setContentHeight(),a._setContentWidth(a.content&&o)),a.lockedTable&&(s.rows?a.content.find(">.k-virtual-scrollable-wrap").trigger("scroll"):a.touchScroller?a.touchScroller.movable.trigger("change"):(a.wrapper.one("scroll",function(e){e.stopPropagation()}),a.content.trigger("scroll"))),a._endlessFetchInProgress||a._rowDropping||a._restoreCurrent(r,c),a.touchScroller&&a.touchScroller.contentResized(),a.selectable&&a.selectable.resetTouchEvents(),a._muteAngularRebind(function(){a._angularItems("compile")}),a._checkBoxSelection&&a._toggleHeaderCheckState(!1),a.options.persistSelection&&(a.selectable&&!Qe.ui.Selectable.parseOptions(a.options.selectable).cell||a._checkBoxSelection)&&(a.items().length||a.dataSource._isGroupPaged())&&a._restoreSelection(),a._hasReorderableRows()&&(a._draggableRows(),a._reorderableRows()),a.trigger(Kt)))},_restoreCurrent:function(r,o){var l,a,n,i,s;if(!(r===t||r<0)){if(this._removeCurrent(),o)this._setCurrent(this.thead.find("th:not(.k-group-cell)").eq(r));else{if(l=0,a=this.virtualScroll||{},this._rowVirtualIndex?l=a.rows?this.virtualScrollable.position(this._rowVirtualIndex):this._rowVirtualIndex:r=0,n=e(),this.lockedTable&&(n=this.lockedTable.find(">tbody>tr").eq(l)),n=n.add(this.tbody.children().eq(l)),this._hasVirtualColumns()&&(i=parseInt(n.find("td").first().attr("colspan"),10),r=this._virtualCellIndex-(i>1?i-1:0)),s=n.find(">td:not(.k-group-cell):not(.k-hierarchy-cell)").eq(r),!s.length||r<0)return;this._hasVirtualColumns()?this._setCurrent(s,!0,!0):this._setCurrent(s)}this._current&&xe(this._current.closest("table")[0],!0)}},_restoreSelection:function(){var e,t=this,r=t.items(),o=ht(t.dataSource.options.schema.model)?t.dataSource.options.schema.model.fn.idField:t.dataSource.options.schema.model.id;e=st(r,function(e){var r=t.dataItem(e)[o];if(t._selectedIds[r])return e}),t.select(e)},_angularItems:function(e){Qe.ui.DataBoundWidget.fn._angularItems.call(this,e),"cleanup"!==e||this.dataSource&&this.dataSource.options.endless||this._cleanupDetailItems(),this._angularGroupItems(e),this._angularGroupFooterItems(e)},_cleanupDetailItems:function(){var e=this;e._hasDetails()&&(e.angular("cleanup",function(){return{elements:e.tbody.children(".k-detail-row")}}),e.tbody.find(".k-detail-cell").empty())},_angularGroupItems:function(t){var r=this,o=r.tbody;r.lockedContent&&(o=r.lockedTable.find("tbody")),r._group&&r.angular(t,function(){return{elements:o.children(".k-grouping-row"),data:e.map(ke(r.dataSource.view()),function(e){return{dataItem:e}})}})},_angularGroupFooterItems:function(t){var r=this,o=r.tbody;r.lockedContent&&(o=r.element),r._group&&r.groupFooterTemplate&&r.angular(t,function(){return{elements:o.find(".k-group-footer"),data:e.map(be(r.dataSource.view()),function(e){return{dataItem:e}})}})},_renderContent:function(e,t,r){var o,l,a,n,i=this,s="",d=null!=i.lockedContent,c=null,u=i.options.scrollable,p={rowTemplate:i.rowTemplate,altRowTemplate:i.altRowTemplate,groupFooterTemplate:i.groupFooterTemplate,groupHeaderColumnTemplate:i.groupHeaderColumnTemplate};if(u&&u.endless&&!i.dataSource.options.endless&&(i._skipRerenderItemsCount=0,i.content&&(i.content[0].scrollTop=0)),c=i._skipRerenderItemsCount>0,t=d?t-ee(Z(i.columns)).length:t,r>0)for(t=d?t-r:t,i.detailTemplate&&t++,i.groupFooterTemplate&&(i._groupAggregatesDefaultObject=i.dataSource.aggregates()),i.options.scrollable.endless&&(n=i.dataSource.flatView().length),o=0,l=e.length;o<l;o++)i._skippedGroups||(i._skippedGroups=[]),a=n&&o===e.length-1&&n!==i.dataSource.total(),s+=i._groupRowHtml(e[o],t,0,d?We:qe,p,d,a);else s+=i._rowsHtml(e,p);c?(i.tbody.append(s),clearTimeout(i._endlessFetchTimeOut),i._endlessFetchTimeOut=setTimeout(function(){i._groupToCollapse&&(i.collapseGroup(i._groupToCollapse),i._groupToCollapse=null)}),i._endlessFetchInProgress=null):i.tbody=se(i.tbody,i.table,s,this.options.$angular)},_renderGroupRows:function(){var t,r,o,l,a,n,i,s,d,c,u,p,h,f,g,m,_,k=this,b=k._groupRows,w=k.wrapper.find(".k-grouping-row"),C=k._groups(),y=null!=k.lockedContent;w.each(function(w,S){f=e(S),c=f.closest("table").parent(),u=c.is("."+Et),r=ee(u?v($(k.columns)):v(Q(k.columns))),g=f.find("."+zt).length,y?(t=u?qe:We,o=u?r.length+C-g:r.length):(t=qe,o=r.length+C-g),l=w>=b.length?b[w-b.length]:b[w],a=l.field,n=st(oe(k.columns),function(e){return e.field==a})[0]||{},_=!(n.groupHeaderTemplate||!v(k.columns)[0].groupHeaderColumnTemplate)&&v(k.columns)[0],i=n.groupHeaderTemplate?n.groupHeaderTemplate:v(k.columns)[0].groupHeaderColumnTemplate,s=(n.title&&(k.options.encodeTitles?Be(n.title,!0):n.title)||a)+": "+ge(l.value,n.format,n.values,n.encoded),C=C,d=k._groupData(l,!1,_),m=u?k.lockedGroupHeaderColumnTemplate:k.groupHeaderColumnTemplate,i&&(s=typeof i===zr?i(d):Qe.template(i)(d)),p=f.prev().length?f.prev():f.parent(),h=e(m?m(nt({},d,{groupCells:g,colspan:C-g,text:s})):t(o,g,s)),p.is("tbody")?p.prepend(h):p.after(h),f.remove()})},_renderLockedContent:function(e,t,r){var o,l,a,n="",i=null,s={rowTemplate:this.lockedRowTemplate,altRowTemplate:this.lockedAltRowTemplate,groupFooterTemplate:this.lockedGroupFooterTemplate,groupHeaderColumnTemplate:this.lockedGroupHeaderColumnTemplate};if(this.lockedContent){if(a=this.lockedTable,i=this._skipRerenderItemsCount>0,r>0)for(t-=v(oe(Q(this.columns))).length,o=0,l=e.length;o<l;o++)n+=this._groupRowHtml(e[o],t,0,qe,s,!1,this.options.scrollable.endless&&o===e.length-1);else n=this._rowsHtml(e,s);i?a.children("tbody").append(n):se(a.children("tbody"),a,n,this.options.$angular),this._syncLockedContentHeight()}},_togglePagerVisibility:function(){this.options.pageable.alwaysVisible===!1&&this.wrapper.find(".k-grid-pager").toggle(this.dataSource.total()>=this.dataSource.pageSize())},_adjustRowsHeight:function(e,t){var r,o,l,a,n=e[0].rows,i=n.length,s=t[0].rows,d=e.add(t),c=d.length,u=[];for(r=0;r<i&&s[r];r++)n[r].style.height&&(n[r].style.height=s[r].style.height="");for(r=0;r<i&&s[r];r++)o=n[r].offsetHeight,l=s[r].offsetHeight,a=0,o>l?a=o:o<l&&(a=l),u.push(a);for(r=0;r<c;r++)d[r].style.display="none";for(r=0;r<i;r++)u[r]&&(n[r].style.height=s[r].style.height=u[r]+1+"px");for(r=0;r<c;r++)d[r].style.display=""}}),Qe.ExcelMixin&&Qe.ExcelMixin.extend($e.prototype),Qe.PDFMixin&&(Qe.PDFMixin.extend($e.prototype),$e.prototype._drawPDF_autoPageBreak=function(r){function o(){p&&s!==t?(u.one("change",l),u.page(s)):(d.refresh(),l())}function l(){f.appendTo(document.body);var t=e.extend({},d.options.pdf,{_destructive:!0,progress:function(e){r.notify({page:e.page,pageNumber:e.pageNum,progress:.5+e.pageNum/e.totalPages/2,totalPages:e.totalPages})}});Qe.drawing.drawDOM(n,t).always(function(){f.remove()}).then(function(e){c.resolve(e),d.toggleUnexportableColumns(d.columns,!0)}).fail(function(e){c.reject(e)})}function a(){var e=u.page(),t=p?u.totalPages():1;i.append(h.children("tr:not(.k-detail-row)")),e<t?u.page(e+1):(u.unbind("change",a),o())}var n,i,s,d=this,c=new e.Deferred,u=d.dataSource,p=d.options.pdf.allPages,h=d.wrapper.find('table[role$="grid"] > tbody').first(),f=e("<div>").css({position:"absolute",left:-1e4,top:-1e4});return d.toggleUnexportableColumns(d.columns),n=d.wrapper.clone().css({height:"auto",width:"auto"}).appendTo(f),n.find(".k-grid-content").css({height:"auto",width:"auto",overflow:"visible"}),n.find('table[role$="grid"], .k-grid-footer table').css({height:"auto",width:"100%",overflow:"visible"}),n.find(".k-grid-pager, .k-grid-toolbar, .k-grouping-header").remove(),n.find(".k-grid-header, .k-grid-footer, .k-auto-scrollable").css({paddingRight:0}),this._initPDFProgress(r),i=n.find('table[role$="grid"] > tbody').first().empty(),s=u.page(),p?(u.bind("change",a),u.page(1)):a(),c.promise()},$e.prototype.toggleUnexportableColumns=function(e,t){var r,o,l,a,n,i=e.length;for(n=0;n<i;n++)r=e[n],o=r.exportable,t?r._toggledDuringExport?(r._toggledDuringExport=!1,r.hidden?this.showColumn(r):this.hideColumn(r)):r.columns&&this.toggleUnexportableColumns(r.columns,t):("object"==typeof r.exportable&&(o=r.exportable.pdf),l=!r.hidden&&o!==!1,a=r.hidden&&o===!0,o=l||a,o||r.hidden?o&&r.hidden?(r._toggledDuringExport=!0,this.showColumn(r)):o&&r.columns&&this.toggleUnexportableColumns(r.columns):(r._toggledDuringExport=!0,this.hideColumn(r)))},$e.prototype._drawPDF=function(r){function o(){i&&d!==t?(n.unbind("change",l),n.one("change",function(){a.resolve(s)}),n.page(d)):a.resolve(s)}function l(){c.toggleUnexportableColumns(c.columns),c._drawPDFShadow({width:c.wrapper.width()},{avoidLinks:c.options.pdf.avoidLinks}).done(function(e){var t=n.page(),l=i?n.totalPages():1,a={page:e,pageNumber:t,progress:t/l,totalPages:l};c.toggleUnexportableColumns(c.columns,!0),r.notify(a),s.append(a.page),t<l?n.page(t+1):o()}).fail(function(e){a.reject(e)})}var a,n,i,s,d,c=this;return c.options.pdf.paperSize&&"auto"!=c.options.pdf.paperSize?c._drawPDF_autoPageBreak(r):(a=new e.Deferred,n=c.dataSource,i=c.options.pdf.allPages,this._initPDFProgress(r),s=new Qe.drawing.Group,d=n.page(),i?(n.bind("change",l),n.page(1)):l(),a.promise())},$e.prototype._initPDFProgress=function(t){var r,o=e("<div class='k-loading-pdf-mask'><div class='k-loading-color'></div></div>");o.prepend(this.wrapper.clone().css({position:"absolute",top:0,left:0})),this._pdfInitialized=!0,this.wrapper.append(o),r=e("<div class='k-loading-pdf-progress'>").appendTo(o).kendoProgressBar({type:"chunk",chunkCount:10,min:0,max:1,value:0}).data("kendoProgressBar"),t.progress(function(e){r.value(e.progress)}).always(function(){Qe.destroy(o),o.remove()})}),Je.plugin($e),Je.plugin(Ke)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t,r){(r||t)()});
//# sourceMappingURL=kendo.grid.min.js.map
